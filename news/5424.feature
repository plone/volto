Added conditional variations support. @sneridagh @robgietema
