
<!DOCTYPE html>


<html lang="en" data-content_root="../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />
<meta content="This upgrade guide lists all breaking changes in Volto and explains the steps that are necessary to upgrade to the latest version." name="description" />
<meta content="This upgrade guide lists all breaking changes in Volto and explains the steps that are necessary to upgrade to the latest version." property="og:description" />
<meta content="Upgrade Guide" property="og:title" />
<meta content="Volto, Plone, frontend, React, Upgrade, Guide" name="keywords" />
<meta property="og:title" content="Upgrade Guide" />
<meta property="og:type" content="website" />
<meta property="og:url" content="https://6.docs.plone.org/upgrade-guide/index.html" />
<meta property="og:site_name" content="Plone Documentation" />
<meta property="og:description" content="This upgrade guide lists all breaking changes in Volto and explains the steps that are necessary to upgrade to the latest version. Volto uses Semantic Versioning. For more information see Version p..." />
<meta property="og:image" content="https://6.docs.plone.org/_static/Plone_logo_square.png" />
<meta property="og:image:alt" content="Plone Documentation" />
<meta property="og:locale" content="en_US" />

    <title>Upgrade Guide &#8212; Volto Documentation v0.0.1</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/plone-sphinx-theme.css?v=88f4e24d" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/sphinx-examples.css?v=e236af4b" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-design.min.css?v=95c83b7e" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css" />
    <link media="print" rel="stylesheet" type="text/css" href="../_static/print.css?v=734b19f4" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="../_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>

    <script src="../_static/documentation_options.js?v=3611b776"></script>
    <script src="../_static/doctools.js?v=9bcbadda"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../_static/copybutton.js?v=f281be69"></script>
    <script src="../_static/scripts/plone-sphinx-theme.js?v=ce3a8c55"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script src="../_static/design-tabs.js?v=f930bc37"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'upgrade-guide/index';</script>
    <link rel="search" type="application/opensearchdescription+xml"
          title="Search within Volto Documentation v0.0.1"
          href="../_static/opensearch.xml"/>
    <link rel="icon" href="../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Plone REST API JavaScript client" href="../client/index.html" />
    <link rel="prev" title="critical.css (above the fold) optimizations" href="../deploying/performance.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search"
         aria-label="Search"
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="../index.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../_static/logo.svg" class="logo__image only-light" alt=""/>
    <script>document.write(`<img src="../_static/logo.svg" class="logo__image only-dark" alt=""/>`);</script>
  
  
    <p class="title logo__title">Volto Documentation</p>
  
</a></div>
        <div class="sidebar-primary-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
            
          
            
          
            
          
          
          
          
          
          
          
          
          
          <a href="https://github.com/plone/volto" title="GitHub" class="nav-link custom-fancy-css" rel="noopener me" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-square-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
        <li class="nav-item">
            
          
            
          
            
          
          
          
          
          
          
          
          
          
          <a href="https://plone.social/@plone" title="Mastodon" class="nav-link custom-fancy-css" rel="noopener me" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-mastodon fa-lg" aria-hidden="true"></i>
            <span class="sr-only">Mastodon</span></a>
        </li>
        <li class="nav-item">
            
          
            
          
            
          
          
          
          
          
          
          
          
          
          <a href="https://www.youtube.com/@PloneCMS" title="YouTube" class="nav-link custom-fancy-css" rel="noopener me" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-youtube fa-lg" aria-hidden="true"></i>
            <span class="sr-only">YouTube</span></a>
        </li>
        <li class="nav-item">
            
          
            
          
            
          
          
          
          
          
          
          
          
          
          <a href="https://x.com/plone" title="X (formerly Twitter)" class="nav-link custom-fancy-css" rel="noopener me" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-square-x-twitter fa-lg" aria-hidden="true"></i>
            <span class="sr-only">X (formerly Twitter)</span></a>
        </li>
</ul></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        <ul class="current nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../development/index.html">Development</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../development/overview.html">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../development/creating-project.html">Create a Volto project without a backend</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../development/add-ons/index.html">Develop Volto add-ons</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="../development/add-ons/install-an-add-on.html">Install an add-on in Volto</a></li>
<li class="toctree-l3"><a class="reference internal" href="../development/add-ons/install-an-add-on-dev-18.html">Install an add-on in development mode in Volto 18</a></li>
<li class="toctree-l3"><a class="reference internal" href="../development/add-ons/install-an-add-on-dev-17.html">Install an add-on in development mode in Volto 17</a></li>
<li class="toctree-l3"><a class="reference internal" href="../development/add-ons/load-add-on-configuration.html">Load configuration from add-ons</a></li>
<li class="toctree-l3"><a class="reference internal" href="../development/add-ons/create-an-add-on-18.html">Create an add-on for Volto 18</a></li>
<li class="toctree-l3"><a class="reference internal" href="../development/add-ons/create-an-add-on-17.html">Create an add-on for Volto 17</a></li>
<li class="toctree-l3"><a class="reference internal" href="../development/add-ons/test-add-ons-18.html">Test add-ons in Volto 18</a></li>
<li class="toctree-l3"><a class="reference internal" href="../development/add-ons/test-add-ons-17.html">Test add-ons in Volto 17</a></li>
<li class="toctree-l3"><a class="reference internal" href="../development/add-ons/extend-webpack-add-on.html">Extend webpack setup from an add-on</a></li>
<li class="toctree-l3"><a class="reference internal" href="../development/add-ons/extend-eslint-add-on.html">Extend ESLint configuration from an add-on</a></li>
<li class="toctree-l3"><a class="reference internal" href="../development/add-ons/troubleshoot-transpilation.html">Troubleshoot untranspiled add-on dependencies</a></li>
<li class="toctree-l3"><a class="reference internal" href="../development/add-ons/i18n.html">Add-on internationalization</a></li>
<li class="toctree-l3"><a class="reference internal" href="../development/add-ons/best-practices.html">Best practices for add-ons</a></li>
<li class="toctree-l3"><a class="reference internal" href="../development/add-ons/theme.html">Create a Volto theme add-on</a></li>
<li class="toctree-l3"><a class="reference internal" href="../development/add-ons/public-folder.html">Add static files from your add-on to your build</a></li>
</ul>
</details></li>
<li class="toctree-l2"><a class="reference internal" href="../development/folder-structure.html">Folder structure</a></li>
<li class="toctree-l2"><a class="reference internal" href="../development/environment-variables.html">How to use environment variables</a></li>
<li class="toctree-l2"><a class="reference internal" href="../development/customizing-components.html">Customizing Components</a></li>
<li class="toctree-l2"><a class="reference internal" href="../development/customizing-views.html">Customizing Volto Views</a></li>
<li class="toctree-l2"><a class="reference internal" href="../development/creating-views.html">Creating Volto Views</a></li>
<li class="toctree-l2"><a class="reference internal" href="../development/images.html">Images</a></li>
<li class="toctree-l2"><a class="reference internal" href="../development/i18n.html">Internationalization</a></li>
<li class="toctree-l2"><a class="reference internal" href="../development/express.html">Custom Express middleware</a></li>
<li class="toctree-l2"><a class="reference internal" href="../development/lazyload.html">Lazy loading</a></li>
<li class="toctree-l2"><a class="reference internal" href="../development/appextras.html">AppExtras component</a></li>
<li class="toctree-l2"><a class="reference internal" href="../development/contextnavigation.html">Context navigation component</a></li>
<li class="toctree-l2"><a class="reference internal" href="../development/pluggables.html">Pluggables framework</a></li>
<li class="toctree-l2"><a class="reference internal" href="../development/widget.html">Forms and widgets</a></li>
<li class="toctree-l2"><a class="reference internal" href="../development/how-to-restrict-blocks.html">How to restrict blocks</a></li>
<li class="toctree-l2"><a class="reference internal" href="../development/color-picker-widget.html">Color picker widget</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../configuration/index.html">Configuration</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../configuration/how-to.html">The configuration registry</a></li>
<li class="toctree-l2"><a class="reference internal" href="../configuration/settings-reference.html">Settings reference guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../configuration/experimental.html">Experimental features</a></li>
<li class="toctree-l2"><a class="reference internal" href="../configuration/zero-config-builds.html">Zero configuration builds</a></li>
<li class="toctree-l2"><a class="reference internal" href="../configuration/component-registry.html">Component registry</a></li>
<li class="toctree-l2"><a class="reference internal" href="../configuration/internalproxy.html">Internal proxy to content backend API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../configuration/backend.html">Backend configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../configuration/volto-config-js.html">Programmatically define the active add-ons and theme</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../configuration/volto-slate/index.html"><code class="docutils literal notranslate"><span class="pre">volto-slate</span></code></a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="../configuration/volto-slate/api.html"><code class="docutils literal notranslate"><span class="pre">volto-slate</span></code> API</a></li>
<li class="toctree-l3"><a class="reference internal" href="../configuration/volto-slate/configuration-settings.html">Editor Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../configuration/volto-slate/writing-plugins.html">How to write a Slate editor plugin</a></li>
</ul>
</details></li>
<li class="toctree-l2"><a class="reference internal" href="../configuration/multilingual.html">Multilingual</a></li>
<li class="toctree-l2"><a class="reference internal" href="../configuration/workingcopy.html">Working copy support</a></li>
<li class="toctree-l2"><a class="reference internal" href="../configuration/environmentvariables.html">Environment variables</a></li>
<li class="toctree-l2"><a class="reference internal" href="../configuration/expanders.html">API expanders</a></li>
<li class="toctree-l2"><a class="reference internal" href="../configuration/locking.html">Locking support</a></li>
<li class="toctree-l2"><a class="reference internal" href="../configuration/slots.html">Slots</a></li>
<li class="toctree-l2"><a class="reference internal" href="../configuration/validation.html">Client side form field validation</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../theming/index.html">Theming</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../theming/about-semantic.html">About Semantic UI</a></li>
<li class="toctree-l2"><a class="reference internal" href="../theming/semanticui-theming.html">Semantic UI Theming</a></li>
<li class="toctree-l2"><a class="reference internal" href="../theming/theming-engine.html">How does the theming engine work?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../theming/theming-strategy.html">Theming Strategy</a></li>
<li class="toctree-l2"><a class="reference internal" href="../theming/custom-styling.html">Custom Styling</a></li>
<li class="toctree-l2"><a class="reference internal" href="../theming/using-third-party-themes.html">Using third party libraries and themes other than <code class="docutils literal notranslate"><span class="pre">semantic-ui</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../theming/theming-a-base-theme.html">Customize a base theme</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../blocks/index.html">Blocks</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../blocks/introduction.html">Blocks Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../blocks/anatomy.html">Blocks anatomy</a></li>
<li class="toctree-l2"><a class="reference internal" href="../blocks/settings.html">Blocks settings</a></li>
<li class="toctree-l2"><a class="reference internal" href="../blocks/editcomponent.html">Blocks - Edit components</a></li>
<li class="toctree-l2"><a class="reference internal" href="../blocks/block-style-wrapper.html">Block style wrapper</a></li>
<li class="toctree-l2"><a class="reference internal" href="../blocks/extensions.html">Block extensions mechanism</a></li>
<li class="toctree-l2"><a class="reference internal" href="../blocks/ssr.html">Server-side rendering for async blocks</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../blocks/core/index.html">Core Blocks developer notes</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="../blocks/core/listing.html">Listing block</a></li>
<li class="toctree-l3"><a class="reference internal" href="../blocks/core/teaser.html">Teaser Block</a></li>
<li class="toctree-l3"><a class="reference internal" href="../blocks/core/grid.html">Grid block</a></li>
<li class="toctree-l3"><a class="reference internal" href="../blocks/core/container.html">Container</a></li>
</ul>
</details></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../blocks/examples/index.html">Volto block examples</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="../blocks/examples/custom-schema-and-view.html">Block with a custom schema</a></li>
<li class="toctree-l3"><a class="reference internal" href="../blocks/examples/custom-schema-view-and-edit.html">Block with a custom schema and edit components</a></li>
<li class="toctree-l3"><a class="reference internal" href="../blocks/examples/custom-view-and-variations.html">Block with a custom schema and variations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../blocks/examples/custom-view-variations-and-schema-enhancer.html">Block with a custom schema, variations, and a schema enhancer in a variation</a></li>
</ul>
</details></li>
</ul>
</details></li>
<li class="toctree-l1"><a class="reference internal" href="../backend/index.html">Integration with the backend</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../deploying/index.html">Deploying</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../deploying/simple.html">Simple deployment</a></li>
<li class="toctree-l2"><a class="reference internal" href="../deploying/pm2.html">Deployment using a Node.js process manager (PM2)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../deploying/seamless-mode.html">Seamless mode</a></li>

<li class="toctree-l2"><a class="reference internal" href="../deploying/apache.html">Apache</a></li>
<li class="toctree-l2"><a class="reference internal" href="../deploying/sentry.html">Integration with Sentry</a></li>
<li class="toctree-l2"><a class="reference internal" href="../deploying/performance.html">critical.css (above the fold) optimizations</a></li>
</ul>
</details></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Upgrade Guide</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../client/index.html">Plone REST API JavaScript client</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../client/quick-start.html">Quick Start</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../client/actions/index.html">Endpoint actions</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="../client/actions/actions.html">Actions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../client/actions/addons.html">Add-ons</a></li>
<li class="toctree-l3"><a class="reference internal" href="../client/actions/aliases.html">Aliases</a></li>
<li class="toctree-l3"><a class="reference internal" href="../client/actions/breadcrumbs.html">Breadcrumbs</a></li>
<li class="toctree-l3"><a class="reference internal" href="../client/actions/comments.html">Comments</a></li>
<li class="toctree-l3"><a class="reference internal" href="../client/actions/content.html">Content</a></li>
<li class="toctree-l3"><a class="reference internal" href="../client/actions/contextnavigation.html">Context Navigation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../client/actions/controlpanels.html">Control Panels</a></li>
<li class="toctree-l3"><a class="reference internal" href="../client/actions/copymove.html">Copy and Move</a></li>
<li class="toctree-l3"><a class="reference internal" href="../client/actions/database.html">Database</a></li>
<li class="toctree-l3"><a class="reference internal" href="../client/actions/email-notification.html">Email Notification</a></li>
<li class="toctree-l3"><a class="reference internal" href="../client/actions/email-send.html">Email Send</a></li>
<li class="toctree-l3"><a class="reference internal" href="../client/actions/groups.html">Groups</a></li>
<li class="toctree-l3"><a class="reference internal" href="../client/actions/history.html">History</a></li>
<li class="toctree-l3"><a class="reference internal" href="../client/actions/linkintegrity.html">Link Integrity</a></li>
<li class="toctree-l3"><a class="reference internal" href="../client/actions/lock.html">Locking</a></li>
<li class="toctree-l3"><a class="reference internal" href="../client/actions/login.html">Login</a></li>
<li class="toctree-l3"><a class="reference internal" href="../client/actions/navigation.html">Navigation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../client/actions/navroot.html">Navigation root</a></li>
<li class="toctree-l3"><a class="reference internal" href="../client/actions/principals.html">Principals</a></li>
<li class="toctree-l3"><a class="reference internal" href="../client/actions/querysources.html">Querysources</a></li>
<li class="toctree-l3"><a class="reference internal" href="../client/actions/querystring.html">Querystring</a></li>
<li class="toctree-l3"><a class="reference internal" href="../client/actions/querystringsearch.html">Querystring Search</a></li>
<li class="toctree-l3"><a class="reference internal" href="../client/actions/registry.html">Registry</a></li>
<li class="toctree-l3"><a class="reference internal" href="../client/actions/relations.html">Relations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../client/actions/roles.html">Roles</a></li>
<li class="toctree-l3"><a class="reference internal" href="../client/actions/rules.html">Rules</a></li>
<li class="toctree-l3"><a class="reference internal" href="../client/actions/search.html">Search</a></li>
<li class="toctree-l3"><a class="reference internal" href="../client/actions/site.html">Site</a></li>
<li class="toctree-l3"><a class="reference internal" href="../client/actions/sources.html">Sources</a></li>
<li class="toctree-l3"><a class="reference internal" href="../client/actions/system.html">System</a></li>
<li class="toctree-l3"><a class="reference internal" href="../client/actions/transactions.html">Transactions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../client/actions/translations.html">Translations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../client/actions/types.html">Types</a></li>
<li class="toctree-l3"><a class="reference internal" href="../client/actions/upgrade.html">Upgrade</a></li>
<li class="toctree-l3"><a class="reference internal" href="../client/actions/users.html">Users</a></li>
<li class="toctree-l3"><a class="reference internal" href="../client/actions/userschema.html">User schema</a></li>
<li class="toctree-l3"><a class="reference internal" href="../client/actions/vocabularies.html">Vocabularies</a></li>
<li class="toctree-l3"><a class="reference internal" href="../client/actions/workflow.html">Workflow</a></li>
<li class="toctree-l3"><a class="reference internal" href="../client/actions/workingcopy.html">Working Copy</a></li>
</ul>
</details></li>
<li class="toctree-l2"><a class="reference internal" href="../client/misc.html">Miscellaneous considerations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../client/future-improvements.html">Future improvements</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../user-manual/index.html">User Manual</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../user-manual/blocks.html">Edit content using blocks</a></li>
<li class="toctree-l2"><a class="reference internal" href="../user-manual/copy-paste-blocks.html">Copy, Cut, and Paste blocks in Volto</a></li>
<li class="toctree-l2"><a class="reference internal" href="../user-manual/links-to-item.html">Finding links and references to the current page</a></li>
</ul>
</details></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/index.html">Learning resources</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../contributing/index.html">Contributing to Volto</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../contributing/developing-core.html">Develop Volto core</a></li>
<li class="toctree-l2"><a class="reference internal" href="../contributing/design-principles.html">Design principles</a></li>
<li class="toctree-l2"><a class="reference internal" href="../contributing/style-guide.html">Style Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../contributing/language-features.html">JavaScript language features and browser support</a></li>
<li class="toctree-l2"><a class="reference internal" href="../contributing/linting.html">Linting</a></li>
<li class="toctree-l2"><a class="reference internal" href="../contributing/testing.html">Testing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../contributing/acceptance-tests.html">Acceptance tests</a></li>
<li class="toctree-l2"><a class="reference internal" href="../contributing/documentation.html">Documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../contributing/react.html">React</a></li>
<li class="toctree-l2"><a class="reference internal" href="../contributing/redux.html">Redux</a></li>
<li class="toctree-l2"><a class="reference internal" href="../contributing/routing.html">Routing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../contributing/icons.html">Icons</a></li>
<li class="toctree-l2"><a class="reference internal" href="../contributing/accessibility-guidelines.html">Accessibility guidelines</a></li>
<li class="toctree-l2"><a class="reference internal" href="../contributing/bundle-size-optimization.html">Bundle size optimization</a></li>
<li class="toctree-l2"><a class="reference internal" href="../contributing/typescript.html">TypeScript</a></li>
<li class="toctree-l2"><a class="reference internal" href="../contributing/volto-core-addons.html">Volto core add-ons</a></li>
<li class="toctree-l2"><a class="reference internal" href="../contributing/version-policy.html">Version policy</a></li>
</ul>
</details></li>
<li class="toctree-l1"><a class="reference internal" href="../release-notes/index.html">Volto Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../release-management-notes/index.html">Release management notes</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../conceptual-guides/index.html">Conceptual guides</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../conceptual-guides/add-ons.html">Volto add-on concepts</a></li>
</ul>
</details></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/plone/volto" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/plone/volto/edit/main/docs/upgrade-guide/index.md" target="_blank"
   class="btn btn-sm btn-source-edit-button dropdown-item"
   title="Suggest edit"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-pencil-alt"></i>
  </span>
<span class="btn__text-container">Suggest edit</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/plone/volto/issues/new?title=Issue%20on%20page%20%2Fupgrade-guide/index.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../_sources/upgrade-guide/index.md" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.md</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm pst-navbar-icon search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Upgrade Guide</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#upgrading-to-volto-18-x-x">Upgrading to Volto 18.x.x</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#cookieplone-is-now-the-recommended-project-and-add-on-generator-for-volto-18">Cookieplone is now the recommended project and add-on generator for Volto 18</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#node-js-version-support-adding-22-dropping-18">Node.js version support: adding 22, dropping 18</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#volto-s-internal-dependencies-and-devdependencies-are-now-properly-sorted-out">Volto's internal <code class="docutils literal notranslate"><span class="pre">dependencies</span></code> and <code class="docutils literal notranslate"><span class="pre">devDependencies</span></code> are now properly sorted out</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#new-dependencies-synchronizer">New dependencies synchronizer</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#volto-runs-now-on-react-18-2-0">Volto runs now on React 18.2.0</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#draftjs-dependency-and-text-table-and-hero-blocks-removed"><code class="docutils literal notranslate"><span class="pre">draftJS</span></code> dependency and <code class="docutils literal notranslate"><span class="pre">text</span></code>, <code class="docutils literal notranslate"><span class="pre">table</span></code>, and <code class="docutils literal notranslate"><span class="pre">hero</span></code> blocks removed</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#react-portal-dependency-removed"><code class="docutils literal notranslate"><span class="pre">react-portal</span></code> dependency removed</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#plone-registry-moved-to-esm"><code class="docutils literal notranslate"><span class="pre">@plone/registry</span></code> moved to ESM</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#upgraded-slate-libraries">Upgraded Slate libraries</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#remove-the-disabled-property-from-fields-in-the-source-content-in-babel-view">Remove the disabled property from fields in the source content in babel view</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#volto-slate-cypress-helpers-moved-to-its-own-module"><code class="docutils literal notranslate"><span class="pre">volto-slate</span></code> Cypress helpers moved to its own module</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#storybook-8">Storybook 8</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#form-component-passes-down-id-of-the-current-fieldset">Form component passes down <code class="docutils literal notranslate"><span class="pre">id</span></code> of the current fieldset</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#changes-from-the-original-slots-feature">Changes from the original slots feature</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#improve-container-detection">Improve container detection</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#new-naming-convention-for-makefile-commands">New naming convention for <code class="docutils literal notranslate"><span class="pre">Makefile</span></code> commands</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#new-image-upload-widget-component">New image upload widget component</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#renamed-the-constants-languages-module">Renamed the <code class="docutils literal notranslate"><span class="pre">constants/Languages</span></code> module</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#renamed-test-setup-config-module">Renamed <code class="docutils literal notranslate"><span class="pre">test-setup-config</span></code> module</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#removed-react-share-library-and-socialsharing-component">Removed <code class="docutils literal notranslate"><span class="pre">react-share</span></code> library and <code class="docutils literal notranslate"><span class="pre">SocialSharing</span></code> component</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#refactor-of-formvalidation-module">Refactor of <code class="docutils literal notranslate"><span class="pre">FormValidation</span></code> module</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#field-validation-for-blocks">Field validation for blocks</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#schemawidget-widget-registration-change"><code class="docutils literal notranslate"><span class="pre">SchemaWidget</span></code> widget registration change</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#tags-in-slot">Tags in slot</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#table-of-contents-block-markup-change">Table of Contents block markup change</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#update-needed-to-project-boilerplate-generated-with-plone-generator-volto">Update needed to project boilerplate generated with <code class="docutils literal notranslate"><span class="pre">@plone/generator-volto</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#added-rule-for-eslint-to-detect-missing-key-property-in-iterators">Added rule for ESlint to detect missing key property in iterators.</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#add-missing-overrides-to-projects-in-package-json">Add missing overrides to projects in <code class="docutils literal notranslate"><span class="pre">package.json</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#deprecation-notices-for-volto-18">Deprecation notices for Volto 18</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#plone-generator-volto"><code class="docutils literal notranslate"><span class="pre">@plone/generator-volto</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#alternative">Alternative</a></li>
</ul>
</li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#volto-project-configurations">Volto project configurations</a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#id1">Alternative</a></li>
</ul>
</li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#semantic-ui">Semantic UI</a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#alternatives">Alternatives</a></li>
</ul>
</li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#lodash-library"><code class="docutils literal notranslate"><span class="pre">lodash</span></code> library</a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#id2">Alternatives</a></li>
</ul>
</li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#loadable-component-and-volto-loadables-framework"><code class="docutils literal notranslate"><span class="pre">@loadable/component</span></code> and Volto <code class="docutils literal notranslate"><span class="pre">Loadables</span></code> framework</a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#id3">Alternatives</a></li>
</ul>
</li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#removal-of-barrel-import-files">Removal of barrel import files</a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#id4">Alternative</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#upgrading-to-volto-17-x-x">Upgrading to Volto 17.x.x</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#ending-support-for-node-js-14-and-16">Ending support for Node.js 14 and 16</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#webpack-5">Webpack 5</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#razzle-upgraded-to-version-4-2-18">Razzle upgraded to version <code class="docutils literal notranslate"><span class="pre">4.2.18</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#upgraded-linters-eslint-prettier-and-stylelint">Upgraded linters, ESlint, Prettier and Stylelint</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#typescript-support-in-volto">TypeScript support in Volto</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#upgrade-eslint-and-use-babel-eslint-parser">Upgrade ESlint and use <code class="docutils literal notranslate"><span class="pre">@babel/eslint-parser</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#blockchooser-component-now-uses-popperjs-internally"><code class="docutils literal notranslate"><span class="pre">BlockChooser</span></code> component now uses <code class="docutils literal notranslate"><span class="pre">popperjs</span></code> internally</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#removed-hamburgers-library">Removed <code class="docutils literal notranslate"><span class="pre">hamburgers</span></code> library</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#fixed-i18n-script-by-taking-into-account-the-real-add-on-order">Fixed i18n script by taking into account the real add-on order</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#use-proper-heading-tag-depending-on-the-headline-in-default-listing-template">Use proper heading tag (depending on the headline) in default listing template</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#use-apiexpanders-to-improve-performance">Use <code class="docutils literal notranslate"><span class="pre">apiExpanders</span></code> to improve performance</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#cypress-upgraded-to-13-1-0">Cypress upgraded to 13.1.0</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#new-image-component">New Image component</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#removed-teaser-block-utils">Removed Teaser block utils</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#grid-block-migration-from-kitconcept-volto-blocks-grid">Grid block migration from <code class="docutils literal notranslate"><span class="pre">@kitconcept/volto-blocks-grid</span></code></a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#upgrading-to-volto-16-x-x">Upgrading to Volto 16.x.x</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#volto-slate-is-now-in-core"><code class="docutils literal notranslate"><span class="pre">volto-slate</span></code> is now in core</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#new-projects">New projects</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#existing-projects-already-using-volto-slate-add-on">Existing projects, already using <code class="docutils literal notranslate"><span class="pre">volto-slate</span></code> add-on</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#existing-projects-using-core-draftjs-opting-to-continue-using-draftjs">Existing projects using core <code class="docutils literal notranslate"><span class="pre">draftJS</span></code>, opting to continue using <code class="docutils literal notranslate"><span class="pre">draftJS</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#existing-projects-using-core-draftjs-opting-to-start-using-slate-without-migrating-possible-but-not-recommended">Existing projects using core <code class="docutils literal notranslate"><span class="pre">draftJS</span></code>, opting to start using <code class="docutils literal notranslate"><span class="pre">slate</span></code> without migrating (possible, but not recommended)</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#id5">Existing projects using core <code class="docutils literal notranslate"><span class="pre">draftJS</span></code>, opting to migrate to <code class="docutils literal notranslate"><span class="pre">slate</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#deprecating-node-js-12">Deprecating Node.js 12</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#upgraded-to-razzle-4">Upgraded to Razzle 4</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#steps-after-upgrade">Steps after upgrade</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#upgrade-and-update-add-ons-dependency-on-plone-scripts">Upgrade and update add-ons dependency on <code class="docutils literal notranslate"><span class="pre">@plone/scripts</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#jest-is-downgraded-from-version-27-to-26">Jest is downgraded from version 27 to 26</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#upgrade-to-use-yarn-3">Upgrade to use yarn 3</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#removed-date-fns-from-build">Removed <code class="docutils literal notranslate"><span class="pre">date-fns</span></code> from build</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#upgraded-core-to-use-cypress-11">Upgraded core to use Cypress 11</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#the-complete-configuration-registry-is-passed-to-the-add-ons-and-the-project-configuration-pipeline">The complete configuration registry is passed to the add-ons and the project configuration pipeline</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#refactor-the-component-registry-api-in-the-configuration-registry">Refactor the component registry API in the configuration registry</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#renamed-registry-resolve-to-registry-getcomponent">Renamed <code class="docutils literal notranslate"><span class="pre">registry.resolve</span></code> to <code class="docutils literal notranslate"><span class="pre">registry.getComponent</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#registry-getcomponent-signature-changes"><code class="docutils literal notranslate"><span class="pre">registry.getComponent</span></code> signature changes</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#main-workflow-change-menu-changed-from-pastanaga-ui-simplification-to-classic-ui-plone-implementation">Main workflow change menu changed from Pastanaga UI simplification to Classic UI Plone implementation</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#move-layout-constants-to-config-views-layoutviewsnamesmapping">Move Layout constants to <code class="docutils literal notranslate"><span class="pre">config.views.layoutViewsNamesMapping</span></code>.</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#react-window-is-no-longer-a-volto-dependency"><code class="docutils literal notranslate"><span class="pre">react-window</span></code> is no longer a Volto dependency</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#change-the-way-the-style-wrapper-is-enabled-and-how-to-add-the-styles-field">Change the way the style wrapper is enabled and how to add the <code class="docutils literal notranslate"><span class="pre">styles</span></code> field</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#sentry-integration-moved-from-volto-core-to-add-on">Sentry integration moved from Volto core to add-on</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#upgrade-husky-to-latest-version">Upgrade <code class="docutils literal notranslate"><span class="pre">husky</span></code> to latest version</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#better-defaults-handling">Better defaults handling</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#upgrading-to-volto-15-x-x">Upgrading to Volto 15.x.x</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#updated-react-cookie-library">Updated react-cookie library</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#update-your-rich-text-editor-configuration">Update your Rich Text Editor configuration</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#language-switcher-no-longer-takes-care-of-the-sync-of-the-language">Language Switcher no longer takes care of the sync of the language</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#linkview-component-markup-change">LinkView component markup change</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#rename-core-sandbox-fixture-to-coresandbox">Rename core-sandbox fixture to coresandbox</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#extend-the-original-intent-and-rename-razzle-testing-addons-to-addons">Extend the original intent and rename <code class="docutils literal notranslate"><span class="pre">RAZZLE_TESTING_ADDONS</span></code> to <code class="docutils literal notranslate"><span class="pre">ADDONS</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#remove-and-deprecate-lang-cookie">Remove and deprecate <code class="docutils literal notranslate"><span class="pre">lang</span></code> cookie</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#use-root-alias-instead-of">Use <code class="docutils literal notranslate"><span class="pre">@root</span></code> alias instead of <code class="docutils literal notranslate"><span class="pre">~</span></code></a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#upgrading-to-volto-14-x-x">Upgrading to Volto 14.x.x</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#revisited-rethought-and-refactored-seamless-mode">Revisited, rethought and refactored seamless mode</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#update-i18n-configuration-for-projects-and-add-ons">Update i18n configuration for projects and add-ons</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#projects">Projects</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#add-ons">Add-ons</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#removal-of-the-old-configuration-system-based-on-imports">Removal of the old configuration system based on imports</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#content-locking">Content locking</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#blocks-chooser-now-uses-the-title-instead-of-the-id-of-the-block-as-translation-source">Blocks chooser now uses the title instead of the id of the block as translation source</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#variation-field-now-uses-the-title-instead-of-the-id-of-the-variation-as-translation-source">Variation field now uses the title instead of the id of the variation as translation source</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#listing-block-no-longer-retrieve-fullobjects-by-default">Listing block no longer retrieve fullobjects by default</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#new-mobile-navigation-menu">New mobile navigation menu</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#adjusted-main-logo-component-styling">Adjusted main Logo component styling</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#move-theme-js-import-to-top-of-the-client-code">Move <code class="docutils literal notranslate"><span class="pre">theme.js</span></code> import to top of the client code</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#getvocabulary-action-changed-its-signature"><code class="docutils literal notranslate"><span class="pre">getVocabulary</span></code> action changed its signature</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#upgrading-to-volto-13-x-x">Upgrading to Volto 13.x.x</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#deprecating-node-js-10">Deprecating Node.js 10</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#seamless-mode-is-the-default-in-development-mode">Seamless mode is the default in development mode</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#refactored-listing-block-using-schemas-and-objectwidget">Refactored Listing block using schemas and ObjectWidget</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#migrate-your-existing-listing-blocks">Migrate your existing listing blocks</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#update-your-custom-variations-templates-in-your-project-listing-blocks">Update your custom variations (templates) in your project listing blocks</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#control-panel-icons-are-now-svg-based-instead-of-font-based">Control panel icons are now SVG based instead of font based</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#login-form-ui-and-accessibility-updated">Login form UI and accessibility updated</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#changes-in-the-table-block-feature-set-and-messages">Changes in the Table block feature set and messages</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#upgrading-to-volto-12-x-x">Upgrading to Volto 12.x.x</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#volto-configuration-registry">Volto configuration registry</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#changes-in-your-code-and-local-customizations">Changes in your code (and local customizations)</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#changes-in-your-project-s-routes-module">Changes in your project's <code class="docutils literal notranslate"><span class="pre">routes</span></code> module</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#changes-in-your-project-s-config-module">Changes in your project's <code class="docutils literal notranslate"><span class="pre">config</span></code> module</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#changes-in-your-project-s-package-json">Changes in your project's <code class="docutils literal notranslate"><span class="pre">package.json</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#changes-in-snapshots-tests-in-your-project">Changes in snapshots tests in your project</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#alternative-both-configurations-coexisting">Alternative - both configurations coexisting</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#upgrading-to-volto-11-x-x">Upgrading to Volto 11.x.x</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#alignblock-component-new-placement-and-import-path">AlignBlock component new placement and import path</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id-is-removed-from-formfieldwrapper">id is removed from FormFieldWrapper</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#new-default-listing-template">New Default Listing Template</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#upgrading-to-volto-10-x-x">Upgrading to Volto 10.x.x</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#remove-the-razzle-plugins-patch">Remove the Razzle plugins patch</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#getcontent-changes">getContent changes</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#testing-library-react-upgrade-notice"><code class="docutils literal notranslate"><span class="pre">@testing-library/react</span></code> upgrade notice</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#upgrading-to-volto-9-x-x">Upgrading to Volto 9.x.x</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#internal-upgrade-to-use-razzle-3-3-7">Internal upgrade to use Razzle 3.3.7</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#changes-involved">Changes involved</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#babel-config-housekeeping">Babel config housekeeping</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#hoisting-problems-on-some-setups">Hoisting problems on some setups</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#recommended-browserslist-in-package-json">Recommended <code class="docutils literal notranslate"><span class="pre">browserslist</span></code> in <code class="docutils literal notranslate"><span class="pre">package.json</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#new-webpack-resolver-plugin">New webpack resolver plugin</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#content-types-icons">Content Types icons</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#upgrading-to-volto-8-x-x">Upgrading to Volto 8.x.x</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#upgrade-package-json-testing-configuration">Upgrade package.json testing configuration</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#upgrading-to-volto-7-x-x">Upgrading to Volto 7.x.x</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#new-webpack-resolve-alias-for-volto-themes">New webpack resolve alias for Volto themes</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#upgrading-to-volto-6-x-x">Upgrading to Volto 6.x.x</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#upgrade-to-node-js-12">Upgrade to Node.js 12</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#new-razzle-version-and-related-development-dependencies">New Razzle version and related development dependencies</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#upgrade-local-dependencies-versions">Upgrade local dependencies versions</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#update-package-json-config">Update <code class="docutils literal notranslate"><span class="pre">package.json</span></code> config</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#prettier">Prettier</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#stylelint">Stylelint</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#css-modules-are-not-supported-anymore">CSS modules are not supported anymore</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#update-your-eslint-config">Update your eslint config</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#new-wrappers-in-block-editor">New wrappers in block editor</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#update-config-js">Update <code class="docutils literal notranslate"><span class="pre">config.js</span></code></a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#upgrading-to-volto-5-x-x">Upgrading to Volto 5.x.x</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#new-lazy-loading-boilerplate">New lazy loading boilerplate</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#testing-lazy-loaded-components">Testing lazy loaded components</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#helmet-title-it-s-now-centralized-in-view-jsx">Helmet title it's now centralized in <code class="docutils literal notranslate"><span class="pre">View.jsx</span></code></a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#upgrading-to-volto-4-x-x">Upgrading to Volto 4.x.x</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#new-initial-blocks-per-content-type-setting-in-alpha-37">New initial blocks per content type setting in Alpha 37</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#imagesidebar-moved-to-image-block-directory-in-alpha-29">ImageSidebar moved to Image Block directory in Alpha 29</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#copy-yarn-lock-from-volto-starter-kit-in-alpha-17">Copy <code class="docutils literal notranslate"><span class="pre">yarn.lock</span></code> from <code class="docutils literal notranslate"><span class="pre">volto-starter-kit</span></code> in Alpha 17</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#forked-helmet-into-volto-core">Forked Helmet into Volto core</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#alpha-16-is-a-brownbag-release">Alpha 16 is a brownbag release</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#stylelint-and-prettier-config-in-alpha-14">Stylelint and prettier config in Alpha 14</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#openobjectbrowser-api-change-in-alpha-11">openObjectBrowser API change in Alpha 11</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#renaming-tiles-into-blocks">Renaming Tiles into Blocks</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#add-theme-customization-to-your-project">Add theme customization to your project</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#remove-enzyme-configuration">Remove enzyme configuration</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#blocks-engine-blocks-configuration-object">Blocks engine - Blocks configuration object</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#blocks-engine-simplification-of-the-edit-blocks-wrapper">Blocks engine - Simplification of the edit blocks wrapper</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#default-view-renaming">Default view renaming</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#deprecations">Deprecations</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#upgrading-to-volto-3-x">Upgrading to Volto 3.x</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#upgrading-to-volto-2-x">Upgrading to Volto 2.x</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#improved-blocks-hoc">Improved Blocks HOC</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#reordering-of-the-internal-css-added-extra-files">Reordering of the internal CSS, added extra files</a></li>
</ul>
</li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="upgrade-guide">
<span id="volto-upgrade-guide"></span><h1>Upgrade Guide<a class="headerlink" href="#upgrade-guide" title="Link to this heading">#</a></h1>
<p>This upgrade guide lists all breaking changes in Volto and explains the steps that are necessary to upgrade to the latest version.
Volto uses Semantic Versioning.
For more information see <a class="reference internal" href="../contributing/version-policy.html"><span class="doc">Version policy</span></a>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><a class="reference external" href="https://github.com/plone/cookieplone">Cookieplone</a> is the official project generator for Plone.
We keep Cookieplone up to date and in sync with the current Volto release.</p>
<p>To make it easier for you to maintain your projects, you should keep all your code inside your project add-ons.
If you do so, when you want to upgrade your project, you can generate a new project using Cookieplone with the same name as your old one, and copy over your add-ons to the new project.
It is usually better and quicker to move your items into new locations and copy your dependencies than dealing with following the upgrade steps, regardless of whether you have modified the boilerplate.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#upgrade-18-cookieplone-label"><span class="std std-ref">Cookieplone is now the recommended project and add-on generator for Volto 18</span></a></p>
</div>
</div>
<section id="upgrading-to-volto-18-x-x">
<span id="volto-upgrade-guide-18-x-x"></span><h2>Upgrading to Volto 18.x.x<a class="headerlink" href="#upgrading-to-volto-18-x-x" title="Link to this heading">#</a></h2>
<section id="cookieplone-is-now-the-recommended-project-and-add-on-generator-for-volto-18">
<span id="upgrade-18-cookieplone-label"></span><h3>Cookieplone is now the recommended project and add-on generator for Volto 18<a class="headerlink" href="#cookieplone-is-now-the-recommended-project-and-add-on-generator-for-volto-18" title="Link to this heading">#</a></h3>
<div class="versionadded">
<p><span class="versionmodified added">Added in version Volto: </span>18.0.0-alpha.43</p>
</div>
<p><a class="reference external" href="https://github.com/plone/cookieplone">Cookieplone</a> is now the recommended way to develop Volto projects, using it as a boilerplate project generator.
Cookieplone uses the frontend code installed using <code class="docutils literal notranslate"><span class="pre">pnpm</span></code> instead of <code class="docutils literal notranslate"><span class="pre">yarn</span></code>.
This affects the way that the Plone Release Team generates the Sponsored OSS Docker images, since they must be compatible with the <code class="docutils literal notranslate"><span class="pre">pnpm</span></code> setup.</p>
<p>Since Volto <code class="docutils literal notranslate"><span class="pre">18.0.0-alpha.43</span></code>, the Docker image <a class="reference external" href="https://hub.docker.com/r/plone/plone-frontend"><code class="docutils literal notranslate"><span class="pre">plone-frontend</span></code></a> uses <code class="docutils literal notranslate"><span class="pre">pnpm</span></code>.</p>
<p>To migrate your projects to the new setup, take the following steps.</p>
<ol class="arabic">
<li><p>From the root of your project, create the new project structure with Cookieplone using the <code class="docutils literal notranslate"><span class="pre">frontend_addon</span></code> template using the following command.</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>pipx<span class="w"> </span>run<span class="w"> </span>cookieplone<span class="w"> </span>frontend_addon
</pre></div>
</div>
</li>
<li><p>Take the contents of the <code class="file docutils literal notranslate"><span class="pre">src</span></code> folder in the old structure, and copy them over to <code class="docutils literal notranslate"><span class="pre">packages/&lt;your-addon-name&gt;/src/</span></code>.</p></li>
</ol>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<ul class="simple">
<li><p><a class="reference internal" href="../development/add-ons/create-an-add-on-18.html"><span class="doc">Create an add-on for Volto 18</span></a></p></li>
<li><p><a class="reference external" href="https://github.com/codesyntax/volto-maplibre-block/pull/4">update for Volto 18 codesyntax/volto-maplibre-block#4</a></p></li>
<li><p><a class="reference external" href="https://github.com/codesyntax/volto-countup-block/pull/5">update for volto 18 codesyntax/volto-countup-block#5</a></p></li>
</ul>
</div>
<p>For developers that won't migrate their projects to the new setup with <code class="docutils literal notranslate"><span class="pre">pnpm</span></code> instead of <code class="docutils literal notranslate"><span class="pre">yarn</span></code>, the Release Team will generate a new Docker image named <code class="docutils literal notranslate"><span class="pre">plone-frontend:18-yarn</span></code> for the Volto 18 series of alpha releases.</p>
<p>Support for <code class="docutils literal notranslate"><span class="pre">yarn</span></code> will be dropped in Volto 19.</p>
<div class="deprecated">
<p><span class="versionmodified deprecated">Deprecated since version Volto: </span>18.0.0-alpha.43</p>
<p>The <code class="docutils literal notranslate"><span class="pre">yarn</span></code>-based generator <a class="reference external" href="https://www.npmjs.com/package/&#64;plone/generator-volto"><code class="docutils literal notranslate"><span class="pre">&#64;plone/generator-volto</span></code></a> package and project boilerplates generated from it are deprecated and will not receive any further updates.
The recommended way of generating a boilerplate project is <a class="reference external" href="https://github.com/plone/cookieplone">Cookieplone</a>.
Please update your code to use the <code class="docutils literal notranslate"><span class="pre">pnpm</span></code>-based setup.</p>
</div>
</section>
<section id="node-js-version-support-adding-22-dropping-18">
<h3>Node.js version support: adding 22, dropping 18<a class="headerlink" href="#node-js-version-support-adding-22-dropping-18" title="Link to this heading">#</a></h3>
<p>Added support for Node.js 22.
It is the long-term support (LTS) release effective 2024-10-29.</p>
<p>Long-term support for <a class="reference external" href="https://6.docs.plone.org/glossary.html#term-Node.js" title="(in Plone Documentation v6)"><span class="xref std std-term">Node.js</span></a> 18 by the Node.js community will end on 2025-04-30.
Volto 18 no longer supports Node.js 18, since Volto only supports the latest two LTS versions.
Volto might continue to work on Node.js 18, but it is not tested in CI.</p>
<p>Please update your projects to a supported Node.js version, either 20 or 22.
Version 22 is recommended, as the latest LTS version of Node.js.</p>
</section>
<section id="volto-s-internal-dependencies-and-devdependencies-are-now-properly-sorted-out">
<h3>Volto's internal <code class="docutils literal notranslate"><span class="pre">dependencies</span></code> and <code class="docutils literal notranslate"><span class="pre">devDependencies</span></code> are now properly sorted out<a class="headerlink" href="#volto-s-internal-dependencies-and-devdependencies-are-now-properly-sorted-out" title="Link to this heading">#</a></h3>
<div class="deprecated">
<p><span class="versionmodified deprecated">Deprecated since version Volto: </span>18.0.0-alpha.43</p>
<p>This step is only valid for projects that continue to use the <code class="docutils literal notranslate"><span class="pre">yarn</span></code>-based generator and haven't updated to Cookieplone <code class="docutils literal notranslate"><span class="pre">pnpm</span></code>-based setups.
See <a class="reference internal" href="#upgrade-18-cookieplone-label"><span class="std std-ref">Cookieplone is now the recommended project and add-on generator for Volto 18</span></a> for details.</p>
</div>
<p>Volto internal <code class="docutils literal notranslate"><span class="pre">dependencies</span></code> and <code class="docutils literal notranslate"><span class="pre">devDependencies</span></code> have been correctly sorted out.
This means that Volto no longer will force <code class="docutils literal notranslate"><span class="pre">devDependencies</span></code> as <code class="docutils literal notranslate"><span class="pre">dependencies</span></code> just to make sure that they get installed in Volto projects.
This provoked undesired hoisting problems, and forced the build to not behave correctly in some situations.
This also aligns with the best practices in the JavaScript world, and will make the packagers work better.</p>
<p>This change means that your projects will now have to declare all their dependencies.
For this purpose, we have developed a <a class="reference internal" href="#upgrade-guide-new-dependencies-synchronizer-label"><span class="std std-ref">new utility</span></a> that synchronizes the <code class="docutils literal notranslate"><span class="pre">dependencies</span></code> and <code class="docutils literal notranslate"><span class="pre">devDependencies</span></code> of your projects with those in Volto core.
It is mandatory that you run the utility to make Volto version 18.0.0-alpha.21 or later work in your projects.
This opens the door to use <a class="reference external" href="https://6.docs.plone.org/glossary.html#term-pnpm" title="(in Plone Documentation v6)"><span class="xref std std-term">pnpm</span></a> in projects, too, and other goodies.</p>
<div class="versionremoved">
<p><span class="versionmodified removed">Removed in version Volto: </span>18.0.0-alpha.33</p>
<p>The setting <code class="docutils literal notranslate"><span class="pre">config.settings.serverConfig.extractScripts.errorPages</span></code> has been removed.</p>
</div>
<p>Now scripts are added to error pages, regardless of whether they are in production mode.
This setting is no longer necessary.</p>
</section>
<section id="new-dependencies-synchronizer">
<span id="upgrade-guide-new-dependencies-synchronizer-label"></span><h3>New dependencies synchronizer<a class="headerlink" href="#new-dependencies-synchronizer" title="Link to this heading">#</a></h3>
<div class="deprecated">
<p><span class="versionmodified deprecated">Deprecated since version Volto: </span>18.0.0-alpha.43</p>
<p>This step is only valid for projects that continue to use the <code class="docutils literal notranslate"><span class="pre">yarn</span></code>-based generator and haven't updated to Cookieplone <code class="docutils literal notranslate"><span class="pre">pnpm</span></code>-based setups.
See <a class="reference internal" href="#upgrade-18-cookieplone-label"><span class="std std-ref">Cookieplone is now the recommended project and add-on generator for Volto 18</span></a> for details.</p>
</div>
<div class="versionadded">
<p><span class="versionmodified added">Added in version Volto: </span>18.0.0-alpha.21</p>
</div>
<div class="versionadded">
<p><span class="versionmodified added">Added in version &#64;plone/scripts: </span>3.6.1</p>
</div>
<p>Volto now has a script to ease the upgrades in Volto projects, called <code class="docutils literal notranslate"><span class="pre">volto-update-deps</span></code>.
It's included as part of the <code class="docutils literal notranslate"><span class="pre">&#64;plone/scripts</span></code> package.
This script synchronizes the local dependencies of your project with those in Volto core.
It preserves your dependencies.</p>
<p>To run the procedure, in your project's <code class="docutils literal notranslate"><span class="pre">package.json</span></code>, update the <code class="docutils literal notranslate"><span class="pre">&#64;plone/volto</span></code> version to the one to which you want to upgrade, such as <code class="docutils literal notranslate"><span class="pre">18.0.0-alpha.21</span></code>.
Then update the version of <code class="docutils literal notranslate"><span class="pre">&#64;plone/scripts</span></code> to at least version <code class="docutils literal notranslate"><span class="pre">3.6.1</span></code>.
The following example shows the minimum valid versions to use under the <code class="docutils literal notranslate"><span class="pre">dependencies</span></code> key.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="nt">&quot;dependencies&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;@plone/volto&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;18.0.0-alpha.21&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;@plone/scripts&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;^3.6.1&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Then run <code class="docutils literal notranslate"><span class="pre">yarn</span></code> in your project to update the packages.</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>yarn
</pre></div>
</div>
<p>After this, the <code class="docutils literal notranslate"><span class="pre">volto-update-deps</span></code> script will be available in your environment.
Now you can run the script to synchronize dependencies:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>yarn<span class="w"> </span>volto-update-deps
</pre></div>
</div>
<p>It should synchronize the versions in your project's <code class="docutils literal notranslate"><span class="pre">dependencies</span></code> and <code class="docutils literal notranslate"><span class="pre">devDependencies</span></code> with those in Volto core.
It will add the missing ones, and update the current ones.
It will preserve the existing ones.
It is recommended that you check the resultant changes to assess that everything is fine.
Run yarn again to update the versions.</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>yarn
</pre></div>
</div>
<p>Verify that your project works well by running the development server.</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>yarn<span class="w"> </span>start
</pre></div>
</div>
</section>
<section id="volto-runs-now-on-react-18-2-0">
<h3>Volto runs now on React 18.2.0<a class="headerlink" href="#volto-runs-now-on-react-18-2-0" title="Link to this heading">#</a></h3>
<p>We have updated Volto to use React 18.
This has been the latest published stable version since June 2022.
This aligns Volto with the latests developments in the React ecosystem and opens the door to up to date software and React features, like client side <code class="docutils literal notranslate"><span class="pre">Suspense</span></code> and others:</p>
<ul class="simple">
<li><p>Concurrent rendering in client (Suspense)</p></li>
<li><p>Automatic batching updates</p></li>
<li><p>Transitions</p></li>
<li><p>New hooks <code class="docutils literal notranslate"><span class="pre">useId</span></code>, <code class="docutils literal notranslate"><span class="pre">useTransition</span></code>, <code class="docutils literal notranslate"><span class="pre">useDeferredValue</span></code>, <code class="docutils literal notranslate"><span class="pre">useSyncExternalStore</span></code>, and other hooks</p></li>
</ul>
</section>
<section id="draftjs-dependency-and-text-table-and-hero-blocks-removed">
<h3><code class="docutils literal notranslate"><span class="pre">draftJS</span></code> dependency and <code class="docutils literal notranslate"><span class="pre">text</span></code>, <code class="docutils literal notranslate"><span class="pre">table</span></code>, and <code class="docutils literal notranslate"><span class="pre">hero</span></code> blocks removed<a class="headerlink" href="#draftjs-dependency-and-text-table-and-hero-blocks-removed" title="Link to this heading">#</a></h3>
<p>In Volto 16, the <code class="docutils literal notranslate"><span class="pre">text</span></code> block powered by the <code class="docutils literal notranslate"><span class="pre">Draft.js</span></code> library was deprecated, and it was announced that it would be removed in Volto 18.
Two other blocks, <code class="docutils literal notranslate"><span class="pre">table</span></code> and <code class="docutils literal notranslate"><span class="pre">hero</span></code>, that depended on <code class="docutils literal notranslate"><span class="pre">Draft.js</span></code> were also removed.</p>
<p>If you still need these blocks in your site, you can copy over the block code and settings into your project.
You can also migrate these blocks to use either <code class="docutils literal notranslate"><span class="pre">slate</span></code> or <code class="docutils literal notranslate"><span class="pre">slateTable</span></code> blocks.
The <code class="docutils literal notranslate"><span class="pre">hero</span></code> block can be replaced by the <code class="docutils literal notranslate"><span class="pre">teaser</span></code> block, but a migration is also needed.
See <a class="reference internal" href="#existing-projects-using-core-draftjs-opting-to-migrate-to-slate"><span class="std std-ref">Existing projects using core draftJS, opting to continue using draftJS</span></a>.</p>
</section>
<section id="react-portal-dependency-removed">
<h3><code class="docutils literal notranslate"><span class="pre">react-portal</span></code> dependency removed<a class="headerlink" href="#react-portal-dependency-removed" title="Link to this heading">#</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">react-portal</span></code> is deprecated and it was removed from Volto.
The Volto code that relied on it was mainly CMS UI components.
If your project relies on it, either in your code or the shadowed components you may have, you should update to use the standard React API, <code class="docutils literal notranslate"><span class="pre">createPortal</span></code>.
You can update your shadows taking the modified components as templates.
As a last resort, you can install <code class="docutils literal notranslate"><span class="pre">react-portal</span></code> as a dependency of your project.
However, this is discouraged, because the React 18 rendering could have unexpected side effects.
It is recommended that you use the React API instead.</p>
</section>
<section id="plone-registry-moved-to-esm">
<h3><code class="docutils literal notranslate"><span class="pre">&#64;plone/registry</span></code> moved to ESM<a class="headerlink" href="#plone-registry-moved-to-esm" title="Link to this heading">#</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">&#64;plone/registry</span></code> and <a class="reference external" href="https://github.com/plone/volto/tree/main/packages">other packages on which Volto depends</a> are now stand-alone releases in the monorepo structure released in 18.0.0-alpha.4.</p>
<p>Also, the <code class="docutils literal notranslate"><span class="pre">&#64;plone/registry</span></code> package has been moved to ESM.
The add-on registry scripts have also been refactored to TypeScript.
For maximum compatibility with CommonJS builds, the default exports have been moved to named exports.
The modules affected are now built, and the import paths have changed, too.
These changes force some import path changes that you should patch in your Plone project or add-on boilerplates.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>As always, when something changes in the boilerplate project generator, you may generate a new project with Cookieplone and move your code into it, instead of manually editing multiple files.
See <a class="reference internal" href="#upgrade-18-cookieplone-label"><span class="std std-ref">Cookieplone is now the recommended project and add-on generator for Volto 18</span></a> for details.</p>
</div>
<p>For example, in your project's <code class="file docutils literal notranslate"><span class="pre">.eslintrc.js</span></code>:</p>
<div class="highlight-diff notranslate"><div class="highlight"><pre><span></span><span class="w"> </span>const fs = require(&#39;fs&#39;);
<span class="w"> </span>const projectRootPath = __dirname;
<span class="gd">-const AddonConfigurationRegistry = require(&#39;@plone/registry/src/addon-registry&#39;);</span>
<span class="gi">+const { AddonRegistry } = require(&#39;@plone/registry/addon-registry&#39;);</span>

<span class="w"> </span>let voltoPath = &#39;./node_modules/@plone/volto&#39;;

<span class="gu">@@ -17,15 +17,15 @@ if (configFile) {</span>
<span class="w"> </span>    voltoPath = `./${jsConfig.baseUrl}/${pathsConfig[&#39;@plone/volto&#39;][0]}`;
<span class="w"> </span>}

<span class="gd">-const reg = new AddonConfigurationRegistry(__dirname);</span>
<span class="gi">+const { registry } = AddonRegistry.init(__dirname);</span>

<span class="w"> </span>// Extends ESlint configuration for adding the aliases to `src` directories in Volto addons
<span class="gd">-const addonAliases = Object.keys(reg.packages).map((o) =&gt; [</span>
<span class="gi">+const addonAliases = Object.keys(registry.packages).map((o) =&gt; [</span>
<span class="w"> </span>  o,
<span class="gd">-  reg.packages[o].modulePath,</span>
<span class="gi">+  registry.packages[o].modulePath,</span>
<span class="w"> </span>]);

<span class="gd">-const addonExtenders = reg.getEslintExtenders().map((m) =&gt; require(m));</span>
<span class="gi">+const addonExtenders = registry.getEslintExtenders().map((m) =&gt; require(m));</span>

<span class="w"> </span>      alias: {
<span class="w"> </span>        map: [
<span class="w"> </span>          [&#39;@plone/volto&#39;, &#39;@plone/volto/src&#39;],
<span class="gd">-          [&#39;@plone/volto-slate&#39;, &#39;@plone/volto/packages/volto-slate/src&#39;],</span>
<span class="gd">-          [&#39;@plone/registry&#39;, &#39;@plone/volto/packages/registry/src&#39;],</span>
<span class="gd">-          [&#39;@plone/types&#39;, &#39;@plone/volto/packages/types&#39;],</span>
<span class="gi">+          [&#39;@plone/volto-slate&#39;, &#39;@plone/volto-slate/src&#39;],</span>
<span class="w"> </span>          ...addonAliases,
<span class="w"> </span>          [&#39;@package&#39;, `${__dirname}/src`],
</pre></div>
</div>
<p>Also in the Storybook configuration <code class="file docutils literal notranslate"><span class="pre">.storybook/main.js</span></code>.</p>
<div class="highlight-diff notranslate"><div class="highlight"><pre><span></span><span class="gd">-    const AddonConfigurationRegistry = require(&#39;@plone/registry/src/addon-registry&#39;);</span>
<span class="gi">+    const { AddonRegistry } = require(&#39;@plone/registry/addon-registry&#39;);</span>

<span class="gd">-    const registry = new AddonConfigurationRegistry(projectRootPath);</span>
<span class="gi">+    const { registry } = AddonRegistry.init(projectRootPath);</span>
</pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified added">Added in version Volto: </span>18.0.0-alpha.47</p>
</div>
<div class="versionadded">
<p><span class="versionmodified added">Added in version &#64;plone/registry: </span>3.0.0-alpha.0</p>
</div>
</section>
<section id="upgraded-slate-libraries">
<h3>Upgraded Slate libraries<a class="headerlink" href="#upgraded-slate-libraries" title="Link to this heading">#</a></h3>
<p>The support libraries for Slate integration have been upgraded, mainly for bug fixes.
This is a breaking change.
The deprecated prop <code class="docutils literal notranslate"><span class="pre">value</span></code> in the main editor component setting is no longer supported, and has been replaced by <code class="docutils literal notranslate"><span class="pre">initialValue</span></code>.</p>
<p>If you use this component in your add-ons or projects directly, you need to replace the name of the prop.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>In your add-ons and projects, we advise you to always use the public components provided by Volto, instead of directly using the support libraries packaged in Volto.</p>
</div>
</section>
<section id="remove-the-disabled-property-from-fields-in-the-source-content-in-babel-view">
<h3>Remove the disabled property from fields in the source content in babel view<a class="headerlink" href="#remove-the-disabled-property-from-fields-in-the-source-content-in-babel-view" title="Link to this heading">#</a></h3>
<p>This change improves UX of the Babel view (translation form) since a disabled field cannot be selected to be copied over.</p>
</section>
<section id="volto-slate-cypress-helpers-moved-to-its-own-module">
<h3><code class="docutils literal notranslate"><span class="pre">volto-slate</span></code> Cypress helpers moved to its own module<a class="headerlink" href="#volto-slate-cypress-helpers-moved-to-its-own-module" title="Link to this heading">#</a></h3>
<p>There were some Cypress helpers for <code class="docutils literal notranslate"><span class="pre">volto-slate</span></code> along with the other definitions of Cypress commands.
The Cypress command definitions are intended to be loaded only once, whereas the helpers can be imported any number of times.
Therefore, we moved the helpers to its own module:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">slateBeforeEach</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@plone/volto/cypress/support/commands&#39;</span><span class="p">;</span>
</pre></div>
</div>
<p>becomes:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">slateBeforeEach</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@plone/volto/cypress/support/helpers&#39;</span><span class="p">;</span>
</pre></div>
</div>
</section>
<section id="storybook-8">
<h3>Storybook 8<a class="headerlink" href="#storybook-8" title="Link to this heading">#</a></h3>
<p>Storybook was upgraded from version 6 to 8 in core and in the project generator.
This section is relevant if you have Storybook stories in your project or add-on.
The versions will be upgraded automatically using the <code class="docutils literal notranslate"><span class="pre">volto-update-deps</span></code> script.
The configuration of your project must also be updated with the new one.
Replace the <code class="docutils literal notranslate"><span class="pre">.storybook</span></code> folder in your project with this one:</p>
<p><a class="github reference external" href="https://github.com/plone/volto/tree/5605131868689778bbdca0c3003a40cb9f153c1a/packages/generator-volto/generators/app/templates/.storybook">plone/volto</a></p>
<p>Finally, in your project's or add-on's <code class="file docutils literal notranslate"><span class="pre">package.json</span></code> file, update the <code class="docutils literal notranslate"><span class="pre">scripts</span></code> key with the key/value pairs, as shown in the following diff.</p>
<div class="highlight-diff notranslate"><div class="highlight"><pre><span></span><span class="gd">-    &quot;storybook&quot;: &quot;start-storybook -p 6006&quot;,</span>
<span class="gd">-    &quot;build-storybook&quot;: &quot;build-storybook&quot;</span>
<span class="gi">+    &quot;storybook&quot;: &quot;storybook dev -p 6006&quot;,</span>
<span class="gi">+    &quot;build-storybook&quot;: &quot;storybook build&quot;</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference external" href="https://storybook.js.org/docs/migration-guide/from-older-version">Migration guide from Storybook 6.x to 8.0</a></p>
</div>
<p>If you haven't customized the configuration, the migration is straightforward.
The stories format (CSF) is almost the same.
However, writing stories directly in MDX was removed in Storybook 8.
The <code class="docutils literal notranslate"><span class="pre">.stories.mdx</span></code> extension is no longer supported.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Although it is technically possible to keep the old version running, the script <code class="docutils literal notranslate"><span class="pre">volto-update-deps</span></code> will try to update to Storybook 8 every time you run it.</p>
</div>
</section>
<section id="form-component-passes-down-id-of-the-current-fieldset">
<h3>Form component passes down <code class="docutils literal notranslate"><span class="pre">id</span></code> of the current fieldset<a class="headerlink" href="#form-component-passes-down-id-of-the-current-fieldset" title="Link to this heading">#</a></h3>
<p>There was a bug where a fieldset's generated value would be not valid.
This has been fixed by passing down the <code class="docutils literal notranslate"><span class="pre">id</span></code> instead of the <code class="docutils literal notranslate"><span class="pre">title</span></code> to the fieldset's value.
If your tests rely on the old fieldset's generated value for selecting fields, your tests could break, in which case you should amend them to use the updated fieldset's value instead.</p>
</section>
<section id="changes-from-the-original-slots-feature">
<h3>Changes from the original slots feature<a class="headerlink" href="#changes-from-the-original-slots-feature" title="Link to this heading">#</a></h3>
<p>Now <code class="docutils literal notranslate"><span class="pre">config.getSlots</span></code> in the configuration registry takes the argument <code class="docutils literal notranslate"><span class="pre">location</span></code> instead of <code class="docutils literal notranslate"><span class="pre">pathname</span></code>.
This allows more expressive conditions to fulfill the use case of the <code class="docutils literal notranslate"><span class="pre">Add</span></code> form.</p>
</section>
<section id="improve-container-detection">
<h3>Improve container detection<a class="headerlink" href="#improve-container-detection" title="Link to this heading">#</a></h3>
<p>The mechanism to detect if a block is a container or not has been improved and the config setting <code class="docutils literal notranslate"><span class="pre">config.settings.containerBlockTypes</span></code> is no longer needed, and core won't check for it anymore.</p>
</section>
<section id="new-naming-convention-for-makefile-commands">
<h3>New naming convention for <code class="docutils literal notranslate"><span class="pre">Makefile</span></code> commands<a class="headerlink" href="#new-naming-convention-for-makefile-commands" title="Link to this heading">#</a></h3>
<p>A new naming convention for <code class="docutils literal notranslate"><span class="pre">Makefile</span></code> commands has been implemented in Volto 18.
This convention has been applied to all Volto tools, including the new boilerplate generators that use cookiecutter.
The conventions is as follows:</p>
<ul class="simple">
<li><p>Use kebab-case, where each word is separated by a hyphen.</p></li>
<li><p>Use hierarchical or taxonomic ranking, where the thing being operated upon is defined by <code class="docutils literal notranslate"><span class="pre">[thing]-[subthing]-[subsubthing]</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">[thing]</span></code> may be omitted when it is the project itself.</p></li>
<li><p>The final term is the action to be performed upon the <code class="docutils literal notranslate"><span class="pre">[thing]</span></code>.</p></li>
</ul>
<p>Every Makefile command now has a description.
To view a complete list of Makefile commands with their description, you can issue the following command.</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>make<span class="w"> </span><span class="nb">help</span>
</pre></div>
</div>
<p>The following table lists the old and new Makefile commands and the new commands' description.</p>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head"><p>Command</p></th>
<th class="head"><p>Revised Command</p></th>
<th class="head"><p>Revised Description</p></th>
<th class="head"><p>Comments</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>help</p></td>
<td><p>help</p></td>
<td><p>Show this help</p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p>start</p></td>
<td><p>start</p></td>
<td><p>Starts Volto, allowing reloading of the add-on during development</p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p>start-frontend</p></td>
<td><p></p></td>
<td><p></p></td>
<td><p>Removed</p></td>
</tr>
<tr class="row-odd"><td><p>build</p></td>
<td><p>build</p></td>
<td><p>Build a production bundle for distribution</p></td>
<td><p>Added</p></td>
</tr>
<tr class="row-even"><td><p>build-frontend</p></td>
<td><p></p></td>
<td><p></p></td>
<td><p>Removed</p></td>
</tr>
<tr class="row-odd"><td><p>test</p></td>
<td><p>test</p></td>
<td><p>Run unit tests</p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p>clean</p></td>
<td><p>clean</p></td>
<td><p>Clean development environment</p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p>setup</p></td>
<td><p>install</p></td>
<td><p>Set up development environment</p></td>
<td><p>Renamed to be consistent with the add-on setups</p></td>
</tr>
<tr class="row-even"><td><p>bin/python</p></td>
<td><p>bin/python</p></td>
<td><p>Create a Python virtual environment with the latest pip, and install documentation requirements</p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p>docs-clean</p></td>
<td><p>docs-clean</p></td>
<td><p>Clean current and legacy docs build directories, and Python virtual environment</p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p>docs-news</p></td>
<td><p>docs-news</p></td>
<td><p>Create or update the symlink from docs to volto package</p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p>docs-html</p></td>
<td><p>docs-html</p></td>
<td><p>Build html</p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p>docs-livehtml</p></td>
<td><p>docs-livehtml</p></td>
<td><p>Rebuild Sphinx documentation on changes, with live-reload in the browser</p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p>docs-linkcheck</p></td>
<td><p>docs-linkcheck</p></td>
<td><p>Run linkcheck</p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p>docs-linkcheckbroken</p></td>
<td><p>docs-linkcheckbroken</p></td>
<td><p>Run linkcheck and show only broken links</p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p>docs-vale</p></td>
<td><p>docs-vale</p></td>
<td><p>Install (once) and run Vale style, grammar, and spell checks</p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p>rtd-pr-preview</p></td>
<td><p>docs-rtd-pr-preview</p></td>
<td><p>Build previews of pull requests that have documentation changes on Read the Docs via CI</p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p>docs-test</p></td>
<td><p>docs-test</p></td>
<td><p>Clean docs build, then run linkcheckbroken, vale</p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p>copyreleasenotestodocs</p></td>
<td><p>release-notes-copy-to-docs</p></td>
<td><p>Copy release notes into documentation</p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p>storybook-build</p></td>
<td><p>storybook-build</p></td>
<td><p>Build Storybook</p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p></p></td>
<td><p>storybook-start</p></td>
<td><p>Start Storybook server on port 6006</p></td>
<td><p>Added</p></td>
</tr>
<tr class="row-odd"><td><p>patches</p></td>
<td><p></p></td>
<td><p></p></td>
<td><p>Removed</p></td>
</tr>
<tr class="row-even"><td><p>cypress-install</p></td>
<td><p>cypress-install</p></td>
<td><p>Install Cypress for acceptance tests</p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p>build-deps</p></td>
<td><p>build-deps</p></td>
<td><p>Build dependencies</p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p>corepackagebump</p></td>
<td><p></p></td>
<td><p></p></td>
<td><p>Removed</p></td>
</tr>
<tr class="row-odd"><td><p>start-backend-docker</p></td>
<td><p>backend-docker-start</p></td>
<td><p>Starts a Docker-based backend for development</p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p>start-backend-docker-detached</p></td>
<td><p>backend-docker-detached-start</p></td>
<td><p>Starts a Docker-based backend in detached mode (daemon)</p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p>stop-backend-docker-detached</p></td>
<td><p>backend-docker-detached-stop</p></td>
<td><p>Stops the Docker-based backend in detached mode (daemon)</p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p>start-backend-docker-no-cors</p></td>
<td><p>backend-docker-start-no-cors</p></td>
<td><p>Starts the Docker-based backend without CORS in detached mode (daemon)</p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p>start-frontend-docker</p></td>
<td><p>frontend-docker-start</p></td>
<td><p>Starts a Docker-based frontend for development</p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p>start-backend-docker-guillotina</p></td>
<td><p></p></td>
<td><p></p></td>
<td><p>Removed</p></td>
</tr>
<tr class="row-odd"><td><p>stop-backend-docker-guillotina</p></td>
<td><p></p></td>
<td><p></p></td>
<td><p>Removed</p></td>
</tr>
<tr class="row-even"><td><p>start-test-acceptance-frontend-dev</p></td>
<td><p>acceptance-frontend-dev-start</p></td>
<td><p>Start acceptance frontend in development mode</p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p>test-acceptance-server</p></td>
<td><p>acceptance-backend-start</p></td>
<td><p>Start backend acceptance server</p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p>start-test-acceptance-server</p></td>
<td><p>ci-acceptance-backend-start</p></td>
<td><p>Start backend acceptance server in headless mode for CI</p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p>start-test-acceptance-frontend</p></td>
<td><p>acceptance-frontend-prod-start</p></td>
<td><p>Start acceptance frontend in production mode</p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p>test-acceptance</p></td>
<td><p>acceptance-test</p></td>
<td><p>Start Cypress in interactive mode</p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p>test-acceptance-headless</p></td>
<td><p>ci-acceptance-test</p></td>
<td><p>Run Cypress tests in headless mode for CI</p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p>full-test-acceptance</p></td>
<td><p>ci-acceptance-test-run-all</p></td>
<td><p>With a single command, start both the acceptance frontend and backend acceptance server, and run Cypress tests in headless mode</p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p>start-test-acceptance-frontend-seamless</p></td>
<td><p>deployment-acceptance-frontend-prod-start</p></td>
<td><p>Start acceptance frontend in production mode for deployment</p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p>test-acceptance-seamless</p></td>
<td><p>deployment-acceptance-test</p></td>
<td><p>Start Cypress in interactive mode for tests in deployment</p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p>start-test-acceptance-web-server-seamless</p></td>
<td><p>deployment-acceptance-web-server-start</p></td>
<td><p>Start the reverse proxy (Traefik) on port 80 for deployment</p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p>full-test-acceptance-seamless</p></td>
<td><p>deployment-ci-acceptance-test-run-all</p></td>
<td><p>Run in one command the backend, frontend, and the cypress tests in headless mode for CI for deployment</p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p>start-test-acceptance-frontend-project</p></td>
<td><p>project-acceptance-frontend-prod-start</p></td>
<td><p>Start acceptance frontend in production mode for project tests</p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p>start-test-acceptance-server-coresandbox</p></td>
<td><p>coresandbox-acceptance-backend-start</p></td>
<td><p>Start backend acceptance server for core sandbox tests</p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p>start-test-acceptance-frontend-coresandbox</p></td>
<td><p>coresandbox-acceptance-frontend-prod-start</p></td>
<td><p>Start acceptance frontend in production mode for core sandbox tests</p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p>start-test-acceptance-frontend-coresandbox-dev</p></td>
<td><p>coresandbox-acceptance-frontend-dev-start</p></td>
<td><p>Start acceptance frontend in development mode for core sandbox tests</p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p>test-acceptance-coresandbox</p></td>
<td><p>coresandbox-acceptance-test</p></td>
<td><p>Start Cypress in interactive mode for core sandbox tests</p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p>test-acceptance-coresandbox-headless</p></td>
<td><p>coresandbox-ci-acceptance-test</p></td>
<td><p>Run Cypress tests in headless mode for CI for core sandbox tests</p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p>full-test-acceptance-coresandbox</p></td>
<td><p>coresandbox-ci-acceptance-test-run-all</p></td>
<td><p>With a single command, run the backend, frontend, and the Cypress tests in headless mode for CI for core sandbox tests</p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p>start-test-acceptance-server-multilingual</p></td>
<td><p>multilingual-acceptance-backend-start</p></td>
<td><p>Start backend acceptance server for multilingual tests</p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p>start-test-acceptance-frontend-multilingual</p></td>
<td><p>multilingual-acceptance-frontend-prod-start</p></td>
<td><p>Start acceptance frontend in production mode for multilingual tests</p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p>test-acceptance-multilingual</p></td>
<td><p>multilingual-acceptance-test</p></td>
<td><p>Start Cypress in interactive mode for multilingual tests</p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p>test-acceptance-multilingual-headless</p></td>
<td><p>multilingual-ci-acceptance-test</p></td>
<td><p>Run Cypress tests in headless mode for CI for multilingual tests</p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p>full-test-acceptance-multilingual</p></td>
<td><p>multilingual-ci-acceptance-test-run-all</p></td>
<td><p>With a single command, run the backend, frontend, and the Cypress tests in headless mode for CI for multilingual tests</p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p>start-test-acceptance-server-seamless-multilingual</p></td>
<td><p>deployment-multilingual-acceptance-backend-start</p></td>
<td><p>Start backend acceptance server for multilingual tests for deployment</p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p>start-test-acceptance-frontend-seamless-multilingual</p></td>
<td><p>deployment-multilingual-acceptance-frontend-prod-start</p></td>
<td><p>Start acceptance frontend in production mode for multilingual tests for deployment</p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p>test-acceptance-seamless-multilingual</p></td>
<td><p>deployment-multilingual-acceptance-test</p></td>
<td><p>Start Cypress in interactive mode for multilingual tests for deployment</p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p>test-acceptance-seamless-multilingual-headless</p></td>
<td><p>deployment-multilingual-ci-acceptance-test</p></td>
<td><p>Run Cypress tests in headless mode for CI for multilingual tests for deployment</p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p>full-test-acceptance-seamless-multilingual</p></td>
<td><p>deployment-multilingual-ci-acceptance-test-run-all</p></td>
<td><p>With a single command, run the backend, frontend, and the Cypress tests in headless mode for CI for multilingual tests for deployment</p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p>start-test-acceptance-server-workingcopy</p></td>
<td><p>working-copy-acceptance-backend-start</p></td>
<td><p>Start backend acceptance server for working copy tests</p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p>start-test-acceptance-frontend-workingcopy</p></td>
<td><p>working-copy-acceptance-frontend-prod-start</p></td>
<td><p>Start acceptance frontend in production mode for working copy tests</p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p>test-acceptance-workingcopy</p></td>
<td><p>working-copy-acceptance-test</p></td>
<td><p>Start Cypress in interactive mode for working copy tests</p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p>test-acceptance-workingcopy-headless</p></td>
<td><p>working-copy-ci-acceptance-test</p></td>
<td><p>Run Cypress tests in headless mode for CI for working copy tests</p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p>full-test-acceptance-workingcopy</p></td>
<td><p>working-copy-ci-acceptance-test-run-all</p></td>
<td><p>With a single command, run the backend, frontend, and the Cypress tests in headless mode for CI for working copy tests</p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p>start-test-acceptance-server-guillotina</p></td>
<td><p>guillotina-acceptance-backend-start</p></td>
<td><p>Start backend acceptance server for Guillotina tests</p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p>start-test-acceptance-frontend-guillotina</p></td>
<td><p>guillotina-acceptance-frontend-prod-start</p></td>
<td><p>Start acceptance frontend in production mode for Guillotina tests</p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p>test-acceptance-guillotina</p></td>
<td><p>guillotina-acceptance-test</p></td>
<td><p>Start Cypress in interactive mode for Guillotina tests</p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p>test-acceptance-guillotina-headless</p></td>
<td><p>guillotina-ci-acceptance-test</p></td>
<td><p>Run Cypress tests in headless mode for CI for Guillotina tests</p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p>full-test-acceptance-guillotina</p></td>
<td><p>guillotina-ci-acceptance-test-run-all</p></td>
<td><p>With a single command, run the backend, frontend, and the Cypress tests in headless mode for CI for Guillotina tests</p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p>start-test-acceptance-server-5</p></td>
<td><p>plone5-acceptance-backend-start</p></td>
<td><p>Start backend acceptance server for Plone 5 tests</p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p>start-test-acceptance-server-detached</p></td>
<td><p>acceptance-server-detached-start</p></td>
<td><p>Starts test acceptance server main fixture in detached mode (daemon)</p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p>stop-test-acceptance-server-detached</p></td>
<td><p>acceptance-server-detached-stop</p></td>
<td><p>Stop test acceptance server main fixture in detached mode (daemon)</p></td>
<td><p></p></td>
</tr>
</tbody>
</table>
</div>
<p>The documentation has been updated as well to reflect this change.</p>
</section>
<section id="new-image-upload-widget-component">
<h3>New image upload widget component<a class="headerlink" href="#new-image-upload-widget-component" title="Link to this heading">#</a></h3>
<p>Previously the image upload widget component was integrated into the image block edit component.
Now the image upload widget component is its own component, and you can reuse it in other blocks.</p>
<p>If you shadow the image block edit component, make sure it continues to work as you expect, or update it to use the new image upload widget component.</p>
<p>The new image upload widget component's user experience also changed.
The input field is now a row of buttons.
The input field's placeholder text was moved above the buttons.
Together these changes improve usability both on small screens and in small containers, such as when the widget is in grid block elements.</p>
</section>
<section id="renamed-the-constants-languages-module">
<h3>Renamed the <code class="docutils literal notranslate"><span class="pre">constants/Languages</span></code> module<a class="headerlink" href="#renamed-the-constants-languages-module" title="Link to this heading">#</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">src/constants/Languages.js</span></code> has been renamed to <code class="docutils literal notranslate"><span class="pre">src/constants/Languages.cjs</span></code> since, in fact, it's a CommonJS module.
This change is needed for consistency with module suffixes in Volto core, in preparation for replacing Razzle with a modern builder.</p>
<p>The only Volto component that makes use of it is <code class="docutils literal notranslate"><span class="pre">PersonalPreferences</span></code>.
If you shadow it, then you should update this component.
For the rest, it is unlikely that your code refers to this module, since it's used internally by Volto itself.</p>
</section>
<section id="renamed-test-setup-config-module">
<h3>Renamed <code class="docutils literal notranslate"><span class="pre">test-setup-config</span></code> module<a class="headerlink" href="#renamed-test-setup-config-module" title="Link to this heading">#</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">test-setup-config.js</span></code> has been renamed to <code class="docutils literal notranslate"><span class="pre">test-setup-config.jsx</span></code> since, in fact, it contains JSX.
This change is needed for consistency with module suffixes in Volto core, in preparation for replacing Razzle with a modern builder.</p>
<p>It is unlikely that your code uses it, unless you heavily customized the Jest testing pipeline.</p>
</section>
<section id="removed-react-share-library-and-socialsharing-component">
<h3>Removed <code class="docutils literal notranslate"><span class="pre">react-share</span></code> library and <code class="docutils literal notranslate"><span class="pre">SocialSharing</span></code> component<a class="headerlink" href="#removed-react-share-library-and-socialsharing-component" title="Link to this heading">#</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">react-share</span></code> library and <code class="docutils literal notranslate"><span class="pre">SocialSharing</span></code> component has not been used in the core since some time ago, and it is more suitable as an add-on and not in core.
If you still use it, you can add it to your main add-on dependency, and extract the <code class="docutils literal notranslate"><span class="pre">SocialSharing</span></code> component from Volto 17 as a custom component in your add-on code.</p>
</section>
<section id="refactor-of-formvalidation-module">
<h3>Refactor of <code class="docutils literal notranslate"><span class="pre">FormValidation</span></code> module<a class="headerlink" href="#refactor-of-formvalidation-module" title="Link to this heading">#</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">packages/volto/src/helpers/FormValidation/FormValidation.jsx</span></code> module has been heavily refactored.
Some helper functions have been moved to <code class="docutils literal notranslate"><span class="pre">packages/volto/src/helpers/FormValidation/validators.ts</span></code>.
None of those functions were exported in the first place, so no imports will be broken.
If you shadowed the module <code class="file docutils literal notranslate"><span class="pre">packages/volto/src/helpers/FormValidation/FormValidation.jsx</span></code>, you should review it and update it accordingly.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="../configuration/validation.html"><span class="doc">Client side form field validation</span></a></p>
</div>
</section>
<section id="field-validation-for-blocks">
<h3>Field validation for blocks<a class="headerlink" href="#field-validation-for-blocks" title="Link to this heading">#</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">BlockDataForm</span></code> component now gets a new prop <code class="docutils literal notranslate"><span class="pre">errors</span></code>.
This prop must be assigned with the new prop passed down from the blocks engine <code class="docutils literal notranslate"><span class="pre">blocksErrors</span></code>.
If not passed down, the block can't display any field validation error.</p>
<div class="highlight-jsx notranslate"><div class="highlight"><pre><span></span><span class="c1">// More component code above here</span>

<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">block</span><span class="p">,</span>
<span class="w">    </span><span class="nx">blocksConfig</span><span class="p">,</span>
<span class="w">    </span><span class="nx">contentType</span><span class="p">,</span>
<span class="w">    </span><span class="nx">data</span><span class="p">,</span>
<span class="w">    </span><span class="nx">navRoot</span><span class="p">,</span>
<span class="w">    </span><span class="nx">onChangeBlock</span><span class="p">,</span>
<span class="w">    </span><span class="nx">blocksErrors</span><span class="p">,</span>
<span class="w">  </span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">props</span><span class="p">;</span>

<span class="k">return</span><span class="w"> </span><span class="p">(</span>
<span class="w">  </span><span class="p">&lt;</span><span class="nt">BlockDataForm</span>
<span class="w">    </span><span class="na">block</span><span class="o">=</span><span class="p">{</span><span class="nx">block</span><span class="p">}</span>
<span class="w">    </span><span class="na">schema</span><span class="o">=</span><span class="p">{</span><span class="nx">schema</span><span class="p">}</span>
<span class="w">    </span><span class="na">title</span><span class="o">=</span><span class="p">{</span><span class="nx">schema</span><span class="p">.</span><span class="nx">title</span><span class="p">}</span>
<span class="w">    </span><span class="na">onChangeField</span><span class="o">=</span><span class="p">{(</span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="nx">string</span><span class="p">,</span><span class="w"> </span><span class="nx">value</span><span class="o">:</span><span class="w"> </span><span class="nx">any</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nx">onChangeBlock</span><span class="p">(</span><span class="nx">block</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="p">...</span><span class="nx">data</span><span class="p">,</span>
<span class="w">        </span><span class="p">[</span><span class="nx">id</span><span class="p">]</span><span class="o">:</span><span class="w"> </span><span class="nx">value</span><span class="p">,</span>
<span class="w">      </span><span class="p">});</span>
<span class="w">    </span><span class="p">}}</span>
<span class="w">    </span><span class="na">onChangeBlock</span><span class="o">=</span><span class="p">{</span><span class="nx">onChangeBlock</span><span class="p">}</span>
<span class="w">    </span><span class="na">formData</span><span class="o">=</span><span class="p">{</span><span class="nx">data</span><span class="p">}</span>
<span class="w">    </span><span class="na">blocksConfig</span><span class="o">=</span><span class="p">{</span><span class="nx">blocksConfig</span><span class="p">}</span>
<span class="w">    </span><span class="na">navRoot</span><span class="o">=</span><span class="p">{</span><span class="nx">navRoot</span><span class="p">}</span>
<span class="w">    </span><span class="na">contentType</span><span class="o">=</span><span class="p">{</span><span class="nx">contentType</span><span class="p">}</span>
<span class="w">    </span><span class="na">errors</span><span class="o">=</span><span class="p">{</span><span class="nx">blocksErrors</span><span class="p">}</span>
<span class="w">  </span><span class="p">/&gt;</span>
<span class="p">)</span>
</pre></div>
</div>
</section>
<section id="schemawidget-widget-registration-change">
<h3><code class="docutils literal notranslate"><span class="pre">SchemaWidget</span></code> widget registration change<a class="headerlink" href="#schemawidget-widget-registration-change" title="Link to this heading">#</a></h3>
<p>Previously in the widget mapping, the <code class="docutils literal notranslate"><span class="pre">SchemaWidget</span></code> was registered in the <code class="docutils literal notranslate"><span class="pre">id</span></code> object and assigned to the <code class="docutils literal notranslate"><span class="pre">schema</span></code> key.
Due to this common key name, this definition could leak the widget and be applied to unwanted fields.
The <code class="docutils literal notranslate"><span class="pre">SchemaWidget</span></code> is now registered under the <code class="docutils literal notranslate"><span class="pre">widget</span></code> object.
If you use it in your project or add-ons, you should update the field definition, and add the <code class="docutils literal notranslate"><span class="pre">widget</span></code> property.</p>
<div class="highlight-ts notranslate"><div class="highlight"><pre><span></span><span class="c1">// more form definition above...</span>
<span class="nx">schema</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">title</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Schema&#39;</span><span class="p">,</span>
<span class="w">  </span><span class="nx">widget</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;schema&#39;</span>
<span class="p">}</span>
<span class="c1">// rest of the form definition...</span>
</pre></div>
</div>
</section>
<section id="tags-in-slot">
<h3>Tags in slot<a class="headerlink" href="#tags-in-slot" title="Link to this heading">#</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">Tags</span></code> component has been moved to the <code class="docutils literal notranslate"><span class="pre">belowContent</span></code> slot.
It now receives the <code class="docutils literal notranslate"><span class="pre">content</span></code> property instead of the <code class="docutils literal notranslate"><span class="pre">tags</span></code> property.</p>
</section>
<section id="table-of-contents-block-markup-change">
<h3>Table of Contents block markup change<a class="headerlink" href="#table-of-contents-block-markup-change" title="Link to this heading">#</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">View</span></code> component for the Table of Contents block was updated to use a <code class="docutils literal notranslate"><span class="pre">nav</span></code> element instead of a <code class="docutils literal notranslate"><span class="pre">div</span></code>.
If you've applied custom styles or shadowed this component, you might need to make adjustments.</p>
</section>
<section id="update-needed-to-project-boilerplate-generated-with-plone-generator-volto">
<h3>Update needed to project boilerplate generated with <code class="docutils literal notranslate"><span class="pre">&#64;plone/generator-volto</span></code><a class="headerlink" href="#update-needed-to-project-boilerplate-generated-with-plone-generator-volto" title="Link to this heading">#</a></h3>
<div class="versionadded">
<p><span class="versionmodified added">Added in version Volto: </span>18.0.0-alpha.42</p>
<p>Effective with Volto 18.0.0-alpha.42, a new feature introduced a breaking change in the boilerplates created using <code class="docutils literal notranslate"><span class="pre">&#64;plone/generator-volto</span></code> 9.0.0-alpha.17 and earlier.</p>
</div>
<div class="deprecated">
<p><span class="versionmodified deprecated">Deprecated since version Volto: </span>18.0.0-alpha.43</p>
<p>The <code class="docutils literal notranslate"><span class="pre">yarn</span></code>-based generator <a class="reference external" href="https://www.npmjs.com/package/&#64;plone/generator-volto"><code class="docutils literal notranslate"><span class="pre">&#64;plone/generator-volto</span></code></a> package and project boilerplates generated from it are deprecated and will not receive any further updates.
The recommended way of generating a project boilerplate is <a class="reference external" href="https://github.com/plone/cookieplone">Cookieplone</a>.
Please update your code to use the <code class="docutils literal notranslate"><span class="pre">pnpm</span></code> based setup.</p>
</div>
<p>You need to change your <code class="file docutils literal notranslate"><span class="pre">razzle.config.js</span></code> file in the root of your boilerplate.</p>
<div class="highlight-diff notranslate"><div class="highlight"><pre><span></span>razzle.config.js
<span class="gu">@@ -27,12 +27,14 @@ const customModifyWebpackConfig = ({</span>
<span class="w"> </span>  webpackConfig,
<span class="w"> </span>  webpackObject,
<span class="w"> </span>  options,
<span class="gi">+  paths,</span>
<span class="w"> </span>}) =&gt; {
<span class="w"> </span>  const config = modifyWebpackConfig({
<span class="w"> </span>    env: { target, dev },
<span class="w"> </span>    webpackConfig,
<span class="w"> </span>    webpackObject,
<span class="w"> </span>    options,
<span class="gi">+    paths,</span>
<span class="w"> </span>  });
<span class="w"> </span>  // add custom code here..
<span class="w"> </span>  return config;
</pre></div>
</div>
<p>The change involves adding a new <code class="docutils literal notranslate"><span class="pre">paths</span></code> argument to the <code class="docutils literal notranslate"><span class="pre">customModifyWebpackConfig</span></code> function.</p>
</section>
<section id="added-rule-for-eslint-to-detect-missing-key-property-in-iterators">
<h3>Added rule for ESlint to detect missing key property in iterators.<a class="headerlink" href="#added-rule-for-eslint-to-detect-missing-key-property-in-iterators" title="Link to this heading">#</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">react/jsx-key</span></code> rule has been enabled in ESlint for catching missing <code class="docutils literal notranslate"><span class="pre">key</span></code> in JSX iterators.
You might catch some violations in your project or add-on code after running ESlint.
Adding the missing <code class="docutils literal notranslate"><span class="pre">key</span></code> property whenever the violation is reported will fix it.</p>
</section>
<section id="add-missing-overrides-to-projects-in-package-json">
<h3>Add missing overrides to projects in <code class="docutils literal notranslate"><span class="pre">package.json</span></code><a class="headerlink" href="#add-missing-overrides-to-projects-in-package-json" title="Link to this heading">#</a></h3>
<p>This will fix some issues with Hot Module Reload in projects.
It's required in Volto <code class="docutils literal notranslate"><span class="pre">18.0.0-alpha.47</span></code> and later, otherwise the site breaks in development mode.
Add this object to the <code class="docutils literal notranslate"><span class="pre">pnpm</span></code> key in your project <code class="file docutils literal notranslate"><span class="pre">package.json</span></code>.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="w">  </span><span class="nt">&quot;pnpm&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;overrides&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">			</span><span class="nt">&quot;@pmmmwh/react-refresh-webpack-plugin&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;^0.5.15&quot;</span><span class="p">,</span>
<span class="w">			</span><span class="nt">&quot;react-refresh&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;^0.14.2&quot;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">},</span>
</pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified added">Added in version Volto: </span>18.0.0-alpha.47</p>
</div>
<div class="versionadded">
<p><span class="versionmodified added">Added in version &#64;plone/registry: </span>3.0.0-alpha.0</p>
</div>
</section>
<section id="deprecation-notices-for-volto-18">
<h3>Deprecation notices for Volto 18<a class="headerlink" href="#deprecation-notices-for-volto-18" title="Link to this heading">#</a></h3>
<section id="plone-generator-volto">
<h4><code class="docutils literal notranslate"><span class="pre">&#64;plone/generator-volto</span></code><a class="headerlink" href="#plone-generator-volto" title="Link to this heading">#</a></h4>
<div class="deprecated">
<p><span class="versionmodified deprecated">Deprecated since version Volto: </span>18.0.0</p>
</div>
<p>The Node.js-based Volto project boilerplate generator is deprecated from Volto 18 onwards.
It is marked as deprecated, archived, and it won't receive any further updates.
Although you can still migrate your project to Volto 18 using this boilerplate, you should migrate to using <a class="reference external" href="https://github.com/plone/cookieplone">Cookieplone</a>.
See <a class="reference internal" href="#upgrade-18-cookieplone-label"><span class="std std-ref">Cookieplone is now the recommended project and add-on generator for Volto 18</span></a> for details.</p>
<section id="alternative">
<h5>Alternative<a class="headerlink" href="#alternative" title="Link to this heading">#</a></h5>
<p>Migrate your project to use a <a class="reference external" href="https://github.com/plone/cookieplone">Cookieplone</a> boilerplate.</p>
</section>
</section>
<section id="volto-project-configurations">
<h4>Volto project configurations<a class="headerlink" href="#volto-project-configurations" title="Link to this heading">#</a></h4>
<div class="deprecated">
<p><span class="versionmodified deprecated">Deprecated since version Volto: </span>18.0.0</p>
</div>
<p>Configuring Volto using <code class="file docutils literal notranslate"><span class="pre">src/config.js</span></code> at the project level is deprecated in Volto 18, and will be removed in Volto 19.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p>See <a class="github reference external" href="https://github.com/plone/volto/issues/6396">plone/volto#6396</a> for details.</p>
</div>
<section id="id1">
<h5>Alternative<a class="headerlink" href="#id1" title="Link to this heading">#</a></h5>
<p>You should configure your projects in a policy add-on.
You can move your project to use <a class="reference external" href="https://github.com/plone/cookieplone">Cookieplone</a> which provides the necessary boilerplate for it.</p>
</section>
</section>
<section id="semantic-ui">
<h4>Semantic UI<a class="headerlink" href="#semantic-ui" title="Link to this heading">#</a></h4>
<div class="deprecated">
<p><span class="versionmodified deprecated">Deprecated since version Volto: </span>18.0.0</p>
</div>
<p>The Semantic UI library is not maintained anymore, and will be removed in Plone 7.
You should no longer use Semantic UI in add-ons and projects.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p>Related PLIPs:</p>
<ul class="simple">
<li><p><a class="github reference external" href="https://github.com/plone/volto/issues/6321">plone/volto#6321</a></p></li>
<li><p><a class="github reference external" href="https://github.com/plone/volto/issues/6323">plone/volto#6323</a></p></li>
</ul>
</div>
<section id="alternatives">
<h5>Alternatives<a class="headerlink" href="#alternatives" title="Link to this heading">#</a></h5>
<p>You can use any supported component framework of your choice for implementing new components, especially in the public theme side.
If you create new widgets or components for the CMSUI—in other words, the non-public side—you should use the <a class="reference external" href="https://github.com/plone/volto/tree/main/packages/components"><code class="docutils literal notranslate"><span class="pre">&#64;plone/components</span></code></a> library as an alternative.
Even though it's still in the development phase, it will be completed in the next few months, and will be supported in the future.</p>
</section>
</section>
<section id="lodash-library">
<h4><code class="docutils literal notranslate"><span class="pre">lodash</span></code> library<a class="headerlink" href="#lodash-library" title="Link to this heading">#</a></h4>
<div class="deprecated">
<p><span class="versionmodified deprecated">Deprecated since version Volto: </span>18.0.0</p>
</div>
<p><code class="docutils literal notranslate"><span class="pre">lodash</span></code> is deprecated in Volto 18, and will be removed in Plone 7.</p>
<p><code class="docutils literal notranslate"><span class="pre">lodash</span></code> has not received any updates since 2021.
It has performance issues from bloated bundles and it's not prepared for ESM.
Lots of <code class="docutils literal notranslate"><span class="pre">lodash</span></code> utility helpers can be replaced with vanilla ES.
These issues cause concern about its future maintainability.</p>
<p>In place of <code class="docutils literal notranslate"><span class="pre">lodash</span></code>, Plone 7 will use both the <code class="docutils literal notranslate"><span class="pre">lodash-es</span></code> library, which is ESM ready, and modern vanilla ES alternatives whenever possible.</p>
<section id="id2">
<h5>Alternatives<a class="headerlink" href="#id2" title="Link to this heading">#</a></h5>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p>The following links suggest alternatives to <code class="docutils literal notranslate"><span class="pre">lodash</span></code>.</p>
<ul class="simple">
<li><p><a class="github reference external" href="https://github.com/you-dont-need/You-Dont-Need-Lodash-Underscore">you-dont-need/You-Dont-Need-Lodash-Underscore</a></p></li>
<li><p><a class="reference external" href="https://javascript.plainenglish.io/you-dont-need-lodash-how-i-gave-up-lodash-693c8b96a07c">https://javascript.plainenglish.io/you-dont-need-lodash-how-i-gave-up-lodash-693c8b96a07c</a></p></li>
</ul>
<p>If you still need some of the utilities in <code class="docutils literal notranslate"><span class="pre">lodash</span></code> and cannot use vanilla ES, you can use <code class="docutils literal notranslate"><span class="pre">lodash-es</span></code> instead.</p>
</div>
</section>
</section>
<section id="loadable-component-and-volto-loadables-framework">
<h4><code class="docutils literal notranslate"><span class="pre">&#64;loadable/component</span></code> and Volto <code class="docutils literal notranslate"><span class="pre">Loadables</span></code> framework<a class="headerlink" href="#loadable-component-and-volto-loadables-framework" title="Link to this heading">#</a></h4>
<div class="deprecated">
<p><span class="versionmodified deprecated">Deprecated since version Volto: </span>18.0.0</p>
</div>
<p><code class="docutils literal notranslate"><span class="pre">&#64;loadable/component</span></code> and the Volto <code class="docutils literal notranslate"><span class="pre">Loadables</span></code> framework is deprecated in Volto 18, and will be removed from Plone 7.
It's a Webpack-only library, and it does not have Vite plugin support.
Since React 18, this library is no longer necessary, as it has the initial implementation of the &quot;concurrent mode&quot;.
React 19 will further improve it and add more features around it.</p>
<section id="id3">
<h5>Alternatives<a class="headerlink" href="#id3" title="Link to this heading">#</a></h5>
<p>Use plain React 18 lazy load features and its idioms for lazy load components.</p>
<div class="highlight-jsx notranslate"><div class="highlight"><pre><span></span><span class="kd">const</span><span class="w"> </span><span class="nx">myLazyComponent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">lazy</span><span class="p">(()=&gt;</span><span class="w"> </span><span class="k">import</span><span class="p">(</span><span class="s1">&#39;@plone/volto/components/theme/MyLazyComponent/MyLazyComponent&#39;</span><span class="p">))</span>

<span class="kd">const</span><span class="w"> </span><span class="nx">RandomComponent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">props</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="p">&lt;</span><span class="nt">React</span><span class="p">.</span><span class="na">Suspense</span><span class="p">&gt;</span>
<span class="w">        </span><span class="p">&lt;</span><span class="nt">MyLazyComponent</span><span class="w"> </span><span class="p">/&gt;</span>
<span class="w">    </span><span class="p">&lt;/</span><span class="nt">React</span><span class="p">.</span><span class="na">Suspense</span><span class="p">&gt;</span>
<span class="p">)</span>
</pre></div>
</div>
<p>There's no support for pre-loading or lazy loading entire libraries as in <code class="docutils literal notranslate"><span class="pre">&#64;loadable/component</span></code>.
With the removal of barrel imports files, as described in the next deprecation notice, it is now unnecessary.</p>
</section>
</section>
<section id="removal-of-barrel-import-files">
<h4>Removal of barrel import files<a class="headerlink" href="#removal-of-barrel-import-files" title="Link to this heading">#</a></h4>
<div class="deprecated">
<p><span class="versionmodified deprecated">Deprecated since version Volto: </span>18.0.0</p>
</div>
<p>Volto previously used barrel imports, which are centralized files where other imports are re-exported, to improve the developer user experience.
With barrel imports, a developer only needs to remember to import from the re-exported place, not the full path.</p>
<p>Since the barrel imports directly import all the code, a lot of imports ended up in the same main chunk of code.
It became a bad practice.
Modern bundlers, such as Vite, rely upon the import path to determine whether to bundle code together or not, reducing the bundle size.</p>
<p>The barrel imports must be removed to increase the natural number of chunks that Volto divides on—especially on routes—resulting in code splitting done the right and natural way.
This forces us to rewrite all the imports everywhere—including core, projects, and add-ons—once we implement it.
The barrel imports files include the following in Volto.</p>
<ul class="simple">
<li><p><code class="file docutils literal notranslate"><span class="pre">src/components/index.js</span></code></p></li>
<li><p><code class="file docutils literal notranslate"><span class="pre">src/helpers/index.js</span></code></p></li>
<li><p><code class="file docutils literal notranslate"><span class="pre">src/actions/index.js</span></code></p></li>
<li><p><code class="file docutils literal notranslate"><span class="pre">src/hooks/index.js</span></code></p></li>
</ul>
<p>They also include the following in the <code class="docutils literal notranslate"><span class="pre">&#64;plone/volto-slate</span></code> package.</p>
<ul class="simple">
<li><p><code class="file docutils literal notranslate"><span class="pre">src/actions/index.js</span></code></p></li>
<li><p><code class="file docutils literal notranslate"><span class="pre">src/editor/ui/index.js</span></code></p></li>
<li><p><code class="file docutils literal notranslate"><span class="pre">src/utils/index.js</span></code></p></li>
</ul>
<section id="id4">
<h5>Alternative<a class="headerlink" href="#id4" title="Link to this heading">#</a></h5>
<p>Implement only direct imports in code, preparing now for the upcoming change.</p>
<div class="highlight-diff notranslate"><div class="highlight"><pre><span></span><span class="gd">-import { BodyClass } from &#39;@plone/volto/helpers&#39;;</span>
<span class="gi">+import BodyClass from &#39;@plone/volto/helpers/BodyClass/BodyClass&#39;;</span>
</pre></div>
</div>
<p>Once this is implemented, a code modification will be provided for a smooth migration.</p>
</section>
</section>
</section>
</section>
<section id="upgrading-to-volto-17-x-x">
<span id="volto-upgrade-guide-17-x-x"></span><h2>Upgrading to Volto 17.x.x<a class="headerlink" href="#upgrading-to-volto-17-x-x" title="Link to this heading">#</a></h2>
<section id="ending-support-for-node-js-14-and-16">
<h3>Ending support for Node.js 14 and 16<a class="headerlink" href="#ending-support-for-node-js-14-and-16" title="Link to this heading">#</a></h3>
<p>Long Term Support (LTS) for <a class="reference external" href="https://6.docs.plone.org/glossary.html#term-Node.js" title="(in Plone Documentation v6)"><span class="xref std std-term">Node.js</span></a> 14 by the Node.js community ended in April 2023.
Long Term Support for Node.js 16 by the Node.js community ended in September 2023.
Volto 17 no longer supports Node.js 14 or 16.
Please update your projects to a supported Node.js version (18 or 20).
Version 18 is recommended, as the current LTS version of Node.js.</p>
</section>
<section id="webpack-5">
<h3>Webpack 5<a class="headerlink" href="#webpack-5" title="Link to this heading">#</a></h3>
<p>Volto 17 now uses Webpack 5.
If you customized <code class="docutils literal notranslate"><span class="pre">razzle.config.js</span></code> for your project to change Webpack configuration
or use Webpack plugins, you might need to make adjustments.</p>
</section>
<section id="razzle-upgraded-to-version-4-2-18">
<h3>Razzle upgraded to version <code class="docutils literal notranslate"><span class="pre">4.2.18</span></code><a class="headerlink" href="#razzle-upgraded-to-version-4-2-18" title="Link to this heading">#</a></h3>
<p>Razzle has been upgraded to version <code class="docutils literal notranslate"><span class="pre">4.2.18</span></code>.
It is recommended that you update your project's dependency on Razzle to this version in order to avoid duplication.</p>
</section>
<section id="upgraded-linters-eslint-prettier-and-stylelint">
<h3>Upgraded linters, ESlint, Prettier and Stylelint<a class="headerlink" href="#upgraded-linters-eslint-prettier-and-stylelint" title="Link to this heading">#</a></h3>
<p>The main linters have been upgraded.
Once updated, you may find new violations in your project or add-on code.
It is recommended that you run again all the linters and fix all the violations once you update it to Volto 17.
Upgrade your local dependencies in projects and add-ons by editing your <code class="file docutils literal notranslate"><span class="pre">package.json</span></code> as follows:</p>
<div class="highlight-diff notranslate"><div class="highlight"><pre><span></span>&quot;devDependencies&quot;: {
<span class="gd">-    &quot;eslint-config-prettier&quot;: &quot;8.10.0&quot;,</span>
<span class="gi">+    &quot;eslint-config-prettier&quot;: &quot;9.0.0&quot;,</span>
<span class="gd">-    &quot;eslint-plugin-prettier&quot;: &quot;3.4.1&quot;,</span>
<span class="gi">+    &quot;eslint-plugin-prettier&quot;: &quot;5.0.0&quot;,</span>
<span class="gd">-    &quot;prettier&quot;: &quot;2.0.5&quot;,</span>
<span class="gi">+    &quot;prettier&quot;: &quot;3.0.3&quot;,</span>
<span class="gd">-    &quot;stylelint&quot;: &quot;14.0.1&quot;,</span>
<span class="gd">-    &quot;stylelint-config-idiomatic-order&quot;: &quot;8.1.0&quot;,</span>
<span class="gd">-    &quot;stylelint-config-prettier&quot;: &quot;8.0.1&quot;,</span>
<span class="gd">-    &quot;stylelint-prettier&quot;: &quot;1.1.2&quot;,</span>
<span class="gi">+    &quot;stylelint&quot;: &quot;15.10.3&quot;,</span>
<span class="gi">+    &quot;stylelint-config-idiomatic-order&quot;: &quot;9.0.0&quot;,</span>
<span class="gi">+    &quot;stylelint-prettier&quot;: &quot;4.0.2&quot;,</span>
}
</pre></div>
</div>
</section>
<section id="typescript-support-in-volto">
<h3>TypeScript support in Volto<a class="headerlink" href="#typescript-support-in-volto" title="Link to this heading">#</a></h3>
<div class="versionadded">
<p><span class="versionmodified added">Added in version Volto: </span>17.0.0-alpha.27</p>
</div>
<p>We added full support of TypeScript in Volto core.</p>
<p>No existing code has been migrated.
You may write code in either JavaScript or TypeScript.
The choice is yours.</p>
<p>Previously developers had the option to support TypeScript only in their Volto add-ons.
Now it's available in Volto projects, as long as you upgrade your project dependencies.</p>
<p>To support TypeScript in your projects, you must update your project as follows.</p>
<p>Edit your <code class="file docutils literal notranslate"><span class="pre">package.json</span></code>:</p>
<div class="highlight-diff notranslate"><div class="highlight"><pre><span></span>&quot;scripts&quot;: {
<span class="gd">-    &quot;lint&quot;: &quot;./node_modules/eslint/bin/eslint.js --max-warnings=0 &#39;src/**/*.{js,jsx}&#39;&quot;,</span>
<span class="gd">-    &quot;lint:fix&quot;: &quot;./node_modules/eslint/bin/eslint.js --max-warnings=0 --fix &#39;src/**/*.{js,jsx}&#39;&quot;,</span>
<span class="gd">-    &quot;lint:ci&quot;: &quot;./node_modules/eslint/bin/eslint.js --max-warnings=0 -f checkstyle &#39;src/**/*.{js,jsx}&#39; &gt; eslint.xml&quot;,</span>
<span class="gi">+    &quot;lint&quot;: &quot;./node_modules/eslint/bin/eslint.js --max-warnings=0 &#39;src/**/*.{js,jsx,ts,tsx,json}&#39;&quot;,</span>
<span class="gi">+    &quot;lint:fix&quot;: &quot;./node_modules/eslint/bin/eslint.js --fix &#39;src/**/*.{js,jsx,ts,tsx,json}&#39;&quot;,</span>
<span class="gi">+    &quot;lint:ci&quot;: &quot;./node_modules/eslint/bin/eslint.js --max-warnings=0 -f checkstyle &#39;src/**/*.{js,jsx,ts,tsx,json}&#39; &gt; eslint.xml&quot;,</span>
}
</pre></div>
</div>
<div class="highlight-diff notranslate"><div class="highlight"><pre><span></span>&quot;devDependencies&quot;: {
<span class="gi">+     &quot;@plone/scripts&quot;: ^3.0.0,</span>
<span class="gi">+     &quot;@typescript-eslint/eslint-plugin&quot;: &quot;6.7.0&quot;,</span>
<span class="gi">+     &quot;@typescript-eslint/parser&quot;: &quot;6.7.0&quot;,</span>
<span class="gi">+     &quot;stylelint-prettier&quot;: &quot;1.1.2&quot;,</span>
<span class="gi">+     &quot;ts-jest&quot;: &quot;^26.4.2&quot;,</span>
<span class="gi">+     &quot;ts-loader&quot;: &quot;9.4.4&quot;,</span>
<span class="gi">+     &quot;typescript&quot;: &quot;5.2.2&quot;</span>
}
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>After making this change, you might experience hoisting problems and some packages can't be found on start.
In that case, make sure you reset your <code class="docutils literal notranslate"><span class="pre">yarn.lock</span></code> by deleting it and start with a clean environment.</p>
</div>
<p>To use TypeScript in your projects, you'll need to introduce a TypeScript configuration file <code class="file docutils literal notranslate"><span class="pre">tsconfig.json</span></code>, and remove the existing file <code class="file docutils literal notranslate"><span class="pre">jsconfig.json</span></code>.
You can use the one provided by the generator as a template, or use your own:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;compilerOptions&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;target&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ESNext&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;lib&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;DOM&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;DOM.Iterable&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;ESNext&quot;</span><span class="p">],</span>
<span class="w">    </span><span class="nt">&quot;module&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;commonjs&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;allowJs&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;skipLibCheck&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;esModuleInterop&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;allowSyntheticDefaultImports&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;strict&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;forceConsistentCasingInFileNames&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;moduleResolution&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Node&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;resolveJsonModule&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;isolatedModules&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;noEmit&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;jsx&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;react-jsx&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;paths&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span>
<span class="w">    </span><span class="nt">&quot;baseUrl&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;src&quot;</span>
<span class="w">  </span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;include&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;src&quot;</span><span class="p">],</span>
<span class="w">  </span><span class="nt">&quot;exclude&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="s2">&quot;node_modules&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="s2">&quot;build&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="s2">&quot;public&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="s2">&quot;coverage&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="s2">&quot;src/**/*.test.{js,jsx,ts,tsx}&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="s2">&quot;src/**/*.spec.{js,jsx,ts,tsx}&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="s2">&quot;src/**/*.stories.{js,jsx,ts,tsx}&quot;</span>
<span class="w">  </span><span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p>If you use <code class="docutils literal notranslate"><span class="pre">mrs-developer</span></code> in your project, update the command in <code class="file docutils literal notranslate"><span class="pre">Makefile</span></code>:</p>
<div class="highlight-diff notranslate"><div class="highlight"><pre><span></span><span class="gd">--- a/Makefile</span>
<span class="gi">+++ b/Makefile</span>
preinstall: ## Preinstall task, checks if missdev (mrs-developer) is present and runs it

<span class="w"> </span>.PHONY: develop
<span class="w"> </span>develop: ## Runs missdev in the local project (mrs.developer.json should be present)
<span class="gd">-       npx -p mrs-developer missdev --config=jsconfig.json --output=addons --fetch-https</span>
<span class="gi">+       if [ -f $$(pwd)/jsconfig.json ]; then npx -p mrs-developer missdev --config=jsconfig.json --output=addons --fetch-https; fi</span>
<span class="gi">+       if [ ! -f $$(pwd)/jsconfig.json ]; then npx -p mrs-developer missdev --output=addons --fetch-https; fi</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>After editing your <code class="file docutils literal notranslate"><span class="pre">Makefile</span></code>, run <code class="docutils literal notranslate"><span class="pre">mrs-developer</span></code> with the following command, so the configuration gets in the right place (<code class="file docutils literal notranslate"><span class="pre">tsconfig.json</span></code>).</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>make<span class="w"> </span>develop
</pre></div>
</div>
</div>
</section>
<section id="upgrade-eslint-and-use-babel-eslint-parser">
<h3>Upgrade ESlint and use <code class="docutils literal notranslate"><span class="pre">&#64;babel/eslint-parser</span></code><a class="headerlink" href="#upgrade-eslint-and-use-babel-eslint-parser" title="Link to this heading">#</a></h3>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version Volto: </span>17.0.0-alpha.27</p>
</div>
<p>ESlint uses a library to parse the language under analysis.
The one used was long deprecated and didn't supported both TypeScript and JavaScript.
We upgraded the ESlint parser to use <code class="docutils literal notranslate"><span class="pre">&#64;babel/eslint-parser</span></code>.
This means when you upgrade your project, some new violations may appear.
Once upgraded, run the linters again to make sure that your code is free of violations.</p>
</section>
<section id="blockchooser-component-now-uses-popperjs-internally">
<h3><code class="docutils literal notranslate"><span class="pre">BlockChooser</span></code> component now uses <code class="docutils literal notranslate"><span class="pre">popperjs</span></code> internally<a class="headerlink" href="#blockchooser-component-now-uses-popperjs-internally" title="Link to this heading">#</a></h3>
<p>Technically not a breaking, the API nor the component contract has changed, but it's worth noting this change in here.</p>
<div class="versionadded">
<p><span class="versionmodified added">Added in version Volto: </span>17.0.0-alpha.1</p>
<p>The <code class="docutils literal notranslate"><span class="pre">BlockChooser</span></code> component now uses <code class="docutils literal notranslate"><span class="pre">popperjs</span></code> library to position itself in the screen.
It spawns at the end of the body instead of inner the block that called it.
This is better from the UI point of view, since any other element can take precedence in the CSS element flow, preventing the block chooser to get overlapped by anything else.</p>
</div>
<p>If you have customized the <code class="docutils literal notranslate"><span class="pre">BlockChooser</span></code> in any way could be that this now could interact with your customizations.</p>
</section>
<section id="removed-hamburgers-library">
<h3>Removed <code class="docutils literal notranslate"><span class="pre">hamburgers</span></code> library<a class="headerlink" href="#removed-hamburgers-library" title="Link to this heading">#</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">hamburgers</span></code> library was removed from core Volto, replaced by a much more lightweight approach.
If your theme or add-ons relied on it, add it again as a dependency in them, or adopt the CSS part that you are using in them.</p>
</section>
<section id="fixed-i18n-script-by-taking-into-account-the-real-add-on-order">
<h3>Fixed i18n script by taking into account the real add-on order<a class="headerlink" href="#fixed-i18n-script-by-taking-into-account-the-real-add-on-order" title="Link to this heading">#</a></h3>
<p>By fixing this, we may break how the locales were applied, since the order will now be correct.
Please check the translations of your project and add-ons, and verify that the translations are still correct.
This could be especially true if you did translation overrides, two add-ons were using different translations for the same <code class="docutils literal notranslate"><span class="pre">msgid</span></code>, or there were conflicting <code class="docutils literal notranslate"><span class="pre">msgid</span></code>s in different add-ons.</p>
</section>
<section id="use-proper-heading-tag-depending-on-the-headline-in-default-listing-template">
<h3>Use proper heading tag (depending on the headline) in default listing template<a class="headerlink" href="#use-proper-heading-tag-depending-on-the-headline-in-default-listing-template" title="Link to this heading">#</a></h3>
<p>This change fixes a bug with the accessibility in listings.</p>
</section>
<section id="use-apiexpanders-to-improve-performance">
<h3>Use <code class="docutils literal notranslate"><span class="pre">apiExpanders</span></code> to improve performance<a class="headerlink" href="#use-apiexpanders-to-improve-performance" title="Link to this heading">#</a></h3>
<p>By default, Volto is now configured to use all possible <code class="docutils literal notranslate"><span class="pre">apiExpanders</span></code> in Plone RESTAPI in order to reduce the XHR requests to only one request.</p>
<p>If you want to retain the old behavior (and no use <code class="docutils literal notranslate"><span class="pre">apiExpanders</span></code> at all), you need to add this configuration to your project/add-on configuration that will remove all <code class="docutils literal notranslate"><span class="pre">apiExpanders</span></code>:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="nx">config</span><span class="p">.</span><span class="nx">settings</span><span class="p">.</span><span class="nx">apiExpanders</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[];</span>
</pre></div>
</div>
</section>
<section id="cypress-upgraded-to-13-1-0">
<h3>Cypress upgraded to 13.1.0<a class="headerlink" href="#cypress-upgraded-to-13-1-0" title="Link to this heading">#</a></h3>
<p>As usual in a Volto major version release, Cypress has been upgraded to the latest version to date.
We are moving from Cypress 11 to Cypress 13.
There are no major changes to the way the tests are implemented and run.</p>
<p>However, it could be that your Cypress boilerplate must be updated in your projects and add-ons if you use <code class="docutils literal notranslate"><span class="pre">&#64;testing-library/cypress</span></code> in your tests.
This is due to a change in how the default commands are now built internally and in <code class="docutils literal notranslate"><span class="pre">&#64;testing-library/cypress</span></code>.</p>
<p>You need to move the import:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="k">import</span><span class="w"> </span><span class="s1">&#39;@testing-library/cypress/add-commands&#39;</span><span class="p">;</span>
</pre></div>
</div>
<p>from <code class="file docutils literal notranslate"><span class="pre">cypress/support/commands.js</span></code> to <code class="file docutils literal notranslate"><span class="pre">cypress/support/e2e.js</span></code>, in case you have it in there.</p>
<p>This is because the overrides that <code class="docutils literal notranslate"><span class="pre">&#64;testing-library/cypress</span></code> introduce can be run only once.
Since there are some commands that can call exports in <code class="file docutils literal notranslate"><span class="pre">cypress/support/commands.js</span></code>, this import may be run more than once, and then it errors.
So you have to make sure that import is run only once while the tests are run.</p>
<p>Check the official <a class="reference external" href="https://docs.cypress.io/app/references/migration-guide">Cypress Migration Guide</a> for more information.</p>
</section>
<section id="new-image-component">
<h3>New Image component<a class="headerlink" href="#new-image-component" title="Link to this heading">#</a></h3>
<div class="versionadded">
<p><span class="versionmodified added">Added in version Volto: </span>17.0.0-alpha.21</p>
<p>A new image component has been added to core to render optimized images.
It requires the latest version of <code class="docutils literal notranslate"><span class="pre">plone.restapi</span></code> (&gt;=8.42.0) installed in the backend to work properly.</p>
</div>
</section>
<section id="removed-teaser-block-utils">
<h3>Removed Teaser block utils<a class="headerlink" href="#removed-teaser-block-utils" title="Link to this heading">#</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">utils.js</span></code> file of the Teaser block was removed because it is no longer used.
You can consider removing it if you were shadowing it in your project.</p>
</section>
<section id="grid-block-migration-from-kitconcept-volto-blocks-grid">
<span id="grid-block-migration-from-kitconcept-volto-blocks-grid-label"></span><h3>Grid block migration from <code class="docutils literal notranslate"><span class="pre">&#64;kitconcept/volto-blocks-grid</span></code><a class="headerlink" href="#grid-block-migration-from-kitconcept-volto-blocks-grid" title="Link to this heading">#</a></h3>
<p>The grid block was added to Volto in version 17.0.0-alpha.16.
It is based on the <code class="docutils literal notranslate"><span class="pre">&#64;kitconcept/volto-blocks-grid</span></code> add-on version 7.x.x.</p>
<p>If you previously used <code class="docutils literal notranslate"><span class="pre">&#64;kitconcept/volto-blocks-grid</span></code> in your project based on a Volto version before 17.0.0-alpha.16, then your site will show two available block types both named <code class="docutils literal notranslate"><span class="pre">Grid</span></code>.
You need to disable one of them based on the following information.</p>
<p>The Volto core grid block uses the Volto default internal blocks-in-block architecture.
This differs from the grid block data structure in the add-on <code class="docutils literal notranslate"><span class="pre">&#64;kitconcept/volto-blocks-grid</span></code>.
Because of this difference, they are not compatible, and a data migration is necessary from the add-on to the Volto grid block.
This migration is not yet available.</p>
<p>However, the Volto core grid block uses a different internal name, <code class="docutils literal notranslate"><span class="pre">gridBlock</span></code>, so both block types can coexist.
Nonetheless, it is recommended to enable only one grid block type for your users, and eventually use a single version to avoid unexpected behaviors and bugs.</p>
<p>You can disable the one you won't use with one of the following configuration settings.</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="c1">// This disables the `@kitconcept/volto-blocks-grid` grid block</span>
<span class="nx">config</span><span class="p">.</span><span class="nx">blocks</span><span class="p">.</span><span class="nx">blocksConfig</span><span class="p">.</span><span class="nx">__grid</span><span class="p">.</span><span class="nx">restricted</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span><span class="p">;</span>

<span class="c1">// This disables the Volto core grid block</span>
<span class="nx">config</span><span class="p">.</span><span class="nx">blocks</span><span class="p">.</span><span class="nx">blocksConfig</span><span class="p">.</span><span class="nx">gridBlock</span><span class="p">.</span><span class="nx">restricted</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span><span class="p">;</span>
</pre></div>
</div>
<p>As long as you keep the add-on in place, your existing blocks will work as expected, even if you restrict the block.
We recommend that you disable the <code class="docutils literal notranslate"><span class="pre">&#64;kitconcept/volto-blocks-grid</span></code> block and use the new Volto core grid block for new content.</p>
</section>
</section>
<section id="upgrading-to-volto-16-x-x">
<span id="volto-upgrade-guide-16-x-x"></span><h2>Upgrading to Volto 16.x.x<a class="headerlink" href="#upgrading-to-volto-16-x-x" title="Link to this heading">#</a></h2>
<section id="volto-slate-is-now-in-core">
<h3><code class="docutils literal notranslate"><span class="pre">volto-slate</span></code> is now in core<a class="headerlink" href="#volto-slate-is-now-in-core" title="Link to this heading">#</a></h3>
<p>From Volto 16.0.0-alpha.15 onwards, <code class="docutils literal notranslate"><span class="pre">volto-slate</span></code> is integrated into Volto core and enabled as the default text block.
The previous text block <code class="docutils literal notranslate"><span class="pre">text</span></code> based on <code class="docutils literal notranslate"><span class="pre">draftJS</span></code> is now deprecated and is restricted (hidden) in Volto bootstrap.
This is a major change and should be planned in advance before you install 16.0.0-alpha.15 or later.</p>
<div class="versionadded">
<p><span class="versionmodified added">Added in version Volto: </span>16.0.0-alpha.15</p>
<p><code class="docutils literal notranslate"><span class="pre">volto-slate</span></code> added to Volto core as the default text block.</p>
</div>
<div class="deprecated">
<p><span class="versionmodified deprecated">Deprecated since version Volto: </span>16.0.0-alpha.15</p>
<p><code class="docutils literal notranslate"><span class="pre">text</span></code> text block based on <code class="docutils literal notranslate"><span class="pre">draftJS</span></code> is now deprecated and will be removed from core in Volto 18.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Volto 16 is the version used in Plone 6.0.x.
Volto 16 has the <a class="reference external" href="https://plone.org/download/release-schedule">same maintenance and support schedule as Plone 6.0</a>.</p>
<p>Although <code class="docutils literal notranslate"><span class="pre">draftJS</span></code> text block deployments are now deprecated, they are supported in Volto 16, will be supported in Volto 17, but will be removed in Volto 18.
As such, you are strongly encouraged to migrate existing sites that use <code class="docutils literal notranslate"><span class="pre">draftJS</span></code> text blocks to <code class="docutils literal notranslate"><span class="pre">slate</span></code> text blocks.</p>
<p>See below for more information.</p>
</div>
<p>These are the possible scenarios:</p>
<ul class="simple">
<li><p>New projects</p></li>
<li><p>Existing projects, already using <code class="docutils literal notranslate"><span class="pre">volto-slate</span></code> add-on</p></li>
<li><p>Existing projects using core <code class="docutils literal notranslate"><span class="pre">draftJS</span></code>, opting to continue using <code class="docutils literal notranslate"><span class="pre">draftJS</span></code></p></li>
<li><p>Existing projects using core <code class="docutils literal notranslate"><span class="pre">draftJS</span></code>, opting to start using <code class="docutils literal notranslate"><span class="pre">slate</span></code> without migrating (possible, but not recommended)</p></li>
<li><p>Existing projects using core <code class="docutils literal notranslate"><span class="pre">draftJS</span></code>, opting to migrate to <code class="docutils literal notranslate"><span class="pre">slate</span></code></p></li>
</ul>
<section id="new-projects">
<h4>New projects<a class="headerlink" href="#new-projects" title="Link to this heading">#</a></h4>
<p>New projects are unaffected, since they will use <code class="docutils literal notranslate"><span class="pre">slate</span></code> as the default text block from the beginning.</p>
</section>
<section id="existing-projects-already-using-volto-slate-add-on">
<h4>Existing projects, already using <code class="docutils literal notranslate"><span class="pre">volto-slate</span></code> add-on<a class="headerlink" href="#existing-projects-already-using-volto-slate-add-on" title="Link to this heading">#</a></h4>
<p>For projects already using <code class="docutils literal notranslate"><span class="pre">volto-slate</span></code>, take the following steps in your project configuration:</p>
<ul class="simple">
<li><p>Remove <code class="docutils literal notranslate"><span class="pre">volto-slate</span></code> add-on from your project build dependencies.</p></li>
<li><p>Add these lines to the Jest configuration in your project's <code class="docutils literal notranslate"><span class="pre">package.json</span></code>:</p></li>
</ul>
<div class="highlight-diff notranslate"><div class="highlight"><pre><span></span><span class="gd">--- a/package.json</span>
<span class="gi">+++ b/package.json</span>
<span class="gu">@@ -57,6 +57,7 @@</span>
<span class="w"> </span>      &quot;^.+\\.js(x)?$&quot;: &quot;babel-jest&quot;,
<span class="w"> </span>      &quot;^.+\\.css$&quot;: &quot;jest-css-modules&quot;,
<span class="w"> </span>      &quot;^.+\\.scss$&quot;: &quot;jest-css-modules&quot;,
<span class="gi">+      &quot;^.+\\.less$&quot;: &quot;jest-css-modules&quot;,</span>
<span class="w"> </span>      &quot;^.+\\.(png)$&quot;: &quot;jest-file&quot;,
<span class="w"> </span>      &quot;^.+\\.(jpg)$&quot;: &quot;jest-file&quot;,
<span class="w"> </span>      &quot;^.+\\.(svg)$&quot;: &quot;./node_modules/@plone/volto/jest-svgsystem-transform.js&quot;
<span class="gu">@@ -67,6 +68,7 @@</span>
<span class="w"> </span>    &quot;moduleNameMapper&quot;: {
<span class="w"> </span>      &quot;@plone/volto/babel&quot;: &quot;&lt;rootDir&gt;/node_modules/@plone/volto/babel&quot;,
<span class="w"> </span>      &quot;@plone/volto/(.*)$&quot;: &quot;&lt;rootDir&gt;/node_modules/@plone/volto/src/$1&quot;,
<span class="gi">+      &quot;@plone/volto-slate&quot;: &quot;&lt;rootDir&gt;/node_modules/@plone/volto/packages/volto-slate/src&quot;,</span>
</pre></div>
</div>
<ul class="simple">
<li><p>If any of your code depends on <code class="docutils literal notranslate"><span class="pre">volto-slate</span></code> code, update your imports by adding the namespace <code class="docutils literal notranslate"><span class="pre">&#64;plone/</span></code> to the original <code class="docutils literal notranslate"><span class="pre">volto-slate</span></code> import.</p></li>
</ul>
<div class="highlight-diff notranslate"><div class="highlight"><pre><span></span><span class="gd">- import { DetachedTextBlockEditor } from &#39;volto-slate/blocks/Text/DetachedTextBlockEditor&#39;;</span>
<span class="gi">+ import { DetachedTextBlockEditor } from &#39;@plone/volto-slate/blocks/Text/DetachedTextBlockEditor&#39;;</span>
</pre></div>
</div>
</section>
<section id="existing-projects-using-core-draftjs-opting-to-continue-using-draftjs">
<span id="existing-projects-using-core-draftjs-opting-to-migrate-to-slate"></span><h4>Existing projects using core <code class="docutils literal notranslate"><span class="pre">draftJS</span></code>, opting to continue using <code class="docutils literal notranslate"><span class="pre">draftJS</span></code><a class="headerlink" href="#existing-projects-using-core-draftjs-opting-to-continue-using-draftjs" title="Link to this heading">#</a></h4>
<p>You will have to configure your project to continue using <code class="docutils literal notranslate"><span class="pre">draftJS</span></code>, for example, in your <code class="docutils literal notranslate"><span class="pre">config.js</span></code> or in your add-on:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">WysiwygWidget</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@plone/volto/components&#39;</span><span class="p">;</span>

<span class="nx">config</span><span class="p">.</span><span class="nx">settings</span><span class="p">.</span><span class="nx">defaultBlockType</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;text&#39;</span>
<span class="nx">config</span><span class="p">.</span><span class="nx">blocks</span><span class="p">.</span><span class="nx">blocksConfig</span><span class="p">.</span><span class="nx">table</span><span class="p">.</span><span class="nx">restricted</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span><span class="p">;</span>
<span class="nx">config</span><span class="p">.</span><span class="nx">blocks</span><span class="p">.</span><span class="nx">blocksConfig</span><span class="p">.</span><span class="nx">slateTable</span><span class="p">.</span><span class="nx">restricted</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span><span class="p">;</span>
<span class="nx">config</span><span class="p">.</span><span class="nx">widgets</span><span class="p">.</span><span class="nx">widget</span><span class="p">.</span><span class="nx">richtext</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">WysiwygWidget</span><span class="p">;</span>
</pre></div>
</div>
</section>
<section id="existing-projects-using-core-draftjs-opting-to-start-using-slate-without-migrating-possible-but-not-recommended">
<h4>Existing projects using core <code class="docutils literal notranslate"><span class="pre">draftJS</span></code>, opting to start using <code class="docutils literal notranslate"><span class="pre">slate</span></code> without migrating (possible, but not recommended)<a class="headerlink" href="#existing-projects-using-core-draftjs-opting-to-start-using-slate-without-migrating-possible-but-not-recommended" title="Link to this heading">#</a></h4>
<p>Still a valid option, especially if you don't have the budget for it, the old content based on the legacy <code class="docutils literal notranslate"><span class="pre">text</span></code> block will be still be functional.
New text blocks in new content will be created with the new <code class="docutils literal notranslate"><span class="pre">slate</span></code> text block.</p>
<p>It is recommended to go the extra mile and migrate the <code class="docutils literal notranslate"><span class="pre">text</span></code> blocks to <code class="docutils literal notranslate"><span class="pre">slate</span></code> blocks for maximum future compatibility.</p>
</section>
<section id="id5">
<h4>Existing projects using core <code class="docutils literal notranslate"><span class="pre">draftJS</span></code>, opting to migrate to <code class="docutils literal notranslate"><span class="pre">slate</span></code><a class="headerlink" href="#id5" title="Link to this heading">#</a></h4>
<p>Use the <code class="docutils literal notranslate"><span class="pre">blocks-conversion-tool</span></code>.
See <a class="github reference external" href="https://github.com/plone/blocks-conversion-tool">plone/blocks-conversion-tool</a> for more information.</p>
</section>
</section>
<section id="deprecating-node-js-12">
<h3>Deprecating Node.js 12<a class="headerlink" href="#deprecating-node-js-12" title="Link to this heading">#</a></h3>
<p>Since April 30, 2022, Node.js 12 is out of Long Term Support by the Node.js community.
Node.js 12 is deprecated in Volto 13.
Please update your projects to a Node.js LTS version, where either 14 or 16 is supported at the moment of this writing.
Version 16 is recommended.</p>
</section>
<section id="upgraded-to-razzle-4">
<h3>Upgraded to Razzle 4<a class="headerlink" href="#upgraded-to-razzle-4" title="Link to this heading">#</a></h3>
<div class="versionadded">
<p><span class="versionmodified added">Added in version Volto: </span>16.0.0-alpha.38</p>
<p>Volto has upgraded from Razzle 3 to Razzle 4.
You should perform these steps in case you are upgrading to this version or above.</p>
</div>
<section id="steps-after-upgrade">
<h4>Steps after upgrade<a class="headerlink" href="#steps-after-upgrade" title="Link to this heading">#</a></h4>
<p>A few updates may be needed in existing projects:</p>
<ol class="arabic">
<li><p>Add the <code class="docutils literal notranslate"><span class="pre">cache</span></code> directory to <code class="docutils literal notranslate"><span class="pre">.gitignore</span></code>.</p></li>
<li><p>If <code class="docutils literal notranslate"><span class="pre">package.json</span></code> includes scripts that run <code class="docutils literal notranslate"><span class="pre">razzle</span> <span class="pre">test</span></code> with the <code class="docutils literal notranslate"><span class="pre">--env=jest-environment-jsdom-sixteen</span></code> option, update them to use <code class="docutils literal notranslate"><span class="pre">--env=jsdom</span></code> instead.</p></li>
<li><p>Update the <code class="docutils literal notranslate"><span class="pre">jest</span></code> configuration in <code class="docutils literal notranslate"><span class="pre">package.json</span></code> to replace the <code class="docutils literal notranslate"><span class="pre">jest-css-modules</span></code> transform:</p>
<div class="highlight-diff notranslate"><div class="highlight"><pre><span></span>&quot;jest&quot;: {
<span class="w"> </span> &quot;transform&quot;: {
<span class="gd">-     &quot;^.+\\.css$&quot;: &quot;jest-css-modules&quot;,</span>
<span class="gd">-     &quot;^.+\\.scss$&quot;: &quot;jest-css-modules&quot;</span>
<span class="w"> </span> },
<span class="w"> </span> &quot;moduleNameMapper&quot;: {
<span class="gi">+     &quot;\\.(css|less|scss|sass)$&quot;: &quot;identity-obj-proxy&quot;</span>
<span class="w"> </span> }
}
</pre></div>
</div>
</li>
<li><p>Add the option <code class="docutils literal notranslate"><span class="pre">--noninteractive</span></code> to the build script.</p>
<div class="highlight-diff notranslate"><div class="highlight"><pre><span></span><span class="gd">-    &quot;build&quot;: &quot;razzle build&quot;,</span>
<span class="gi">+    &quot;build&quot;: &quot;razzle build --noninteractive&quot;,</span>
</pre></div>
</div>
</li>
<li><p>If you use custom Razzle plugins, update them to use the new format with multiple functions.
The old format still works, but is deprecated.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p>See <a class="reference external" href="https://razzlejs.org/docs/upgrade-guide#plugins">https://razzlejs.org/docs/upgrade-guide#plugins</a></p>
</div>
</li>
<li><p>If you have customized webpack loader configuration related to CSS, make sure it is updated to be compatible with PostCSS 8.</p></li>
<li><p>It's recommended that you remove your existing <code class="docutils literal notranslate"><span class="pre">node_modules</span></code> and start clean.</p></li>
<li><p>If the add-ons you are using are not yet updated to the latest <code class="docutils literal notranslate"><span class="pre">&#64;plone/scripts</span></code>, it's also recommended that you force the version in your build, setting this in <code class="docutils literal notranslate"><span class="pre">package.json</span></code>:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="nt">&quot;resolutions&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;**/@plone/scripts&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;^2.0.0&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</li>
</ol>
</section>
<section id="upgrade-and-update-add-ons-dependency-on-plone-scripts">
<h4>Upgrade and update add-ons dependency on <code class="docutils literal notranslate"><span class="pre">&#64;plone/scripts</span></code><a class="headerlink" href="#upgrade-and-update-add-ons-dependency-on-plone-scripts" title="Link to this heading">#</a></h4>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This applies only to Volto add-ons.</p>
</div>
<p>Most probably you are using <code class="docutils literal notranslate"><span class="pre">&#64;plone/scripts</span></code> in your add-on, since it's used in i18n messageid generation and has other add-on utilities.
When upgrading to Volto 16.0.0-alpha.38 or above, you should upgrade <code class="docutils literal notranslate"><span class="pre">&#64;plone/scripts</span></code> to version 2.0.0 or above.
It's also recommended you move it from <code class="docutils literal notranslate"><span class="pre">dependencies</span></code> to <code class="docutils literal notranslate"><span class="pre">devDependencies</span></code>.</p>
<div class="highlight-diff notranslate"><div class="highlight"><pre><span></span><span class="gh">diff --git a/package.json b/package.json</span>
<span class="gd">--- a/package.json</span>
<span class="gi">+++ b/package.json</span>
<span class="w"> </span>    }
<span class="w"> </span>  },
<span class="w"> </span>  &quot;devDependencies&quot;: {
<span class="gi">+    &quot;@plone/scripts&quot;: &quot;2.0.0&quot;,</span>
<span class="w"> </span>    &quot;release-it&quot;: &quot;^14.14.2&quot;
<span class="w"> </span>  },
<span class="gd">-  &quot;dependencies&quot;: {</span>
<span class="gd">-    &quot;@plone/scripts&quot;: &quot;*&quot;</span>
<span class="gd">-  }</span>
<span class="gi">+  &quot;dependencies&quot;: {}</span>
<span class="w"> </span>}
</pre></div>
</div>
<p>You should also do a final step, and change the <code class="docutils literal notranslate"><span class="pre">babel.config.js</span></code>, removing the preset from <code class="docutils literal notranslate"><span class="pre">razzle/babel</span></code> to <code class="docutils literal notranslate"><span class="pre">razzle</span></code>:</p>
<div class="highlight-diff notranslate"><div class="highlight"><pre><span></span><span class="gh">diff --git a/babel.config.js b/babel.config.js</span>
<span class="gh">index 2f4e1e8..51bd52b 100644</span>
<span class="gd">--- a/babel.config.js</span>
<span class="gi">+++ b/babel.config.js</span>
<span class="gu">@@ -1,6 +1,6 @@</span>
<span class="w"> </span>module.exports = function (api) {
<span class="w"> </span>  api.cache(true);
<span class="gd">-  const presets = [&#39;razzle/babel&#39;];</span>
<span class="gi">+  const presets = [&#39;razzle&#39;];</span>
<span class="w"> </span>  const plugins = [
<span class="w"> </span>    [
<span class="w"> </span>      &#39;react-intl&#39;, // React Intl extractor, required for the whole i18n infrastructure to work
</pre></div>
</div>
</section>
</section>
<section id="jest-is-downgraded-from-version-27-to-26">
<h3>Jest is downgraded from version 27 to 26<a class="headerlink" href="#jest-is-downgraded-from-version-27-to-26" title="Link to this heading">#</a></h3>
<p>Razzle 4 internal API is only compatible with Jest up to version 26.</p>
</section>
<section id="upgrade-to-use-yarn-3">
<h3>Upgrade to use yarn 3<a class="headerlink" href="#upgrade-to-use-yarn-3" title="Link to this heading">#</a></h3>
<p>Volto was using the old, classic yarn (v1).
It has become quite obsolete and yarn has evolved a lot in recent years.
We updated Volto to be able to use it, however some changes have to be made in your project's configuration:</p>
<ol class="arabic">
<li><p>Enable yarn 3 in your project, adding <code class="docutils literal notranslate"><span class="pre">.yarnrc.yml</span></code>:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">defaultSemverRangePrefix</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&quot;</span>

<span class="nt">nodeLinker</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">node-modules</span>
</pre></div>
</div>
<p>Then, if you are using Node.js &gt;=16.10 run:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>corepack<span class="w"> </span><span class="nb">enable</span>
yarn<span class="w"> </span><span class="nb">set</span><span class="w"> </span>version<span class="w"> </span><span class="m">3</span>.2.3
</pre></div>
</div>
<p>Corepack isn't included with Node.js in versions before 16.10.
To address that, run:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>npm<span class="w"> </span>i<span class="w"> </span>-g<span class="w"> </span>corepack
</pre></div>
</div>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>It is highly recommended that you use the latest Node.js 16.</p>
</div>
</li>
<li><p>Change your root project <code class="docutils literal notranslate"><span class="pre">Makefile</span></code> to include these commands:</p>
<div class="highlight-diff notranslate"><div class="highlight"><pre><span></span><span class="gi">+.PHONY: install</span>
<span class="gi">+install: ## Install the frontend</span>
<span class="gi">+       @echo &quot;Install frontend&quot;</span>
<span class="gi">+       $(MAKE) omelette</span>
<span class="gi">+       $(MAKE) preinstall</span>
<span class="gi">+       yarn install</span>
<span class="gi">+</span>
<span class="gi">+.PHONY: preinstall</span>
<span class="gi">+preinstall: ## Preinstall task, checks if missdev (mrs-developer) is present and runs it</span>
<span class="gi">+       if [ -f $$(pwd)/mrs.developer.json ]; then make develop; fi</span>

<span class="gi">+</span>
<span class="gi">+.PHONY: develop</span>
<span class="gi">+develop: ## Runs missdev in the local project (mrs.developer.json should be present)</span>
<span class="gi">+       npx -p mrs-developer missdev --config=jsconfig.json --output=addons --fetch-https</span>
<span class="gi">+</span>
<span class="gi">+.PHONY: omelette</span>
<span class="gi">+omelette: ## Creates the omelette folder that contains a link to the installed version of Volto (a softlink pointing to node_modules/@plone/volto)</span>
<span class="gi">+       if [ ! -d omelette ]; then ln -sf node_modules/@plone/volto omelette; fi</span>
<span class="gi">+</span>
<span class="gi">+.PHONY: patches</span>
<span class="gi">+patches:</span>
<span class="gi">+       /bin/bash patches/patchit.sh &gt; /dev/null 2&gt;&amp;1 ||true</span>
</pre></div>
</div>
<p>You can copy the file over to your project if you have not made any amendment to it.</p>
</li>
<li><p>Change your <code class="docutils literal notranslate"><span class="pre">package.json</span></code> scripts section:</p>
<div class="highlight-diff notranslate"><div class="highlight"><pre><span></span><span class="w"> </span> &quot;version&quot;: &quot;1.0.0&quot;,
<span class="w"> </span> &quot;scripts&quot;: {
<span class="w"> </span>   &quot;start&quot;: &quot;razzle start&quot;,
<span class="gd">-    &quot;preinstall&quot;: &quot;if [ -f $(pwd)/mrs.developer.json ]; then if [ -f $(pwd)/node_modules/.bin/missdev ]; then yarn develop; else yarn develop:npx; fi; fi&quot;,</span>
<span class="gd">-    &quot;omelette&quot;: &quot;if [ ! -d omelette ]; then ln -sf node_modules/@plone/volto omelette; fi&quot;,</span>
<span class="gd">-    &quot;patches&quot;: &quot;/bin/bash patches/patchit.sh &gt; /dev/null 2&gt;&amp;1 ||true&quot;,</span>
<span class="gd">-    &quot;postinstall&quot;: &quot;yarn omelette &amp;&amp; yarn patches&quot;,</span>
<span class="gi">+    &quot;postinstall&quot;: &quot;make omelette &amp;&amp; make patches&quot;,</span>
<span class="gd">-    &quot;patches&quot;: &quot;/bin/bash patches/patchit.sh &gt; /dev/null 2&gt;&amp;1 ||true&quot;,</span>
</pre></div>
</div>
<p>Yarn 3 no longer supports inline bash scripts in the <code class="docutils literal notranslate"><span class="pre">scripts</span></code> section.
It does not support the <code class="docutils literal notranslate"><span class="pre">preinstall</span></code> lifecycle state, so we cannot trigger things while we run <code class="docutils literal notranslate"><span class="pre">yarn</span> <span class="pre">install</span></code> or just <code class="docutils literal notranslate"><span class="pre">yarn</span></code>.
As a result, we moved all the commands related to the <code class="docutils literal notranslate"><span class="pre">preinstall</span></code> actions into <code class="docutils literal notranslate"><span class="pre">Makefile</span></code>, then updated the calls in both files as shown above.</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>After making the changes in this step, we will have to modify our development workflow, especially if we use actions that happened during the <code class="docutils literal notranslate"><span class="pre">preinstall</span></code> state.
The most relevant one is updating the code that is managed by <code class="docutils literal notranslate"><span class="pre">mrs-developer</span></code>.
If you follow the code above, you'll need to call these <code class="docutils literal notranslate"><span class="pre">Makefile</span></code> commands before each <code class="docutils literal notranslate"><span class="pre">yarn</span> <span class="pre">install</span></code>.
It's recommended to use the <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">install</span></code> command instead of just <code class="docutils literal notranslate"><span class="pre">yarn</span></code> or <code class="docutils literal notranslate"><span class="pre">yarn</span> <span class="pre">install</span></code>.</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>make<span class="w"> </span>install
</pre></div>
</div>
<p>Remember to update your CI scripts accordingly.</p>
</div>
</li>
<li><p>Yarn 3 does not allow the use of commands not declared as direct dependencies.
In your project, you should add <code class="docutils literal notranslate"><span class="pre">razzle</span></code> and <code class="docutils literal notranslate"><span class="pre">&#64;plone/scripts</span></code> as development dependencies:</p>
<div class="highlight-diff notranslate"><div class="highlight"><pre><span></span>devDependencies: {
<span class="gi">+        &quot;@plone/scripts&quot;: &quot;^2.1.2&quot;,</span>
<span class="gi">+        &quot;razzle&quot;: &quot;4.2.17&quot;,</span>
</pre></div>
</div>
</li>
<li><p>Replace your project <code class="docutils literal notranslate"><span class="pre">yarn.lock</span></code> with Volto's, then run <code class="docutils literal notranslate"><span class="pre">yarn</span></code> again.</p></li>
</ol>
</section>
<section id="removed-date-fns-from-build">
<h3>Removed <code class="docutils literal notranslate"><span class="pre">date-fns</span></code> from build<a class="headerlink" href="#removed-date-fns-from-build" title="Link to this heading">#</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">date-fns</span></code> library has been removed from Volto's dependencies.
It was in the build because <code class="docutils literal notranslate"><span class="pre">Cypress</span></code> depended on it.
After <code class="docutils literal notranslate"><span class="pre">Cypress</span></code> was upgraded, it no longer depends on <code class="docutils literal notranslate"><span class="pre">date-fns</span></code>.
If your project still depends on <code class="docutils literal notranslate"><span class="pre">date-fns</span></code>, add it as a dependency of your project.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The <code class="docutils literal notranslate"><span class="pre">date-fns</span></code> version present in the build was quite old (1.x.x series).
Beware when using an updated version (2.x.x), as it may contain some breaking changes.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference external" href="https://dockyard.com/blog/2020/02/14/you-probably-don-t-need-moment-js-anymore">https://dockyard.com/blog/2020/02/14/you-probably-don-t-need-moment-js-anymore</a></p>
</div>
<p>If you need to format dates in Volto, it's recommended to use the <code class="docutils literal notranslate"><span class="pre">FormattedDate</span></code> component in Volto core.
It uses modern recommendations for date formatting on the web.</p>
</div>
</section>
<section id="upgraded-core-to-use-cypress-11">
<h3>Upgraded core to use Cypress 11<a class="headerlink" href="#upgraded-core-to-use-cypress-11" title="Link to this heading">#</a></h3>
<p>Cypress has overhauled their testing application, beginning with Cypress 10.
It now includes native support of Apple silicon chip computers.
This dramatically improved the launch and test times on those machines.
It also includes the new &quot;component&quot; testing feature that might be appealing in the near future.</p>
<p>The only drawback is that they also overhauled the configuration, forcing migration from old configuration based on JSON files to a better JavaScript-based one.
They also changed and renamed some options.
Luckily, Cypress provides both good reporting when an old configuration is in place, and an interactive migration wizard.</p>
<p>Core configuration has been updated to use Cypress 11.
You will need to update your Cypress configuration from versions older than Cypress 10 if you want to use core's Cypress 11.
If you have already updated your configuration to use Cypress 10 or later in a previous upgrade, your configuration might already work with Cypress 11.
It is possible that forcing your project to use older versions might still work with old configurations.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p>See <a class="reference external" href="https://docs.cypress.io/app/references/migration-guide#Migrating-to-Cypress-100">https://docs.cypress.io/app/references/migration-guide#Migrating-to-Cypress-100</a> for more information.</p>
</div>
</section>
<section id="the-complete-configuration-registry-is-passed-to-the-add-ons-and-the-project-configuration-pipeline">
<h3>The complete configuration registry is passed to the add-ons and the project configuration pipeline<a class="headerlink" href="#the-complete-configuration-registry-is-passed-to-the-add-ons-and-the-project-configuration-pipeline" title="Link to this heading">#</a></h3>
<p>The core in versions prior to Volto 16.0.0-alpha.22 passed a simplified version of the configuration registry—in fact, a plain object primitive—to the add-on list and project configuration pipeline.</p>
<p>From Volto 16.0.0-alpha.22 onwards, the full configuration registry is passed through the pipeline.
This allows you to have access to the advanced registry features, like the new component registry.
You may want to update your configuration in case you updated the primitive using basic object operators (spread, and others) in the configuration object itself.
For example, this will not work anymore:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="k">return</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="p">...</span><span class="nx">config</span><span class="p">,</span>
<span class="w">  </span><span class="nx">blocks</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="p">...</span><span class="nx">config</span><span class="p">.</span><span class="nx">blocks</span><span class="p">,</span>
<span class="w">    </span><span class="nx">blocksConfig</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="p">...</span><span class="nx">config</span><span class="p">.</span><span class="nx">blocks</span><span class="p">.</span><span class="nx">blocksConfig</span><span class="p">,</span>
<span class="w">      </span><span class="p">...</span><span class="nx">addonBlocks</span><span class="p">,</span>
<span class="w">      </span><span class="nx">listing</span><span class="o">:</span><span class="w"> </span><span class="nx">listing</span><span class="p">(</span><span class="nx">config</span><span class="p">),</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">  </span><span class="p">},</span>
<span class="w">  </span><span class="nx">views</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="p">...</span><span class="nx">config</span><span class="p">.</span><span class="nx">views</span><span class="p">,</span>
<span class="w">    </span><span class="nx">contentTypesViews</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="p">...</span><span class="nx">config</span><span class="p">.</span><span class="nx">views</span><span class="p">.</span><span class="nx">contentTypesViews</span><span class="p">,</span>
<span class="w">      </span><span class="nx">Folder</span><span class="o">:</span><span class="w"> </span><span class="nx">NewsAndEvents</span><span class="p">,</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">  </span><span class="p">},</span>
<span class="p">};</span>
</pre></div>
</div>
<p>Using the spread operator while you mutate the configuration object is not required.
You can mutate the object properties directly, like:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kd">const</span><span class="w"> </span><span class="nx">applyConfig</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">config</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">config</span><span class="p">.</span><span class="nx">blocks</span><span class="p">.</span><span class="nx">blocksConfig</span><span class="p">.</span><span class="nx">testBlock</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">testBlock</span><span class="p">;</span>
<span class="w">  </span><span class="nx">config</span><span class="p">.</span><span class="nx">blocks</span><span class="p">.</span><span class="nx">blocksConfig</span><span class="p">.</span><span class="nx">listing</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">listing</span><span class="p">(</span><span class="nx">config</span><span class="p">);</span>
<span class="w">  </span><span class="nx">config</span><span class="p">.</span><span class="nx">views</span><span class="p">.</span><span class="nx">contentTypesViews</span><span class="p">.</span><span class="nx">Folder</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">NewsAndEvents</span><span class="p">;</span>

<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="nx">config</span><span class="p">;</span>
<span class="p">};</span>
</pre></div>
</div>
<p>The other rules apply, so make sure you return the <code class="docutils literal notranslate"><span class="pre">config</span></code> object after mutating it.</p>
</section>
<section id="refactor-the-component-registry-api-in-the-configuration-registry">
<h3>Refactor the component registry API in the configuration registry<a class="headerlink" href="#refactor-the-component-registry-api-in-the-configuration-registry" title="Link to this heading">#</a></h3>
<p>After a period of testing, this experimental feature has been refactored to adequate existing requirements.</p>
<section id="renamed-registry-resolve-to-registry-getcomponent">
<h4>Renamed <code class="docutils literal notranslate"><span class="pre">registry.resolve</span></code> to <code class="docutils literal notranslate"><span class="pre">registry.getComponent</span></code><a class="headerlink" href="#renamed-registry-resolve-to-registry-getcomponent" title="Link to this heading">#</a></h4>
<div class="highlight-diff notranslate"><div class="highlight"><pre><span></span><span class="gd">- registry.resolve(componentName)?.component;</span>
<span class="gi">+ registry.getComponent(componentName)?.component;</span>
</pre></div>
</div>
</section>
<section id="registry-getcomponent-signature-changes">
<h4><code class="docutils literal notranslate"><span class="pre">registry.getComponent</span></code> signature changes<a class="headerlink" href="#registry-getcomponent-signature-changes" title="Link to this heading">#</a></h4>
<p>It maintains signature compatibility with <code class="docutils literal notranslate"><span class="pre">registry.resolve</span></code>, but introduces new arguments for greater flexibility.</p>
<p>See documentation for more information.</p>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version Volto: </span>16.0.0-alpha.23</p>
<p>The <code class="docutils literal notranslate"><span class="pre">component</span></code> argument changed in 16.0.0-alpha.23.
The <code class="docutils literal notranslate"><span class="pre">component</span></code> key has been flattened for simplification and now it's mapped directly to the <code class="docutils literal notranslate"><span class="pre">component</span></code> argument of <code class="docutils literal notranslate"><span class="pre">registerComponent</span></code>:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="nx">config</span><span class="p">.</span><span class="nx">registerComponent</span><span class="p">({</span>
<span class="w">    </span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Teaser&#39;</span><span class="p">,</span>
<span class="w">    </span><span class="nx">component</span><span class="o">:</span><span class="w"> </span><span class="nx">MyTeaserDefaultComponent</span><span class="p">,</span>
<span class="w">  </span><span class="p">});</span>
</pre></div>
</div>
</div>
</section>
</section>
<section id="main-workflow-change-menu-changed-from-pastanaga-ui-simplification-to-classic-ui-plone-implementation">
<h3>Main workflow change menu changed from Pastanaga UI simplification to Classic UI Plone implementation<a class="headerlink" href="#main-workflow-change-menu-changed-from-pastanaga-ui-simplification-to-classic-ui-plone-implementation" title="Link to this heading">#</a></h3>
<p>Pastanaga UI envisioned a simplification of the classic Plone workflow change dropdown.
The transition names were too cryptic, and it was difficult to infer the destination state from them.
This simplification was meant to show the destination state as a transition name, simplifying the user experience.</p>
<p>This vision was partially implemented in Volto, bypassing the information coming from Plone, waiting for the next step: introduce this vision in Plone core (thus, change the workflow definitions) including this simplified mode, but maintaining the complete mode with the full transition names.</p>
<p>Since this never happened, we are going back to the Classic UI mode, so the dropdown will show the transition names.
When the simplified vision is implemented, we will revisit it.</p>
<section id="move-layout-constants-to-config-views-layoutviewsnamesmapping">
<h4>Move Layout constants to <code class="docutils literal notranslate"><span class="pre">config.views.layoutViewsNamesMapping</span></code>.<a class="headerlink" href="#move-layout-constants-to-config-views-layoutviewsnamesmapping" title="Link to this heading">#</a></h4>
<p>The <code class="docutils literal notranslate"><span class="pre">constants</span></code> layout module was removed in favor of an object in the configuration registry, <code class="docutils literal notranslate"><span class="pre">config.views.layoutViewsNamesMapping</span></code>.</p>
<p>If you added or modified the Plone layout views literal mapping, you should now use this setting, and you can remove the module shadowing customization.</p>
<p>You can now add an i18n <code class="docutils literal notranslate"><span class="pre">id</span></code> for any layout that you create as well, since the <code class="docutils literal notranslate"><span class="pre">Display</span></code> component is now i18n aware.</p>
<p>This is the structure of <code class="docutils literal notranslate"><span class="pre">config.views.layoutViewsNamesMapping</span></code>:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="k">export</span><span class="w"> </span><span class="kd">const</span><span class="w"> </span><span class="nx">layoutViewsNamesMapping</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">album_view</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Album view&#39;</span><span class="p">,</span>
<span class="w">  </span><span class="nx">event_listing</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Event listing&#39;</span><span class="p">,</span>
<span class="w">  </span><span class="nx">full_view</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;All content&#39;</span><span class="p">,</span>
<span class="w">  </span><span class="nx">listing_view</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Listing view&#39;</span><span class="p">,</span>
<span class="w">  </span><span class="nx">summary_view</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Summary view&#39;</span><span class="p">,</span>
<span class="w">  </span><span class="nx">tabular_view</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Tabular view&#39;</span><span class="p">,</span>
<span class="w">  </span><span class="nx">layout_view</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Mosaic layout&#39;</span><span class="p">,</span>
<span class="w">  </span><span class="nx">document_view</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Document view&#39;</span><span class="p">,</span>
<span class="w">  </span><span class="nx">folder_listing</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Folder listing&#39;</span><span class="p">,</span>
<span class="w">  </span><span class="nx">newsitem_view</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;News item view&#39;</span><span class="p">,</span>
<span class="w">  </span><span class="nx">link_redirect_view</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Link redirect view&#39;</span><span class="p">,</span>
<span class="w">  </span><span class="nx">file_view</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;File view&#39;</span><span class="p">,</span>
<span class="w">  </span><span class="nx">image_view</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Image view&#39;</span><span class="p">,</span>
<span class="w">  </span><span class="nx">event_view</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Event view&#39;</span><span class="p">,</span>
<span class="w">  </span><span class="nx">view</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Default view&#39;</span><span class="p">,</span>
<span class="p">};</span>
</pre></div>
</div>
<p>The keys are the name of the Plone layout, and the values are the i18n <code class="docutils literal notranslate"><span class="pre">id</span></code> (English as default message).</p>
<p>Then you can add the i18n message in your project's <code class="docutils literal notranslate"><span class="pre">src/config.js</span></code> or your add-on's <code class="docutils literal notranslate"><span class="pre">src/index.js</span></code>:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">defineMessages</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;react-intl&#39;</span><span class="p">;</span>
<span class="nx">defineMessages</span><span class="p">({</span>
<span class="w">  </span><span class="nx">album_view</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Album view&#39;</span><span class="p">,</span>
<span class="w">    </span><span class="nx">defaultMessage</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Album view&#39;</span><span class="p">,</span>
<span class="w">  </span><span class="p">},</span>
<span class="p">})</span>
</pre></div>
</div>
</section>
</section>
<section id="react-window-is-no-longer-a-volto-dependency">
<h3><code class="docutils literal notranslate"><span class="pre">react-window</span></code> is no longer a Volto dependency<a class="headerlink" href="#react-window-is-no-longer-a-volto-dependency" title="Link to this heading">#</a></h3>
<p>Volto used this library to generate dynamic &quot;windowed/virtualized&quot; select widget options.
It moved to use <code class="docutils literal notranslate"><span class="pre">react-virtualized</span></code> instead of <code class="docutils literal notranslate"><span class="pre">react-window</span></code> because it provides a broader feature set that Volto requires.
If you were using it in your project, you will need to include it as a direct dependency from now on.</p>
</section>
<section id="change-the-way-the-style-wrapper-is-enabled-and-how-to-add-the-styles-field">
<h3>Change the way the style wrapper is enabled and how to add the <code class="docutils literal notranslate"><span class="pre">styles</span></code> field<a class="headerlink" href="#change-the-way-the-style-wrapper-is-enabled-and-how-to-add-the-styles-field" title="Link to this heading">#</a></h3>
<p>During the alpha stage, we received feedback and determined that it's too difficult to deal with a separate way to define (and extend) the styles schema.
We decided it is best to deal with it as any other schema field and enhance it via schema enhancers.
This improves the developer experience, especially when dealing with variations that can provide their own styles and other schema fields.</p>
<div class="deprecated">
<p><span class="versionmodified deprecated">Deprecated since version Volto: </span>16.0.0-alpha.46</p>
<p>The options <code class="docutils literal notranslate"><span class="pre">enableStyling</span></code> and <code class="docutils literal notranslate"><span class="pre">stylesSchema</span></code> no longer work.
You need to provide them using your own block schema.
If you are extending an existing one, you should add it as a normal <code class="docutils literal notranslate"><span class="pre">schemaEnhancer</span></code> modification.</p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p>See <a class="reference external" href="https://6.docs.plone.org/volto/blocks/block-style-wrapper.html">https://6.docs.plone.org/volto/blocks/block-style-wrapper.html</a> for more documentation.</p>
</div>
</section>
<section id="sentry-integration-moved-from-volto-core-to-add-on">
<h3>Sentry integration moved from Volto core to add-on<a class="headerlink" href="#sentry-integration-moved-from-volto-core-to-add-on" title="Link to this heading">#</a></h3>
<p>The Sentry integration was implemented in Volto core at a time when Volto did not provide a good add-on story.
Since then, the add-on story has improved.
It now makes sense to extract this feature into its own add-on.
Integrate Sentry in your app with <a class="reference external" href="https://www.npmjs.com/package/&#64;plone-collective/volto-sentry"><code class="docutils literal notranslate"><span class="pre">&#64;plone-collective/volto-sentry</span></code></a>.</p>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version Volto: </span>16.0.0.alpha.45</p>
</div>
</section>
<section id="upgrade-husky-to-latest-version">
<h3>Upgrade <code class="docutils literal notranslate"><span class="pre">husky</span></code> to latest version<a class="headerlink" href="#upgrade-husky-to-latest-version" title="Link to this heading">#</a></h3>
<p>In case you use <code class="docutils literal notranslate"><span class="pre">husky</span></code> in your projects (like Volto does), you must adapt to the new way that <code class="docutils literal notranslate"><span class="pre">husky</span></code> defines <a class="reference external" href="https://6.docs.plone.org/glossary.html#term-hooks" title="(in Plone Documentation v6)"><span class="xref std std-term">hooks</span></a>.</p>
<p>You will have to add a script in your <code class="docutils literal notranslate"><span class="pre">package.json</span></code> file called <code class="docutils literal notranslate"><span class="pre">prepare</span></code>:</p>
<div class="highlight-diff notranslate"><div class="highlight"><pre><span></span><span class="w"> </span>    &quot;build&quot;: &quot;razzle build --noninteractive&quot;,
<span class="gi">+    &quot;prepare&quot;: &quot;husky install&quot;,</span>
<span class="w"> </span>    &quot;test&quot;: &quot;razzle test --maxWorkers=50%&quot;,
</pre></div>
</div>
<p>After executing it, <code class="docutils literal notranslate"><span class="pre">husky</span></code> will install itself in the <code class="docutils literal notranslate"><span class="pre">.husky</span></code> folder of your project.
Then you need to create the default hook scripts in <code class="docutils literal notranslate"><span class="pre">.husky</span></code> that you want to execute.
You can copy over the Volto ones (take a look in Volto's <code class="docutils literal notranslate"><span class="pre">.husky</span></code> folder).</p>
</section>
<section id="better-defaults-handling">
<h3>Better defaults handling<a class="headerlink" href="#better-defaults-handling" title="Link to this heading">#</a></h3>
<div class="versionadded">
<p><span class="versionmodified added">Added in version Volto: </span>16.0.0-alpha.51</p>
<p>Prior to this version, we handled default values in schemas for blocks settings in a faulty and buggy manner.
The state inferred was not deterministic and depended on the fields with defaults present.</p>
<p>To correct this and allow Volto to handle defaults in a correct way, we have to pass down an additional prop to the <code class="docutils literal notranslate"><span class="pre">BlockDataForm</span></code> whenever we use it in our custom or add-on code, as in the following example.</p>
<div class="highlight-jsx notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="w">  </span><span class="p">&lt;</span><span class="nt">BlockDataForm</span>
<span class="linenos"> 2</span><span class="w">    </span><span class="na">schema</span><span class="o">=</span><span class="p">{</span><span class="nx">schema</span><span class="p">}</span>
<span class="linenos"> 3</span><span class="w">    </span><span class="na">title</span><span class="o">=</span><span class="p">{</span><span class="nx">schema</span><span class="p">.</span><span class="nx">title</span><span class="p">}</span>
<span class="linenos"> 4</span><span class="w">    </span><span class="na">onChangeField</span><span class="o">=</span><span class="p">{(</span><span class="nx">id</span><span class="p">,</span><span class="w"> </span><span class="nx">value</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="linenos"> 5</span><span class="w">      </span><span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">onChangeBlock</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">block</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
<span class="linenos"> 6</span><span class="w">        </span><span class="p">...</span><span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">data</span><span class="p">,</span>
<span class="linenos"> 7</span><span class="w">        </span><span class="p">[</span><span class="nx">id</span><span class="p">]</span><span class="o">:</span><span class="w"> </span><span class="nx">value</span><span class="p">,</span>
<span class="linenos"> 8</span><span class="w">      </span><span class="p">});</span>
<span class="linenos"> 9</span><span class="w">    </span><span class="p">}}</span>
<span class="hll"><span class="linenos">10</span><span class="w">    </span><span class="na">onChangeBlock</span><span class="o">=</span><span class="p">{</span><span class="nx">onChangeBlock</span><span class="p">}</span>
</span><span class="linenos">11</span><span class="w">    </span><span class="na">formData</span><span class="o">=</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">data</span><span class="p">}</span>
<span class="linenos">12</span><span class="w">    </span><span class="na">block</span><span class="o">=</span><span class="p">{</span><span class="nx">block</span><span class="p">}</span>
<span class="linenos">13</span><span class="w">  </span><span class="p">/&gt;</span>
</pre></div>
</div>
</div>
</section>
</section>
<section id="upgrading-to-volto-15-x-x">
<span id="volto-upgrade-guide-15-x-x"></span><h2>Upgrading to Volto 15.x.x<a class="headerlink" href="#upgrading-to-volto-15-x-x" title="Link to this heading">#</a></h2>
<section id="updated-react-cookie-library">
<h3>Updated react-cookie library<a class="headerlink" href="#updated-react-cookie-library" title="Link to this heading">#</a></h3>
<p>This fixes a use case where cookies could potentially be messed up if your site is under heavy load.
The old <code class="docutils literal notranslate"><span class="pre">react-cookie</span></code> library was not able to handle correctly the <a class="reference external" href="https://6.docs.plone.org/glossary.html#term-SSR" title="(in Plone Documentation v6)"><span class="xref std std-term">SSR</span></a> part, specially the one that
is shared in &quot;Nobody's land&quot; (not SSR, not under the React tree, actions, <a class="reference external" href="https://6.docs.plone.org/glossary.html#term-Redux-middleware" title="(in Plone Documentation v6)"><span class="xref std std-term">Redux middleware</span></a>).
Upgrading to the latest version of the <code class="docutils literal notranslate"><span class="pre">react-cookie</span></code> suite (<code class="docutils literal notranslate"><span class="pre">react-cookie</span></code>, <code class="docutils literal notranslate"><span class="pre">universal-cookie-express</span></code> and <code class="docutils literal notranslate"><span class="pre">universal-cookie</span></code>) will fix it.</p>
<p>You have to take action only in case you did some development involving cookies. The <code class="docutils literal notranslate"><span class="pre">react-cookie</span></code>
library has been updated to the latest version and its companion libraries
(<code class="docutils literal notranslate"><span class="pre">universal-cookie-express</span></code> and <code class="docutils literal notranslate"><span class="pre">universal-cookie</span></code>), and the API changed over the years. Please look into the documentation of these packages to get a grasp on the changes:</p>
<p><a class="reference external" href="https://www.npmjs.com/package/react-cookie">https://www.npmjs.com/package/react-cookie</a></p>
<p><a class="reference external" href="https://www.npmjs.com/package/universal-cookie-express">https://www.npmjs.com/package/universal-cookie-express</a></p>
<p><a class="reference external" href="https://www.npmjs.com/package/universal-cookie">https://www.npmjs.com/package/universal-cookie</a></p>
</section>
<section id="update-your-rich-text-editor-configuration">
<h3>Update your Rich Text Editor configuration<a class="headerlink" href="#update-your-rich-text-editor-configuration" title="Link to this heading">#</a></h3>
<p>DraftJS libraries are now lazy-loaded, and some changes have been introduced in the way that the rich text editor is bootstrapped. In case you have extended the rich text editor configuration in your projects you have to update your <code class="docutils literal notranslate"><span class="pre">src/config.js</span></code>:</p>
<p>The old way:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="k">export</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">applyConfig</span><span class="p">(</span><span class="nx">config</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">config</span><span class="p">.</span><span class="nx">settings</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="p">...</span><span class="nx">config</span><span class="p">.</span><span class="nx">settings</span><span class="p">,</span>
<span class="w">    </span><span class="nx">listBlockTypes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
<span class="w">      </span><span class="p">...</span><span class="nx">config</span><span class="p">.</span><span class="nx">settings</span><span class="p">.</span><span class="nx">listBlockTypes</span><span class="p">,</span>
<span class="w">      </span><span class="s1">&#39;my-list-item&#39;</span><span class="p">,</span>
<span class="w">    </span><span class="p">]</span>
<span class="w">  </span><span class="p">}</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="nx">config</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The new way:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="k">export</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">applyConfig</span><span class="p">(</span><span class="nx">config</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">richtextEditorSettings</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">config</span><span class="p">.</span><span class="nx">settings</span><span class="p">;</span>
<span class="w">  </span><span class="nx">config</span><span class="p">.</span><span class="nx">settings</span><span class="p">.</span><span class="nx">richtextEditorSettings</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">props</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">richtextEditorSettings</span><span class="p">(</span><span class="nx">props</span><span class="p">);</span>
<span class="w">    </span><span class="nx">result</span><span class="p">.</span><span class="nx">listBlockTypes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[...</span><span class="nx">result</span><span class="p">.</span><span class="nx">listBlockTypes</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;my-list-item&#39;</span><span class="p">]</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nx">result</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="nx">config</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="language-switcher-no-longer-takes-care-of-the-sync-of-the-language">
<h3>Language Switcher no longer takes care of the sync of the language<a class="headerlink" href="#language-switcher-no-longer-takes-care-of-the-sync-of-the-language" title="Link to this heading">#</a></h3>
<p>This responsibility has been transferred in full to the API <a class="reference external" href="https://6.docs.plone.org/glossary.html#term-Redux-middleware" title="(in Plone Documentation v6)"><span class="xref std std-term">Redux middleware</span></a>, if you have shadowed either <code class="docutils literal notranslate"><span class="pre">LanguageSwitcher</span></code> or <code class="docutils literal notranslate"><span class="pre">MultilingualRedirector</span></code> (during the alpha phase) components, please update them.
Not doing so won't break your project, but they won't get the latest features and bug fixes, and probably will update the language cookie twice.</p>
</section>
<section id="linkview-component-markup-change">
<h3>LinkView component markup change<a class="headerlink" href="#linkview-component-markup-change" title="Link to this heading">#</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">LinkView</span></code> component with the literal <code class="docutils literal notranslate"><span class="pre">The</span> <span class="pre">link</span> <span class="pre">address</span> <span class="pre">is:</span> <span class="pre">&lt;the</span> <span class="pre">link&gt;</span></code> is now wrapped in a <code class="docutils literal notranslate"><span class="pre">&lt;p&gt;</span></code> block instead of a <code class="docutils literal notranslate"><span class="pre">&lt;span&gt;</span></code> block.
Please check if you have a CSS bound to that node and adjust accordingly.</p>
</section>
<section id="rename-core-sandbox-fixture-to-coresandbox">
<h3>Rename core-sandbox fixture to coresandbox<a class="headerlink" href="#rename-core-sandbox-fixture-to-coresandbox" title="Link to this heading">#</a></h3>
<p>Only applying to Volto core development, for the sake of consistency with the other fixtures, <code class="docutils literal notranslate"><span class="pre">core-sandbox</span></code> fixture it's been renamed to <code class="docutils literal notranslate"><span class="pre">coresandbox</span></code> in all scripts and related file paths and filenames.</p>
</section>
<section id="extend-the-original-intent-and-rename-razzle-testing-addons-to-addons">
<h3>Extend the original intent and rename <code class="docutils literal notranslate"><span class="pre">RAZZLE_TESTING_ADDONS</span></code> to <code class="docutils literal notranslate"><span class="pre">ADDONS</span></code><a class="headerlink" href="#extend-the-original-intent-and-rename-razzle-testing-addons-to-addons" title="Link to this heading">#</a></h3>
<p>Originally the <code class="docutils literal notranslate"><span class="pre">RAZZLE_TESTING_ADDONS</span></code> environment variable was an escape hatch to load some components and configurations not present in vanilla Volto.
One could enable them at will.
Initially thought as fixtures for acceptance tests, the original intent has been repurposed and extended to just <code class="docutils literal notranslate"><span class="pre">ADDONS</span></code>.
One could extend the <code class="docutils literal notranslate"><span class="pre">ADDONS</span></code> list configuration via this environment variable.</p>
<p>It works for published packages, such as those add-ons that live in the <code class="docutils literal notranslate"><span class="pre">packages</span></code> folder locally to your project.
This is similar to the testing add-ons from vanilla Volto.</p>
</section>
<section id="remove-and-deprecate-lang-cookie">
<h3>Remove and deprecate <code class="docutils literal notranslate"><span class="pre">lang</span></code> cookie<a class="headerlink" href="#remove-and-deprecate-lang-cookie" title="Link to this heading">#</a></h3>
<p>Initially, Volto used a <code class="docutils literal notranslate"><span class="pre">lang</span></code> named cookie to keep track of the current language. However, Plone was using a cookie named <code class="docutils literal notranslate"><span class="pre">I18N_LANGUAGE</span></code> for the same purpose, we updated Volto to use both at some point. We decided to deprecate the <code class="docutils literal notranslate"><span class="pre">lang</span></code> one in favor of the used in Plone core. If someone relied on this cookie for some reason or feature, should change to use <code class="docutils literal notranslate"><span class="pre">I18N_LANGUAGE</span></code> instead.</p>
</section>
<section id="use-root-alias-instead-of">
<h3>Use <code class="docutils literal notranslate"><span class="pre">&#64;root</span></code> alias instead of <code class="docutils literal notranslate"><span class="pre">~</span></code><a class="headerlink" href="#use-root-alias-instead-of" title="Link to this heading">#</a></h3>
<p>A new <code class="docutils literal notranslate"><span class="pre">&#64;root</span></code> alias has been set up to replace the <code class="docutils literal notranslate"><span class="pre">~</span></code> alias.
Support for the <code class="docutils literal notranslate"><span class="pre">~</span></code> alias is still in place, but we now mark it as deprecated.
The use of <code class="docutils literal notranslate"><span class="pre">~</span></code> will be removed in Volto 16.</p>
<div class="deprecated">
<p><span class="versionmodified deprecated">Deprecated since version Volto: </span>15.0</p>
</div>
</section>
</section>
<section id="upgrading-to-volto-14-x-x">
<h2>Upgrading to Volto 14.x.x<a class="headerlink" href="#upgrading-to-volto-14-x-x" title="Link to this heading">#</a></h2>
<section id="revisited-rethought-and-refactored-seamless-mode">
<h3>Revisited, rethought and refactored seamless mode<a class="headerlink" href="#revisited-rethought-and-refactored-seamless-mode" title="Link to this heading">#</a></h3>
<p>Seamless mode was released as experimental in Volto 13. However, after a period of testing some issues were detected so the feature has been rethought and refactored.</p>
<p>If you want to take full advantage of seamless mode you should upgrade your backend to the latest <code class="docutils literal notranslate"><span class="pre">plone.restapi</span></code> (8.12.1 or greater) and <code class="docutils literal notranslate"><span class="pre">plone.rest</span></code> (2.0.0a1 or greater) versions.</p>
<p>If you were already using Seamless mode in your deployments, you should update them as explained in the deployment documentation (link just below).</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The proxy in development mode will only work using the new traversal <code class="docutils literal notranslate"><span class="pre">++api++</span></code>. You need to upgrade your development environment to include the requirements explained above.</p>
</div>
<p>Read the full documentation about Seamless mode: <a class="reference internal" href="../deploying/seamless-mode.html"><span class="doc">Seamless mode</span></a>.</p>
</section>
<section id="update-i18n-configuration-for-projects-and-add-ons">
<h3>Update i18n configuration for projects and add-ons<a class="headerlink" href="#update-i18n-configuration-for-projects-and-add-ons" title="Link to this heading">#</a></h3>
<p>The i18n script and infrastructure have been moved to their own package since we needed them
to be independent of Volto itself.
This was necessary for being able to use them from the
add-ons without having to install the whole Volto package (which is not possible).</p>
<p><code class="docutils literal notranslate"><span class="pre">&#64;plone/scripts</span></code> package is the placeholder of the script, which has also been improved
alongside the infrastructure (Babel config) for it to run.</p>
<p><strong>Steps for migration</strong>:</p>
<section id="projects">
<h4>Projects<a class="headerlink" href="#projects" title="Link to this heading">#</a></h4>
<p>In a project's <code class="docutils literal notranslate"><span class="pre">package.json</span></code> replace the <code class="docutils literal notranslate"><span class="pre">scripts</span></code> <code class="docutils literal notranslate"><span class="pre">i18n</span></code> line with this one:</p>
<div class="highlight-diff notranslate"><div class="highlight"><pre><span></span><span class="w"> </span>  &quot;scripts&quot;: {
<span class="gd">-    &quot;i18n&quot;: &quot;NODE_ENV=production node src/i18n.js&quot;</span>
<span class="gi">+    &quot;i18n&quot;: &quot;rm -rf build/messages &amp;&amp; NODE_ENV=production i18n&quot;</span>
<span class="gi">+  },</span>
</pre></div>
</div>
</section>
<section id="add-ons">
<h4>Add-ons<a class="headerlink" href="#add-ons" title="Link to this heading">#</a></h4>
<p>If you are an add-on maintainer, remove the <code class="docutils literal notranslate"><span class="pre">src/i18n.js</span></code> script, since it's useless.
Within the <code class="docutils literal notranslate"><span class="pre">scripts</span></code> section of <code class="docutils literal notranslate"><span class="pre">package.json</span></code> apply the following change:</p>
<div class="highlight-diff notranslate"><div class="highlight"><pre><span></span><span class="w"> </span>  &quot;scripts&quot;: {
<span class="gd">-    &quot;i18n&quot;: &quot;NODE_ENV=production node node_modules/@plone/volto/src/i18n.js&quot;,</span>
<span class="gi">+    &quot;i18n&quot;: &quot;rm -rf build/messages &amp;&amp; NODE_ENV=production i18n --addon&quot;,</span>
</pre></div>
</div>
<p>afterwards add this to the <code class="docutils literal notranslate"><span class="pre">dependencies</span></code> list:</p>
<div class="highlight-diff notranslate"><div class="highlight"><pre><span></span><span class="gi">+  &quot;dependencies&quot;: {</span>
<span class="gi">+    &quot;@plone/scripts&quot;: &quot;*&quot;</span>
<span class="w"> </span>  }
</pre></div>
</div>
<p>Apply the following diff to your add-on's <code class="docutils literal notranslate"><span class="pre">babel.config.js</span></code>:</p>
<div class="highlight-diff notranslate"><div class="highlight"><pre><span></span><span class="gd">-module.exports = require(&#39;@plone/volto/babel&#39;);</span>
<span class="gi">+module.exports = function (api) {</span>
<span class="gi">+  api.cache(true);</span>
<span class="gi">+  const presets = [&#39;razzle/babel&#39;];</span>
<span class="gi">+  const plugins = [</span>
<span class="gi">+    [</span>
<span class="gi">+      &#39;react-intl&#39;, // React Intl extractor, required for the whole i18n infrastructure to work</span>
<span class="gi">+      {</span>
<span class="gi">+        messagesDir: &#39;./build/messages/&#39;,</span>
<span class="gi">+      },</span>
<span class="gi">+    ],</span>
<span class="gi">+  ];</span>
<span class="gi">+</span>
<span class="gi">+  return {</span>
<span class="gi">+    plugins,</span>
<span class="gi">+    presets,</span>
<span class="gi">+  };</span>
<span class="gi">+};</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>For convenience the <code class="docutils literal notranslate"><span class="pre">i18n</span></code> script is now an executable in the Node.js environment.</p>
</div>
</section>
</section>
<section id="removal-of-the-old-configuration-system-based-on-imports">
<h3>Removal of the old configuration system based on imports<a class="headerlink" href="#removal-of-the-old-configuration-system-based-on-imports" title="Link to this heading">#</a></h3>
<p>As announced in the deprecation notice in Volto 12 release, from Volto 14 onwards, the old
configuration system based on imports will stop working. Migrate your Volto configuration
for your projects before upgrading to Volto 14.</p>
<p>More information: :ref:<code class="docutils literal notranslate"><span class="pre">frontend-upgrade-guide-volto-configuration-registry-label</span></code>.</p>
</section>
<section id="content-locking">
<h3>Content locking<a class="headerlink" href="#content-locking" title="Link to this heading">#</a></h3>
<p>Not really a breaking change, but it's worth noting it. By default, Volto 14 comes with
<a class="reference internal" href="../configuration/locking.html"><span class="doc">Locking support</span></a> enabled, if the backend supports it. Thus:</p>
<ul class="simple">
<li><p>Upgrade Plone RestAPI</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">plone.restapi</span></code>&gt;=<code class="docutils literal notranslate"><span class="pre">8.9.0</span></code> (Plone 5+)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">plone.restapi</span></code>&gt;=<code class="docutils literal notranslate"><span class="pre">7.4.0</span></code> (Plone 4)</p></li>
</ul>
</li>
<li><p>Update <code class="docutils literal notranslate"><span class="pre">plone:CORSPolicy</span></code> to include <code class="docutils literal notranslate"><span class="pre">Lock-Token</span></code> within <code class="docutils literal notranslate"><span class="pre">allow_headers</span></code>:</p></li>
</ul>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="w">  </span><span class="nt">&lt;plone:CORSPolicy</span>
<span class="w">    </span><span class="na">allow_origin=</span><span class="s">&quot;http://localhost:3000,http://127.0.0.1:3000&quot;</span>
<span class="w">    </span><span class="na">allow_methods=</span><span class="s">&quot;DELETE,GET,OPTIONS,PATCH,POST,PUT&quot;</span>
<span class="w">    </span><span class="na">allow_credentials=</span><span class="s">&quot;true&quot;</span>
<span class="w">    </span><span class="na">expose_headers=</span><span class="s">&quot;Content-Length,X-My-Header&quot;</span>
<span class="w">    </span><span class="na">allow_headers=</span><span class="s">&quot;Accept,Authorization,Content-Type,X-Custom-Header,Origin,Lock-Token&quot;</span>
<span class="w">    </span><span class="na">max_age=</span><span class="s">&quot;3600&quot;</span>
<span class="w">    </span><span class="nt">/&gt;</span>
</pre></div>
</div>
</section>
<section id="blocks-chooser-now-uses-the-title-instead-of-the-id-of-the-block-as-translation-source">
<h3>Blocks chooser now uses the title instead of the id of the block as translation source<a class="headerlink" href="#blocks-chooser-now-uses-the-title-instead-of-the-id-of-the-block-as-translation-source" title="Link to this heading">#</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">BlockChooser</span></code> component now uses the <code class="docutils literal notranslate"><span class="pre">title</span></code> of the block as source for translating
the block title. Before, it took the <code class="docutils literal notranslate"><span class="pre">id</span></code> of the block, which is utterly wrong and misleading. There is a chance that this change will trigger untranslated blocks titles in your projects and add-ons.</p>
</section>
<section id="variation-field-now-uses-the-title-instead-of-the-id-of-the-variation-as-translation-source">
<h3>Variation field now uses the title instead of the id of the variation as translation source<a class="headerlink" href="#variation-field-now-uses-the-title-instead-of-the-id-of-the-variation-as-translation-source" title="Link to this heading">#</a></h3>
<p>Following the same convention as the above change, <code class="docutils literal notranslate"><span class="pre">Variation</span></code> field coming from the block enhancers now uses the <code class="docutils literal notranslate"><span class="pre">title</span></code> of the block as source for translating
the variation title. Before, it took the <code class="docutils literal notranslate"><span class="pre">id</span></code> of the block, which as stated before, is wrong and misleading. There is a chance that  this change will trigger untranslated variation titles in your projects and add-ons.</p>
</section>
<section id="listing-block-no-longer-retrieve-fullobjects-by-default">
<h3>Listing block no longer retrieve fullobjects by default<a class="headerlink" href="#listing-block-no-longer-retrieve-fullobjects-by-default" title="Link to this heading">#</a></h3>
<p>The query used by the listing block always used the <code class="docutils literal notranslate"><span class="pre">fullobjects</span></code> flag, which fully serialized (and thus, wake from the db) the resultant response items. This was causing performance issues. From Volto 14, the results will get the normal catalog query metadata results. You'll need to adapt your code to get the appropriate data if required and/or use the metadata counterparts. If your custom code depends on this behavior and you don't have time to adapt now, there's a scape hatch: set an additional <code class="docutils literal notranslate"><span class="pre">fullobjects</span></code> key to <code class="docutils literal notranslate"><span class="pre">true</span></code> per variation in the variation of the listing block config object:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="w">    </span><span class="nx">variations</span><span class="o">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">      </span><span class="p">{</span>
<span class="w">        </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;default&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="nx">isDefault</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">        </span><span class="nx">title</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Default&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="nx">template</span><span class="o">:</span><span class="w"> </span><span class="nx">DefaultListingBlockTemplate</span><span class="p">,</span>
<span class="w">        </span><span class="nx">fullobjects</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">    </span><span class="p">]</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This feature needs at least <code class="docutils literal notranslate"><span class="pre">plone.restapi</span> <span class="pre">&gt;=</span> <span class="pre">8.13.0</span></code> and <code class="docutils literal notranslate"><span class="pre">plone.volto</span> <span class="pre">3.1a4</span></code>. You need to update the catalog from your existing objects in your database, if you have already a production site in place, in order to have the new metadata filled in the catalog.</p>
</div>
</section>
<section id="new-mobile-navigation-menu">
<h3>New mobile navigation menu<a class="headerlink" href="#new-mobile-navigation-menu" title="Link to this heading">#</a></h3>
<p>The mobile navigation menu has been improved using a customizable <code class="docutils literal notranslate"><span class="pre">CSSTransition</span></code> group animation. It is a breaking change since this change introduces new classes and HTML to accomplish it. A new <code class="docutils literal notranslate"><span class="pre">NavItems</span></code> helper (presentational) component has been introduced as well. However, the API of the component hasn't changed so your customizations/shadowed components (if any) are safe. If you want to use the new stock menu and interaction, and you have customizations/shadowed components, you need to update them using the stock one.</p>
</section>
<section id="adjusted-main-logo-component-styling">
<h3>Adjusted main Logo component styling<a class="headerlink" href="#adjusted-main-logo-component-styling" title="Link to this heading">#</a></h3>
<p>In order to match the Plone logo and in lieu to use a better generic icon starting point, the <code class="docutils literal notranslate"><span class="pre">Logo.jsx</span></code> component and <code class="docutils literal notranslate"><span class="pre">.logo-nav-wrapper</span></code> styling have been adjusted. The logo is not constrained by default to <code class="docutils literal notranslate"><span class="pre">64px</span></code> and the wrapper now centers vertically. Please check that your project logo placeholder is still in good shape after upgrade.</p>
</section>
<section id="move-theme-js-import-to-top-of-the-client-code">
<h3>Move <code class="docutils literal notranslate"><span class="pre">theme.js</span></code> import to top of the client code<a class="headerlink" href="#move-theme-js-import-to-top-of-the-client-code" title="Link to this heading">#</a></h3>
<p>This is not a strict breaking change, but it's worth mentioning it as it might be important to keep in mind, especially if you are using inline CSS imports in your code, it might change your CSS cascade apply order. However, if you use the theme approach adding <code class="docutils literal notranslate"><span class="pre">custom.overrides</span></code>/<code class="docutils literal notranslate"><span class="pre">custom.less</span></code> files, you are good to go since they are applied in the same batch.</p>
</section>
<section id="getvocabulary-action-changed-its-signature">
<h3><code class="docutils literal notranslate"><span class="pre">getVocabulary</span></code> action changed its signature<a class="headerlink" href="#getvocabulary-action-changed-its-signature" title="Link to this heading">#</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">getVocabulary</span></code> action has changed API. Before, it used separate positional arguments, but now it uses named arguments by passing a single object as the argument.  You'll have to adjust any call you do if you are using this action in custom code to the new API.</p>
</section>
</section>
<section id="upgrading-to-volto-13-x-x">
<h2>Upgrading to Volto 13.x.x<a class="headerlink" href="#upgrading-to-volto-13-x-x" title="Link to this heading">#</a></h2>
<section id="deprecating-node-js-10">
<h3>Deprecating Node.js 10<a class="headerlink" href="#deprecating-node-js-10" title="Link to this heading">#</a></h3>
<p>Since April 30th, 2021 Node.js 10 is out of Long Term Support by the Node.js community, so
we are deprecating it in Volto 13. Please update your projects to a Node.js LTS version
(12 or 14 at the moment of this writing).</p>
</section>
<section id="seamless-mode-is-the-default-in-development-mode">
<h3>Seamless mode is the default in development mode<a class="headerlink" href="#seamless-mode-is-the-default-in-development-mode" title="Link to this heading">#</a></h3>
<p>Not really a breaking change, but it's worth noting it. By default, Volto 13 in
development mode uses the internal proxy in seamless mode otherwise configured
differently. To learn more about the seamless mode read: <a class="reference internal" href="../deploying/seamless-mode.html"><span class="doc">Seamless mode</span></a>
and <a class="reference internal" href="../configuration/zero-config-builds.html"><span class="doc">Zero configuration builds</span></a>.</p>
</section>
<section id="refactored-listing-block-using-schemas-and-objectwidget">
<h3>Refactored Listing block using schemas and ObjectWidget<a class="headerlink" href="#refactored-listing-block-using-schemas-and-objectwidget" title="Link to this heading">#</a></h3>
<p>The Listing block has been heavily refactored using schema forms and <code class="docutils literal notranslate"><span class="pre">BlockDataForm</span></code>
as well as the other new internal artifacts to leverage blocks variations and extensions at the same time
simplifying it.</p>
<p>Furthermore, the &quot;More...&quot; link it's now opt-in, instead of always-in. If your
projects rely on it, you should set the block setting
<code class="docutils literal notranslate"><span class="pre">config.blocks.blocksConfig.listing.showLinkMore</span></code> to <code class="docutils literal notranslate"><span class="pre">true</span></code>.</p>
<p>The advantage of this is that now you can use the <code class="docutils literal notranslate"><span class="pre">QuerystringWidget</span></code> with schema based
data forms in a reusable way in your custom blocks. See the Listing block code for
further references.</p>
<section id="migrate-your-existing-listing-blocks">
<h4>Migrate your existing listing blocks<a class="headerlink" href="#migrate-your-existing-listing-blocks" title="Link to this heading">#</a></h4>
<p><strong>(Updated: 2021/06/12)</strong> If you have an existing Volto installation and you are using
listing blocks, you must run an upgrade step in order to match the new listing
internals. You can find this upgrade step in the <code class="docutils literal notranslate"><span class="pre">plone.volto</span></code> package. You can run
the step from there if you have installed <code class="docutils literal notranslate"><span class="pre">plone.volto</span></code> in your project, it's named
<code class="docutils literal notranslate"><span class="pre">Migrate</span> <span class="pre">listing</span> <span class="pre">blocks</span> <span class="pre">from</span> <span class="pre">Volto</span> <span class="pre">12</span> <span class="pre">to</span> <span class="pre">Volto</span> <span class="pre">13</span></code>. You can find it in the <code class="docutils literal notranslate"><span class="pre">Add-ons</span></code>
control panel. Alternatively, you can transfer it to your own integration packages and
run it from there.</p>
<p><a class="github reference external" href="https://github.com/plone/plone.volto/blob/6f5382c74f668935527e962490b81cb72bf3bc94/src/kitconcept/volto/upgrades.py#L6-L54">plone/plone.volto</a></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">from12to13_migrate_listings</span><span class="p">(</span><span class="n">context</span><span class="p">):</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">migrate_listing</span><span class="p">(</span><span class="n">originBlocks</span><span class="p">):</span>
        <span class="n">blocks</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="n">originBlocks</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">blockid</span> <span class="ow">in</span> <span class="n">blocks</span><span class="p">:</span>
            <span class="n">block</span> <span class="o">=</span> <span class="n">blocks</span><span class="p">[</span><span class="n">blockid</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">block</span><span class="p">[</span><span class="s2">&quot;@type&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;listing&quot;</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">block</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;template&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">block</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;variation&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">):</span>
                    <span class="n">block</span><span class="p">[</span><span class="s2">&quot;variation&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">block</span><span class="p">[</span><span class="s2">&quot;template&quot;</span><span class="p">]</span>
                    <span class="k">del</span> <span class="n">block</span><span class="p">[</span><span class="s2">&quot;template&quot;</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">block</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;template&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span> <span class="ow">and</span> <span class="n">block</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;variation&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">):</span>
                    <span class="k">del</span> <span class="n">block</span><span class="p">[</span><span class="s2">&quot;template&quot;</span><span class="p">]</span>

                <span class="c1"># Migrate to internal structure</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">block</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;querystring&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">):</span>
                    <span class="c1"># Creates if it is not created</span>
                    <span class="n">block</span><span class="p">[</span><span class="s2">&quot;querystring&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
                <span class="k">if</span> <span class="n">block</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;query&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span> <span class="ow">or</span> <span class="n">block</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;query&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="p">[]:</span>
                    <span class="n">block</span><span class="p">[</span><span class="s2">&quot;querystring&quot;</span><span class="p">][</span><span class="s2">&quot;query&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">block</span><span class="p">[</span><span class="s2">&quot;query&quot;</span><span class="p">]</span>
                    <span class="k">del</span> <span class="n">block</span><span class="p">[</span><span class="s2">&quot;query&quot;</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">block</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;sort_on&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">):</span>
                    <span class="n">block</span><span class="p">[</span><span class="s2">&quot;querystring&quot;</span><span class="p">][</span><span class="s2">&quot;sort_on&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">block</span><span class="p">[</span><span class="s2">&quot;sort_on&quot;</span><span class="p">]</span>
                    <span class="k">del</span> <span class="n">block</span><span class="p">[</span><span class="s2">&quot;sort_on&quot;</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">block</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;sort_order&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">):</span>
                    <span class="n">block</span><span class="p">[</span><span class="s2">&quot;querystring&quot;</span><span class="p">][</span><span class="s2">&quot;sort_order&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">block</span><span class="p">[</span><span class="s2">&quot;sort_order&quot;</span><span class="p">]</span>
                    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">block</span><span class="p">[</span><span class="s2">&quot;sort_order&quot;</span><span class="p">],</span> <span class="nb">bool</span><span class="p">):</span>
                        <span class="n">block</span><span class="p">[</span><span class="s2">&quot;querystring&quot;</span><span class="p">][</span><span class="s2">&quot;sort_order&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
                            <span class="s2">&quot;descending&quot;</span> <span class="k">if</span> <span class="n">block</span><span class="p">[</span><span class="s2">&quot;sort_order&quot;</span><span class="p">]</span> <span class="k">else</span> <span class="s2">&quot;ascending&quot;</span>
                        <span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">block</span><span class="p">[</span><span class="s2">&quot;querystring&quot;</span><span class="p">][</span><span class="s2">&quot;sort_order&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">block</span><span class="p">[</span><span class="s2">&quot;sort_order&quot;</span><span class="p">]</span>
                    <span class="n">block</span><span class="p">[</span><span class="s2">&quot;querystring&quot;</span><span class="p">][</span><span class="s2">&quot;sort_order_boolean&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
                        <span class="kc">True</span>
                        <span class="k">if</span> <span class="n">block</span><span class="p">[</span><span class="s2">&quot;sort_order&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;descending&quot;</span> <span class="ow">or</span> <span class="n">block</span><span class="p">[</span><span class="s2">&quot;sort_order&quot;</span><span class="p">]</span>
                        <span class="k">else</span> <span class="kc">False</span>
                    <span class="p">)</span>
                    <span class="k">del</span> <span class="n">block</span><span class="p">[</span><span class="s2">&quot;sort_order&quot;</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">block</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;limit&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">):</span>
                    <span class="n">block</span><span class="p">[</span><span class="s2">&quot;querystring&quot;</span><span class="p">][</span><span class="s2">&quot;limit&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">block</span><span class="p">[</span><span class="s2">&quot;limit&quot;</span><span class="p">]</span>
                    <span class="k">del</span> <span class="n">block</span><span class="p">[</span><span class="s2">&quot;limit&quot;</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">block</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;batch_size&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">):</span>
                    <span class="n">block</span><span class="p">[</span><span class="s2">&quot;querystring&quot;</span><span class="p">][</span><span class="s2">&quot;batch_size&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">block</span><span class="p">[</span><span class="s2">&quot;batch_size&quot;</span><span class="p">]</span>
                    <span class="k">del</span> <span class="n">block</span><span class="p">[</span><span class="s2">&quot;batch_size&quot;</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">block</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;depth&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">):</span>
                    <span class="n">block</span><span class="p">[</span><span class="s2">&quot;querystring&quot;</span><span class="p">][</span><span class="s2">&quot;depth&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">block</span><span class="p">[</span><span class="s2">&quot;depth&quot;</span><span class="p">]</span>
                    <span class="k">del</span> <span class="n">block</span><span class="p">[</span><span class="s2">&quot;depth&quot;</span><span class="p">]</span>

                <span class="c1"># batch_size to b_size, idempotent</span>
                <span class="k">if</span> <span class="n">block</span><span class="p">[</span><span class="s2">&quot;querystring&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;batch_size&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">):</span>
                    <span class="n">block</span><span class="p">[</span><span class="s2">&quot;querystring&quot;</span><span class="p">][</span><span class="s2">&quot;b_size&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">block</span><span class="p">[</span><span class="s2">&quot;querystring&quot;</span><span class="p">][</span><span class="s2">&quot;batch_size&quot;</span><span class="p">]</span>
                    <span class="k">del</span> <span class="n">block</span><span class="p">[</span><span class="s2">&quot;querystring&quot;</span><span class="p">][</span><span class="s2">&quot;batch_size&quot;</span><span class="p">]</span>

                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Migrated listing in </span><span class="si">{</span><span class="n">obj</span><span class="o">.</span><span class="n">absolute_url</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">blocks</span>

    <span class="n">pc</span> <span class="o">=</span> <span class="n">api</span><span class="o">.</span><span class="n">portal</span><span class="o">.</span><span class="n">get_tool</span><span class="p">(</span><span class="s2">&quot;portal_catalog&quot;</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">brain</span> <span class="ow">in</span> <span class="n">pc</span><span class="o">.</span><span class="n">unrestrictedSearchResults</span><span class="p">(</span><span class="n">object_provides</span><span class="o">=</span><span class="n">IBlocks</span><span class="o">.</span><span class="n">__identifier__</span><span class="p">):</span>
        <span class="n">obj</span> <span class="o">=</span> <span class="n">brain</span><span class="o">.</span><span class="n">getObject</span><span class="p">()</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">blocks</span> <span class="o">=</span> <span class="n">migrate_listing</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">blocks</span><span class="p">)</span>
</pre></div>
</div>
<p>If you have trouble configuring the upgrade step in your own package, you can take a
look and configure it as in <code class="docutils literal notranslate"><span class="pre">plone.volto</span></code> as shown in this PR:
<a class="github reference external" href="https://github.com/kitconcept/kitconcept.volto/pull/29">kitconcept/kitconcept.volto#29</a></p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>When an official integration package exists, these upgrade steps in the backend
will be provided in there.</p>
</div>
</section>
<section id="update-your-custom-variations-templates-in-your-project-listing-blocks">
<h4>Update your custom variations (templates) in your project listing blocks<a class="headerlink" href="#update-your-custom-variations-templates-in-your-project-listing-blocks" title="Link to this heading">#</a></h4>
<p>In the case that you have custom templates for your listing blocks in your projects, it's required that you update the definitions to match the new core variations syntax.</p>
<p>Going from this:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="nx">config</span><span class="p">.</span><span class="nx">blocks</span><span class="p">.</span><span class="nx">blocksConfig</span><span class="p">.</span><span class="nx">listing</span><span class="p">.</span><span class="nx">templates</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="p">...</span><span class="nx">config</span><span class="p">.</span><span class="nx">blocks</span><span class="p">.</span><span class="nx">blocksConfig</span><span class="p">.</span><span class="nx">listing</span><span class="p">.</span><span class="nx">templates</span><span class="p">,</span>
<span class="w">  </span><span class="nx">mycustomvariationid</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">label</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;My custom listing variation&#39;</span><span class="p">,</span>
<span class="w">    </span><span class="nx">template</span><span class="o">:</span><span class="w"> </span><span class="nx">MyCustomListingBlockTemplate</span><span class="p">,</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>To this:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="w">  </span><span class="nx">config</span><span class="p">.</span><span class="nx">blocks</span><span class="p">.</span><span class="nx">blocksConfig</span><span class="p">.</span><span class="nx">listing</span><span class="p">.</span><span class="nx">variations</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="p">...</span><span class="nx">config</span><span class="p">.</span><span class="nx">blocks</span><span class="p">.</span><span class="nx">blocksConfig</span><span class="p">.</span><span class="nx">listing</span><span class="p">.</span><span class="nx">variations</span><span class="p">,</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;mycustomvariationid&#39;</span><span class="p">,</span>
<span class="w">      </span><span class="nx">isDefault</span><span class="o">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span>
<span class="w">      </span><span class="nx">title</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;My custom listing variation&#39;</span><span class="p">,</span>
<span class="w">      </span><span class="nx">template</span><span class="o">:</span><span class="w"> </span><span class="nx">MyCustomListingBlockTemplate</span><span class="p">,</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">]</span>
</pre></div>
</div>
</section>
</section>
<section id="control-panel-icons-are-now-svg-based-instead-of-font-based">
<h3>Control panel icons are now SVG based instead of font based<a class="headerlink" href="#control-panel-icons-are-now-svg-based-instead-of-font-based" title="Link to this heading">#</a></h3>
<p>It was long due, the control panel overview route <code class="docutils literal notranslate"><span class="pre">/controlpanel</span></code> is now using SVG icons
from the Pastanaga icon set, instead of the deprecated font ones. If you have customized
or created a control panel and you are using it in Volto, you should update it and use
the config registry setting: <code class="docutils literal notranslate"><span class="pre">controlPanelsIcons</span></code> and add the name of your control panel and the related SVG like:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="k">import</span><span class="w"> </span><span class="nx">myfancyiconSVG</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@plone/volto/icons/myfancyicon.svg&#39;</span><span class="p">;</span>
<span class="k">import</span><span class="w"> </span><span class="nx">config</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@plone/volto/registry&#39;</span>

<span class="nx">config</span><span class="p">.</span><span class="nx">settings</span><span class="p">.</span><span class="nx">controlPanelsIcons</span><span class="p">.</span><span class="nx">mynewcontrolpanelid</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">myfancyiconSVG</span><span class="p">;</span>
</pre></div>
</div>
</section>
<section id="login-form-ui-and-accessibility-updated">
<h3>Login form UI and accessibility updated<a class="headerlink" href="#login-form-ui-and-accessibility-updated" title="Link to this heading">#</a></h3>
<p>Not really a breaking change, but it's worth to note that we changed the look and feel of
the login form and improved its usability and accessibility. Another move towards the new
Quanta look and feel.</p>
</section>
<section id="changes-in-the-table-block-feature-set-and-messages">
<h3>Changes in the Table block feature set and messages<a class="headerlink" href="#changes-in-the-table-block-feature-set-and-messages" title="Link to this heading">#</a></h3>
<p>The &quot;inverted&quot; option in Table Block was removed since it was useless with the current
CSS set. Better naming of options and labels in table block (English). Updating the i18n
messages for the used translations is advisable, but not required.</p>
</section>
</section>
<section id="upgrading-to-volto-12-x-x">
<h2>Upgrading to Volto 12.x.x<a class="headerlink" href="#upgrading-to-volto-12-x-x" title="Link to this heading">#</a></h2>
<section id="volto-configuration-registry">
<span id="frontend-upgrade-guide-volto-configuration-registry-label"></span><h3>Volto configuration registry<a class="headerlink" href="#volto-configuration-registry" title="Link to this heading">#</a></h3>
<p>The configuration object in Volto is located in the <code class="docutils literal notranslate"><span class="pre">~/config</span></code> module and uses it as
container of Volto's config taking advantage of the ES6 module system. So we &quot;import&quot;
the config every time we need it, then the exported config data in that module
&quot;magically&quot; is there whenever we want to access to it.</p>
<p>It's been a while since we were experiencing undesired side effects from &quot;circular import
dependency&quot; problems in Volto, due to the very nature of the solution (importing the
<code class="docutils literal notranslate"><span class="pre">~/config</span></code>). Although they aren't very noticeable, they are there, waiting to bite
us. In fact, circular dependencies are common in Node.js world, and the very nature of
how it works make them &quot;workable&quot; thanks to the Node.js own import resolution algorithm.
So the &quot;build&quot; always works, although we have the circular dependencies, but that leads to weird problems
like (just to mention one of them) the <a class="reference external" href="https://6.docs.plone.org/glossary.html#term-hot-module-replacement" title="(in Plone Documentation v6)"><span class="xref std std-term">hot module replacement</span></a> (HMR) not working properly.</p>
<p>That's why in this version we are introducing the new Volto's Configuration Registry.
It's a centralized singleton that is populated from the core config module and can be
modified by the add-ons and the project itself. The code, instead of using imports to get
it, imports the singleton and then access the proper registry key inside it (<code class="docutils literal notranslate"><span class="pre">settings</span></code>,
<code class="docutils literal notranslate"><span class="pre">blocks</span></code>, <code class="docutils literal notranslate"><span class="pre">views</span></code>, etc...)</p>
</section>
<section id="changes-in-your-code-and-local-customizations">
<h3>Changes in your code (and local customizations)<a class="headerlink" href="#changes-in-your-code-and-local-customizations" title="Link to this heading">#</a></h3>
<p>This was the old way:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">settings</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;~/config&#39;</span>
<span class="p">...</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">apiPath</span><span class="p">)</span>
<span class="p">...</span>
</pre></div>
</div>
<p>and this is the new way:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="k">import</span><span class="w"> </span><span class="nx">config</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@plone/volto/registry&#39;</span>
<span class="p">...</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">config</span><span class="p">.</span><span class="nx">settings</span><span class="p">.</span><span class="nx">apiPath</span><span class="p">)</span>
<span class="nx">config</span><span class="p">.</span><span class="nx">settings</span><span class="p">.</span><span class="nx">isMultilingual</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span>
<span class="p">...</span>
</pre></div>
</div>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>The old way of using the import to get Volto's configuration will still be working as
long as you support it in your project <code class="docutils literal notranslate"><span class="pre">src/config</span></code> but it will be deprecated and
will stop working from <em>Volto 14</em> onwards.</p>
<p>It is <em>highly</em> advisable that you use the new configuration registry right away. Your
custom code (and Volto customizations using the shadowing engine) has to adapt to the
new way of reading the config from the new Volto's Configuration. However, it won't be
mandatory until Volto 14, leaving the community time to adapt their code and projects.</p>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>If you are an add-on maintainer, and you migrate your add-on to be Volto 12 compatible,
it's recommended that you add it as <code class="docutils literal notranslate"><span class="pre">peerDependencies</span></code> for Volto 12.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="w">  </span><span class="nt">&quot;peerDependencies&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;@plone/volto&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&gt;=12.0.0&quot;</span>
<span class="w">  </span><span class="p">}</span>
</pre></div>
</div>
</div>
<section id="changes-in-your-project-s-routes-module">
<h4>Changes in your project's <code class="docutils literal notranslate"><span class="pre">routes</span></code> module<a class="headerlink" href="#changes-in-your-project-s-routes-module" title="Link to this heading">#</a></h4>
<div class="highlight-diff notranslate"><div class="highlight"><pre><span></span><span class="gd">--- a/src/routes.js</span>
<span class="gi">+++ b/src/routes.js</span>
<span class="gu">@@ -5,7 +5,7 @@</span>

<span class="w"> </span>import { App } from &#39;@plone/volto/components&#39;;
<span class="w"> </span>import { defaultRoutes } from &#39;@plone/volto/routes&#39;;
<span class="gd">-import { addonRoutes } from &#39;~/config&#39;;</span>
<span class="gi">+import config from &#39;@plone/volto/registry&#39;;</span>

<span class="w"> </span>/**
<span class="w"> </span> * Routes array.
<span class="gu">@@ -18,7 +18,7 @@ const routes = [</span>
<span class="w"> </span>    component: App, // Change this if you want a different component
<span class="w"> </span>    routes: [
<span class="w"> </span>      // Add your routes here
<span class="gd">-      ...(addonRoutes || []),</span>
<span class="gi">+      ...(config.addonRoutes || []),</span>
<span class="w"> </span>      ...defaultRoutes,
<span class="w"> </span>    ],
<span class="w"> </span>  },
</pre></div>
</div>
</section>
<section id="changes-in-your-project-s-config-module">
<h4>Changes in your project's <code class="docutils literal notranslate"><span class="pre">config</span></code> module<a class="headerlink" href="#changes-in-your-project-s-config-module" title="Link to this heading">#</a></h4>
<p>Remove the imports and the exports in your <code class="docutils literal notranslate"><span class="pre">src/config.js</span></code>:</p>
<div class="highlight-diff notranslate"><div class="highlight"><pre><span></span><span class="gd">--- a/src/config.js</span>
<span class="gi">+++ b/src/config.js</span>
<span class="gu">@@ -12,30 +12,11 @@</span>
<span class="w"> </span> * }
<span class="w"> </span> */

<span class="gd">-import {</span>
<span class="gd">-  settings as defaultSettings,</span>
<span class="gd">-  views as defaultViews,</span>
<span class="gd">-  widgets as defaultWidgets,</span>
<span class="gd">-  blocks as defaultBlocks,</span>
<span class="gd">-  addonReducers as defaultAddonReducers,</span>
<span class="gd">-  addonRoutes as defaultAddonRoutes,</span>
<span class="gd">-} from &#39;@plone/volto/config&#39;;</span>
<span class="gi">+import &#39;@plone/volto/config&#39;;</span>

<span class="gd">-export const settings = {</span>
<span class="gd">-  ...defaultSettings,</span>
<span class="gd">-};</span>
<span class="gd">-</span>
<span class="gd">-export const views = {</span>
<span class="gd">-  ...defaultViews,</span>
<span class="gd">-};</span>
<span class="gd">-</span>
<span class="gd">-export const widgets = {</span>
<span class="gd">-  ...defaultWidgets,</span>
<span class="gd">-};</span>
<span class="gd">-</span>
<span class="gd">-export const blocks = {</span>
<span class="gd">-  ...defaultBlocks,</span>
<span class="gd">-};</span>
<span class="gd">-</span>
<span class="gd">-export const addonRoutes = [...defaultAddonRoutes];</span>
<span class="gd">-export const addonReducers = { ...defaultAddonReducers };</span>
</pre></div>
</div>
<p>notice from the diff, that you must add this import <em>AFTER</em> all your imports:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="c1">// All your imports required for the config here BEFORE this line</span>
<span class="k">import</span><span class="w"> </span><span class="s1">&#39;@plone/volto/config&#39;</span><span class="p">;</span>
</pre></div>
</div>
<p>Then add this function as default export at the end of your <code class="docutils literal notranslate"><span class="pre">src/config.js</span></code> module:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="k">export</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">applyConfig</span><span class="p">(</span><span class="nx">config</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="c1">// Add here your project config</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="nx">config</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>It has the same signature, and it's used like the <code class="docutils literal notranslate"><span class="pre">applyConfig()</span></code> function in <code class="docutils literal notranslate"><span class="pre">index.js</span></code>
module add-ons. You should place your project's configuration here and mutate the config
like you would do it in add-ons.</p>
<p>Let's show it in an example. Let's say you have this config in your project's <code class="docutils literal notranslate"><span class="pre">src/config</span></code> module:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="k">export</span><span class="w"> </span><span class="kd">const</span><span class="w"> </span><span class="nx">settings</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="p">...</span><span class="nx">defaultSettings</span><span class="p">,</span>
<span class="w">  </span><span class="nx">isMultilingual</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">  </span><span class="nx">supportedLanguages</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="s1">&#39;en&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;de&#39;</span><span class="p">],</span>
<span class="w">  </span><span class="nx">defaultLanguage</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;de&#39;</span><span class="p">,</span>
<span class="w">  </span><span class="nx">navDepth</span><span class="o">:</span><span class="w"> </span><span class="mf">3</span><span class="p">,</span>
<span class="p">};</span>
</pre></div>
</div>
<p>then you'll add the <code class="docutils literal notranslate"><span class="pre">applyConfig()</span></code> function as default export and copy that settings key in it:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="k">export</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">applyConfig</span><span class="p">(</span><span class="nx">config</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">config</span><span class="p">.</span><span class="nx">settings</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="p">...</span><span class="nx">config</span><span class="p">.</span><span class="nx">settings</span><span class="p">,</span>
<span class="w">    </span><span class="nx">isMultilingual</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">    </span><span class="nx">supportedLanguages</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="s1">&#39;en&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;de&#39;</span><span class="p">],</span>
<span class="w">    </span><span class="nx">defaultLanguage</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;de&#39;</span><span class="p">,</span>
<span class="w">    </span><span class="nx">navDepth</span><span class="o">:</span><span class="w"> </span><span class="mf">3</span><span class="p">,</span>
<span class="w">  </span><span class="p">};</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="nx">config</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The add-ons you might be using might need to migrate to use the new
configuration registry too. Make sure all of them are already migrated to Volto 12.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Although this might be daunting, the migration is quite straightforward, and the refactoring
of the required code can be undergone through a series of &quot;search and replace&quot; in your IDE of choice.</p>
</div>
</div>
</section>
<section id="changes-in-your-project-s-package-json">
<h4>Changes in your project's <code class="docutils literal notranslate"><span class="pre">package.json</span></code><a class="headerlink" href="#changes-in-your-project-s-package-json" title="Link to this heading">#</a></h4>
<p>You need to update the <code class="docutils literal notranslate"><span class="pre">setupFiles</span></code> key of your <code class="docutils literal notranslate"><span class="pre">jest</span></code> configuration:</p>
<div class="highlight-diff notranslate"><div class="highlight"><pre><span></span><span class="w"> </span>    &quot;setupFiles&quot;: [
<span class="gd">-      &quot;@plone/volto/test-setup.js&quot;</span>
<span class="gi">+      &quot;@plone/volto/test-setup-globals.js&quot;,</span>
<span class="gi">+      &quot;@plone/volto/test-setup-config.js&quot;</span>
<span class="w"> </span>    ],
</pre></div>
</div>
</section>
<section id="changes-in-snapshots-tests-in-your-project">
<h4>Changes in snapshots tests in your project<a class="headerlink" href="#changes-in-snapshots-tests-in-your-project" title="Link to this heading">#</a></h4>
<p>Please note that your tests' snapshots will also change because of the new testing mocks
(in widgets, blocks and in views). You should review them, make sure that the mocks are
there instead of the real mocked components and accept them.</p>
</section>
</section>
<section id="alternative-both-configurations-coexisting">
<h3>Alternative - both configurations coexisting<a class="headerlink" href="#alternative-both-configurations-coexisting" title="Link to this heading">#</a></h3>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This configuration is <em>not recommended</em> and might lead to inconsistencies and has been tested
only partially and can you can find unseen problems. This method is only a workaround in case the
add-ons you are using are not yet migrated, or you can't migrate your code. And in
any case, as stated above, it will be deprecated and will stop working in Volto 14.</p>
</div>
<p>Make the following changes to your <code class="docutils literal notranslate"><span class="pre">src/config.js</span></code>, first remove the main imports, and add
the import to the new config registry:</p>
<div class="highlight-diff notranslate"><div class="highlight"><pre><span></span><span class="gd">-import {</span>
<span class="gd">-  settings as defaultSettings,</span>
<span class="gd">-  views as defaultViews,</span>
<span class="gd">-  widgets as defaultWidgets,</span>
<span class="gd">-  blocks as defaultBlocks,</span>
<span class="gd">-  addonReducers as defaultAddonReducers,</span>
<span class="gd">-  addonRoutes as defaultAddonRoutes,</span>
<span class="gd">-} from &#39;@plone/volto/config&#39;;</span>
<span class="gi">+import ConfigRegistry from &#39;@plone/volto/registry&#39;;</span>
</pre></div>
</div>
<p>then <em>after the last existing import</em> in your existing <code class="docutils literal notranslate"><span class="pre">src/config.js</span></code> add:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="k">import</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="kr">as</span><span class="w"> </span><span class="nx">voltoDefaultConfig</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@plone/volto/config&#39;</span><span class="p">;</span>
</pre></div>
</div>
<p>Remove all the default exports, but save your config for later use:</p>
<div class="highlight-diff notranslate"><div class="highlight"><pre><span></span><span class="gd">-export const settings = {</span>
<span class="gd">-  ...defaultSettings,</span>
<span class="gd">-};</span>
<span class="gd">-</span>
<span class="gd">-export const views = {</span>
<span class="gd">-  ...defaultViews,</span>
<span class="gd">-};</span>
<span class="gd">-</span>
<span class="gd">-export const widgets = {</span>
<span class="gd">-  ...defaultWidgets,</span>
<span class="gd">-};</span>
<span class="gd">-</span>
<span class="gd">-export const blocks = {</span>
<span class="gd">-  ...defaultBlocks,</span>
<span class="gd">-};</span>
<span class="gd">-</span>
<span class="gd">-export const addonRoutes = [...defaultAddonRoutes];</span>
<span class="gd">-export const addonReducers = { ...defaultAddonReducers };</span>
</pre></div>
</div>
<p>showing in the diff the default ones, you should have your configuration inside those, like:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="k">export</span><span class="w"> </span><span class="kd">const</span><span class="w"> </span><span class="nx">settings</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="p">...</span><span class="nx">defaultSettings</span><span class="p">,</span>
<span class="w">  </span><span class="nx">isMultilingual</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">  </span><span class="nx">supportedLanguages</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="s1">&#39;en&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;de&#39;</span><span class="p">],</span>
<span class="w">  </span><span class="nx">defaultLanguage</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;de&#39;</span><span class="p">,</span>
<span class="w">  </span><span class="nx">navDepth</span><span class="o">:</span><span class="w"> </span><span class="mf">3</span><span class="p">,</span>
<span class="p">};</span>
</pre></div>
</div>
<p>At the end of your <code class="docutils literal notranslate"><span class="pre">src/config.js</span></code>:</p>
<div class="highlight-diff notranslate"><div class="highlight"><pre><span></span><span class="gi">+const localconfig = {</span>
<span class="gi">+  ...voltoDefaultConfig,</span>
<span class="gi">+};</span>
<span class="gi">+</span>
<span class="gi">+const applyLocalConfig = applyConfig(localconfig);</span>
<span class="gi">+</span>
<span class="gi">+ConfigRegistry.settings = applyLocalConfig.settings;</span>
<span class="gi">+ConfigRegistry.blocks = applyLocalConfig.blocks;</span>
<span class="gi">+ConfigRegistry.views = applyLocalConfig.views;</span>
<span class="gi">+ConfigRegistry.widgets = applyLocalConfig.widgets;</span>
<span class="gi">+ConfigRegistry.addonRoutes = applyLocalConfig.addonRoutes;</span>
<span class="gi">+ConfigRegistry.addonReducers = applyLocalConfig.addonReducers;</span>
<span class="gi">+</span>
<span class="gi">+export const settings = applyLocalConfig.settings;</span>
<span class="gi">+export const blocks = applyLocalConfig.blocks;</span>
<span class="gi">+export const views = applyLocalConfig.views;</span>
<span class="gi">+export const widgets = applyLocalConfig.widgets;</span>
<span class="gi">+export const addonRoutes = applyLocalConfig.addonRoutes;</span>
<span class="gi">+export const addonReducers = applyLocalConfig.addonReducers;</span>
</pre></div>
</div>
<p>Migrate your config to the new config registry style, <strong>but not</strong> as a default export, at
the end of <code class="docutils literal notranslate"><span class="pre">src/config.js</span></code>:</p>
<div class="highlight-diff notranslate"><div class="highlight"><pre><span></span><span class="gi">+function applyConfig(config) {</span>
<span class="gi">+  config.settings = {</span>
<span class="gi">+    ...config.settings,</span>
<span class="gi">+    isMultilingual: true,</span>
<span class="gi">+    supportedLanguages: [&#39;en&#39;, &#39;de&#39;],</span>
<span class="gi">+    defaultLanguage: &#39;de&#39;,</span>
<span class="gi">+    navDepth: 3,</span>
<span class="gi">+  };</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Although you can keep both ways of using Volto's config it is
recommended you use the new registry based configuration as soon as possible, as we
discourage you to continue using the old way.</p>
</div>
</section>
</section>
<section id="upgrading-to-volto-11-x-x">
<h2>Upgrading to Volto 11.x.x<a class="headerlink" href="#upgrading-to-volto-11-x-x" title="Link to this heading">#</a></h2>
<section id="alignblock-component-new-placement-and-import-path">
<h3>AlignBlock component new placement and import path<a class="headerlink" href="#alignblock-component-new-placement-and-import-path" title="Link to this heading">#</a></h3>
<p>Due to problems with circular dependencies, the <code class="docutils literal notranslate"><span class="pre">AlignBlock</span></code> was moved to helpers and used from there.
Unfortunately, it was proven to be worse overall. We moved it (with a known workaround) to its rightful place again.</p>
<p>If your code is importing it from helpers, you should update it to the new path:</p>
<div class="highlight-diff notranslate"><div class="highlight"><pre><span></span><span class="gd">- import { AlignBlock } from &#39;@plone/volto/helpers&#39;;</span>
<span class="gi">+ import AlignBlock from &#39;@plone/volto/components/manage/Sidebar/AlignBlock&#39;;</span>
</pre></div>
</div>
</section>
<section id="id-is-removed-from-formfieldwrapper">
<h3>id is removed from FormFieldWrapper<a class="headerlink" href="#id-is-removed-from-formfieldwrapper" title="Link to this heading">#</a></h3>
<p>We have removed the id from the FormFieldWrapper because it coincides with the label id if we don't provide the fieldset.</p>
<p>If you have cypress tests which depends on this id then just remove the id from the test and if the test fails then just add <code class="docutils literal notranslate"><span class="pre">.react-select-container</span></code> instead of your id. See <a class="github reference external" href="https://github.com/plone/volto/pull/2102">plone/volto#2102</a> for more details.</p>
</section>
<section id="new-default-listing-template">
<h3>New Default Listing Template<a class="headerlink" href="#new-default-listing-template" title="Link to this heading">#</a></h3>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you have customized the default listing template this change possibly does not have an effect on your project.</p>
</div>
<p>The default Template for the Listing Block now no longer contains an image. The old default Template has been renamed to &quot;Summary&quot;. This will lead to every Listing Block in your Project that uses the default Template to now use the new default Template, and thus, no longer showing the image.</p>
<p>To resolve this you can change the template of the affected Listing Blocks either manually or by writing a backend script for that.</p>
</section>
</section>
<section id="upgrading-to-volto-10-x-x">
<h2>Upgrading to Volto 10.x.x<a class="headerlink" href="#upgrading-to-volto-10-x-x" title="Link to this heading">#</a></h2>
<section id="remove-the-razzle-plugins-patch">
<h3>Remove the Razzle plugins patch<a class="headerlink" href="#remove-the-razzle-plugins-patch" title="Link to this heading">#</a></h3>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>If you haven't upgraded your project to Volto 9.x.x and followed the upgrade guide
instructions, you are set, and you do not need to do anything.</p>
<p>In order to have support for Razzle plugins as local modules we introduced a patch in
9.0.0 that addressed the lack of support in Razzle 3.3.7 . Unfortunately, not only did that
introduced more headaches than benefits, but inadvertently we introduced a bug on the
patch. We've found a workaround to still support plugins as local modules without
patching Razzle, however that forces you to delete the patch introduced in your projects
if you followed the 9.x.x upgrade guide steps.</p>
</div>
</section>
<section id="getcontent-changes">
<h3>getContent changes<a class="headerlink" href="#getcontent-changes" title="Link to this heading">#</a></h3>
<p>The content is no longer fetched from Volto with the <code class="docutils literal notranslate"><span class="pre">fullobjects</span></code> flag in the
request. If your code relied on children being fully serialized with their
parent, you should refactor it. Alternatively, you can set
<code class="docutils literal notranslate"><span class="pre">settings.bbb_getContentFetchesFullobjects</span></code> to <code class="docutils literal notranslate"><span class="pre">true</span></code> to get the old behavior.</p>
</section>
<section id="testing-library-react-upgrade-notice">
<h3><code class="docutils literal notranslate"><span class="pre">&#64;testing-library/react</span></code> upgrade notice<a class="headerlink" href="#testing-library-react-upgrade-notice" title="Link to this heading">#</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">&#64;testing-library/react</span></code> has been upgraded too, and it comes with some internal API
changes too, so if you make heavy use of it in your tests, you might need to update your
testing code to adapt to the changes. Please refer to the <code class="docutils literal notranslate"><span class="pre">&#64;testing-library/react</span></code> documentation for further information if needed.</p>
</section>
</section>
<section id="upgrading-to-volto-9-x-x">
<h2>Upgrading to Volto 9.x.x<a class="headerlink" href="#upgrading-to-volto-9-x-x" title="Link to this heading">#</a></h2>
<section id="internal-upgrade-to-use-razzle-3-3-7">
<h3>Internal upgrade to use Razzle 3.3.7<a class="headerlink" href="#internal-upgrade-to-use-razzle-3-3-7" title="Link to this heading">#</a></h3>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you haven't customized your <code class="docutils literal notranslate"><span class="pre">razzle.config.js</span></code> in your project, or have any
custom plugin in place, you don't have to do anything.</p>
</div>
<p>Razzle is the isometric build system for both the server and the client parts on top
of which Volto is built. Recently, it has been under heavy development and some new
exciting features have been added to it. The Razzle configuration is now more flexible
and extensible than ever.</p>
<p>This change <em>might</em> be breaking for you if you customized the <code class="docutils literal notranslate"><span class="pre">razzle.config.js</span></code> heavily
in your projects. Since the new version adds a new way to extend Razzle configuration,
you should adapt your extensions to the new way of doing it. See the documentation for
more information: <a class="reference external" href="https://razzlejs.org/docs/customization#extending-webpack">https://razzlejs.org/docs/customization#extending-webpack</a></p>
<p>It also unifies the way things are extended in Razzle plugins as well, so if you are
using any official or third party Razzle plugins you should upgrade them to the latest
version. If you have developed your own Razzle plugin, you should adapt its signature as
well. See the documentation for more information:
<a class="reference external" href="https://razzlejs.org/docs/customization#plugins">https://razzlejs.org/docs/customization#plugins</a></p>
<p>Razzle 3.3 also has some new <em>experimental</em> features, that will be default in the
upcoming Razzle 4, such as the new <em>React Fast Refresh</em> feature, which fixes the
annoying breaking of the router after any live refresh.</p>
<p>See the documentation of Razzle for more information: <a class="reference external" href="https://razzlejs.org/">https://razzlejs.org/</a></p>
<section id="changes-involved">
<h4>Changes involved<a class="headerlink" href="#changes-involved" title="Link to this heading">#</a></h4>
<p>We need to patch an internal Razzle utility in order to allow the use of non-released
Razzle plugins. This feature will be in Razzle 4, unfortunately at this point the
development of the Razzle 3 branch is freezed already, so we need to amend the original
using the patch. The patch will be obsolete and no longer required once we move to
Razzle 4 (see <a class="github reference external" href="https://github.com/jaredpalmer/razzle/pull/1467">jaredpalmer/razzle#1467</a>).</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Since Volto 9.2.0 the next step IS NOT required anymore.</p>
</div>
<p>~~Copy (and overwrite) the <code class="docutils literal notranslate"><span class="pre">patches</span></code> folder into your local project
or, if you want to be more accurate,
just copy <code class="docutils literal notranslate"><span class="pre">patches/razzle-plugins.patch</span></code> file and overwrite <code class="docutils literal notranslate"><span class="pre">patches/patchit.sh</span></code> file.~~</p>
</section>
</section>
<section id="babel-config-housekeeping">
<h3>Babel config housekeeping<a class="headerlink" href="#babel-config-housekeeping" title="Link to this heading">#</a></h3>
<p>Historically, Volto was using &quot;stage-0&quot; TC-39 proposals. The configuration was starting
to show its age, since Babel 7 decided to stop maintaining the presets for stages, we
moved to use a static configuration instead of a managed one. That lead to a &quot;living on
the edge&quot; situation since we supported proposals that didn't make the cut. For more
information about the TC39 approval process read (<a class="reference external" href="https://tc39.es/process-document/">https://tc39.es/process-document/</a>)</p>
<p>We decided to put a bit of order to the chaos and declare that Volto will support only
stage-4 approved proposals. They are supported by <code class="docutils literal notranslate"><span class="pre">&#64;babel/preset-env</span></code> out of the box and
provide a good sensible default baseline for Volto.</p>
<p>Proposal deprecations:</p>
<ul class="simple">
<li><p>&#64;babel/plugin-proposal-decorators</p></li>
<li><p>&#64;babel/plugin-proposal-function-bind</p></li>
<li><p>&#64;babel/plugin-proposal-do-expressions</p></li>
<li><p>&#64;babel/plugin-proposal-logical-assignment-operators</p></li>
<li><p>&#64;babel/plugin-proposal-pipeline-operator</p></li>
<li><p>&#64;babel/plugin-proposal-function-sent</p></li>
</ul>
<p>In fact, Volto core only used the first one (decorators) and we made the move to not use
them anymore a long time ago. However, if you were using some of the other presets, your code will stop
compiling. Migrate your code or if you want to use the proposal anyways, you'll need to
provide the configuration to your own project (babel.config.js) in your project root
folder.</p>
<p>You might still be using the old-style connecting of your components to the <a class="reference external" href="https://6.docs.plone.org/glossary.html#term-Redux" title="(in Plone Documentation v6)"><span class="xref std std-term">Redux</span></a> store using
<code class="docutils literal notranslate"><span class="pre">&#64;connect</span></code> decorator, in that case, take a look at any connected component in Volto to
have a glimpse on how to migrate the code.</p>
<p>If you were not using any of the deprecated proposals (the most common use case), then
you are good to go, and you don't have to do anything.</p>
</section>
<section id="hoisting-problems-on-some-setups">
<h3>Hoisting problems on some setups<a class="headerlink" href="#hoisting-problems-on-some-setups" title="Link to this heading">#</a></h3>
<p>Some people were experimenting weird <a class="reference external" href="https://6.docs.plone.org/glossary.html#term-hoisting" title="(in Plone Documentation v6)"><span class="xref std std-term">hoisting</span></a> issues when installing dependencies. This
was caused by Babel deprecated proposals packages and its peer dependencies that
sometimes conflicted with other installed packages.</p>
<p>Volto's new Babel configuration uses the configuration provided by <code class="docutils literal notranslate"><span class="pre">babel-razzle-preset</span></code>
package (Razzle dependency) and delegates the dependencies management to it, except a
few Babel plugins that Volto still needs to work.</p>
<p>In order for your projects not have any problem with the new configuration and comply
with the new model, you need to remove any local dependency on <code class="docutils literal notranslate"><span class="pre">&#64;babel/core</span></code> and let
Volto handle them.</p>
<div class="highlight-diff notranslate"><div class="highlight"><pre><span></span><span class="gh">diff --git a/package.json b/package.json</span>
<span class="gd">--- a/package.json</span>
<span class="gi">+++ b/package.json</span>
<span class="gu">@@ -183,7 +183,6 @@</span>
<span class="w"> </span>    &quot;node&quot;: &quot;^10 || ^12 &quot;
<span class="w"> </span>  },
<span class="w"> </span>  &quot;dependencies&quot;: {
<span class="gd">-    &quot;@babel/core&quot;: &quot;7.11.1&quot;,</span>
<span class="w"> </span>    &quot;@plone/volto&quot;: &quot;8.9.2&quot;,
<span class="w"> </span>    &quot;mrs-developer&quot;: &quot;1.2.0&quot;,
</pre></div>
</div>
</section>
<section id="recommended-browserslist-in-package-json">
<h3>Recommended <code class="docutils literal notranslate"><span class="pre">browserslist</span></code> in <code class="docutils literal notranslate"><span class="pre">package.json</span></code><a class="headerlink" href="#recommended-browserslist-in-package-json" title="Link to this heading">#</a></h3>
<p>Not a breaking change, but you might want to narrow the targets your Volto project is
targeting. This might improve your build times, as well as your bundle size. This is
the recommended <code class="docutils literal notranslate"><span class="pre">browserlist</span></code> you should include in your local <code class="docutils literal notranslate"><span class="pre">package.json</span></code>.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="w">  </span><span class="nt">&quot;browserslist&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="s2">&quot;&gt;1%&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="s2">&quot;last 4 versions&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="s2">&quot;Firefox ESR&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="s2">&quot;not ie 11&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="s2">&quot;not dead&quot;</span>
<span class="w">  </span><span class="p">],</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Please notice that it does not target dead and deprecated browsers by its vendors.</p>
</div>
</section>
<section id="new-webpack-resolver-plugin">
<h3>New webpack resolver plugin<a class="headerlink" href="#new-webpack-resolver-plugin" title="Link to this heading">#</a></h3>
<p>A new webpack resolver plugin has been integrated with Volto, it reroutes
'local' resolve requests (for example <code class="docutils literal notranslate"><span class="pre">import</span> <span class="pre">Something</span> <span class="pre">from</span> <span class="pre">'./Something'</span></code>) to
'absolute' resolve requests (like
<code class="docutils literal notranslate"><span class="pre">import</span> <span class="pre">Something</span> <span class="pre">from</span> <span class="pre">'&#64;plone/myaddon/Something</span></code>). This allows the
shadow-based customization mechanisms to work consistently with add-ons and
Volto.</p>
<p>This is not a breaking change, and it shouldn't affect any existing code, but by
its very nature, a resolver plugin has the potential to introduce unexpected
behavior. Just be aware of its existence and take it into consideration if you
notice anything strange.</p>
</section>
<section id="content-types-icons">
<h3>Content Types icons<a class="headerlink" href="#content-types-icons" title="Link to this heading">#</a></h3>
<p>Helper method <code class="docutils literal notranslate"><span class="pre">getIcon</span></code> from <code class="docutils literal notranslate"><span class="pre">Url</span></code> has been removed in favor of <code class="docutils literal notranslate"><span class="pre">getContentIcon</span></code>
from <code class="docutils literal notranslate"><span class="pre">Content</span></code> which is now configurable.</p>
<p>See <a class="reference internal" href="../configuration/settings-reference.html#term-contentIcons"><span class="xref std std-term">contentIcons</span></a>.</p>
</section>
</section>
<section id="upgrading-to-volto-8-x-x">
<h2>Upgrading to Volto 8.x.x<a class="headerlink" href="#upgrading-to-volto-8-x-x" title="Link to this heading">#</a></h2>
<section id="upgrade-package-json-testing-configuration">
<h3>Upgrade package.json testing configuration<a class="headerlink" href="#upgrade-package-json-testing-configuration" title="Link to this heading">#</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">dummy-addons-loader.js</span></code> file has been renamed to <code class="docutils literal notranslate"><span class="pre">jest-addons-loader.js</span></code>,
to be more in line with the rest of the existing files. You should add the
following value to the <code class="docutils literal notranslate"><span class="pre">moduleNameMapper</span></code> property of the <code class="docutils literal notranslate"><span class="pre">jest</span></code> key in your
project's package.json:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="nt">&quot;load-volto-addons&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&lt;rootDir&gt;/node_modules/@plone/volto/jest-addons-loader.js&quot;</span><span class="p">,</span>
</pre></div>
</div>
</section>
</section>
<section id="upgrading-to-volto-7-x-x">
<h2>Upgrading to Volto 7.x.x<a class="headerlink" href="#upgrading-to-volto-7-x-x" title="Link to this heading">#</a></h2>
<p>A misspelled file has been renamed. If you import <code class="docutils literal notranslate"><span class="pre">strickthrough.svg</span></code> in your
project, you'll now find that file at <code class="docutils literal notranslate"><span class="pre">&#64;plone/volto/icons/strikethrough.svg</span></code>.</p>
<section id="new-webpack-resolve-alias-for-volto-themes">
<h3>New webpack resolve alias for Volto themes<a class="headerlink" href="#new-webpack-resolve-alias-for-volto-themes" title="Link to this heading">#</a></h3>
<p>As a &quot;nice to have&quot;, a new resolve alias is provided that points to Volto's
theme folder. So, in your project's <code class="docutils literal notranslate"><span class="pre">theme.config</span></code> file, you can replace:</p>
<div class="highlight-less notranslate"><div class="highlight"><pre><span></span><span class="nv">@themesFolder</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;../../node_modules/@plone/volto/theme/themes&#39;</span><span class="o">;</span>
<span class="nv">@siteFolder</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;../../theme&quot;</span><span class="o">;</span>
<span class="nv">@fontPath</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;../../@{theme}/assets/fonts&quot;</span><span class="o">;</span>
</pre></div>
</div>
<p>with:</p>
<div class="highlight-less notranslate"><div class="highlight"><pre><span></span><span class="nv">@themesFolder</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;~volto-themes&#39;</span><span class="o">;</span>
<span class="nv">@siteFolder</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;~@package/../theme&#39;</span><span class="o">;</span>
<span class="nv">@fontPath</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;~volto-themes/@{theme}/assets/fonts&quot;</span><span class="o">;</span>
</pre></div>
</div>
<p>You might consider moving your theme files to a subfolder called <code class="docutils literal notranslate"><span class="pre">site</span></code>, to
prepare for the arrival of add-ons theming and their overrides.  In that case,
you would set your <code class="docutils literal notranslate"><span class="pre">&#64;siteFolder</span></code> to:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nd">@siteFolder</span><span class="p">:</span> <span class="s1">&#39;~@package/../theme/site&#39;</span><span class="p">;</span>
</pre></div>
</div>
</section>
</section>
<section id="upgrading-to-volto-6-x-x">
<h2>Upgrading to Volto 6.x.x<a class="headerlink" href="#upgrading-to-volto-6-x-x" title="Link to this heading">#</a></h2>
<p>First, update the <code class="docutils literal notranslate"><span class="pre">package.json</span></code> of your Volto project to Volto 6.x.x.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="w">  </span><span class="nt">&quot;dependencies&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;@plone/volto&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;6.0.0&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="p">}</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This release includes a number of changes to the internal dependencies. If you have problems building your project, you might need to remove your <code class="docutils literal notranslate"><span class="pre">node_modules</span></code> and, ultimately, also remove your <code class="docutils literal notranslate"><span class="pre">yarn.lock</span></code> file. Then run again <code class="docutils literal notranslate"><span class="pre">yarn</span></code> for rebuilding the dependencies.</p>
</div>
<section id="upgrade-to-node-js-12">
<h3>Upgrade to Node.js 12<a class="headerlink" href="#upgrade-to-node-js-12" title="Link to this heading">#</a></h3>
<p>We have now dependencies that requires <code class="docutils literal notranslate"><span class="pre">node</span> <span class="pre">&gt;=10.19.0</span></code>. Although Node.js 10 has still LTS
&quot;maintenance&quot; treatment (see <a class="github reference external" href="https://github.com/nodejs/release#release-schedule">nodejs/release</a>) the recommended path
is that you use from now on Node.js 12 which is LTS since last October.</p>
</section>
<section id="new-razzle-version-and-related-development-dependencies">
<h3>New Razzle version and related development dependencies<a class="headerlink" href="#new-razzle-version-and-related-development-dependencies" title="Link to this heading">#</a></h3>
<p>The underlying Razzle package has been upgraded, and although that doesn't bring any
changes in Volto itself, a lot of development dependencies have been upgraded, and they should be updated in your local projects as well. Might be that the builds will continue working if you don't update them, but it's better for you to do so for a better development experience.</p>
</section>
<section id="upgrade-local-dependencies-versions">
<h3>Upgrade local dependencies versions<a class="headerlink" href="#upgrade-local-dependencies-versions" title="Link to this heading">#</a></h3>
<p>You need to update <code class="docutils literal notranslate"><span class="pre">devDependencies</span></code> in <code class="docutils literal notranslate"><span class="pre">package.json</span></code> in your local environment:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="w">  </span><span class="nt">&quot;devDependencies&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;eslint-plugin-prettier&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;3.1.3&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;prettier&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2.0.5&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;stylelint-config-idiomatic-order&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;8.1.0&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;stylelint-config-prettier&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;8.0.1&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;stylelint-prettier&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;1.1.2&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="p">}</span>
</pre></div>
</div>
<p>and remove entirely the <code class="docutils literal notranslate"><span class="pre">resolutions</span></code> key:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="w">  </span><span class="nt">&quot;resolutions&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;@plone/volto/razzle/webpack-dev-server&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;3.2.0&quot;</span>
<span class="w">  </span><span class="p">}</span>
</pre></div>
</div>
</section>
<section id="update-package-json-config">
<h3>Update <code class="docutils literal notranslate"><span class="pre">package.json</span></code> config<a class="headerlink" href="#update-package-json-config" title="Link to this heading">#</a></h3>
<p>Add this key to the <code class="docutils literal notranslate"><span class="pre">jest.moduleNameMapper</span></code>:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="nt">&quot;jest&quot;</span><span class="p">:</span>
<span class="w">  </span><span class="nt">&quot;moduleNameMapper&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;@plone/volto/babel&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&lt;rootDir&gt;/node_modules/@plone/volto/babel&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="p">}</span>
</pre></div>
</div>
<p>because the new version of Jest is a bit more picky when importing externals. Attention, this mapping needs to be the first, it needs to come before the <code class="docutils literal notranslate"><span class="pre">&#64;plone/volto/(.*)$</span></code> key.</p>
</section>
<section id="prettier">
<h3>Prettier<a class="headerlink" href="#prettier" title="Link to this heading">#</a></h3>
<p>Prettier has been updated, introducing some breaking formatting changes. It's recommended that you upgrade your local version of <code class="docutils literal notranslate"><span class="pre">prettier</span></code> and reformat your code with it using:</p>
<p><code class="docutils literal notranslate"><span class="pre">yarn</span> <span class="pre">prettier:fix</span></code></p>
</section>
<section id="stylelint">
<h3>Stylelint<a class="headerlink" href="#stylelint" title="Link to this heading">#</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">stylelint</span></code> has been upgraded too, and it introduces some changes in the declaration
of the styles order. It's recommended that you upgrade your local version of <code class="docutils literal notranslate"><span class="pre">prettier</span></code> and reformat your code with it using:</p>
<p><code class="docutils literal notranslate"><span class="pre">yarn</span> <span class="pre">stylelint:fix</span></code></p>
</section>
<section id="css-modules-are-not-supported-anymore">
<h3>CSS modules are not supported anymore<a class="headerlink" href="#css-modules-are-not-supported-anymore" title="Link to this heading">#</a></h3>
<p>Razzle does not support them anymore, so neither do we. If you need them, you could add
a Webpack config in your local <code class="docutils literal notranslate"><span class="pre">razzle.config.js</span></code>.</p>
</section>
<section id="update-your-eslint-config">
<h3>Update your eslint config<a class="headerlink" href="#update-your-eslint-config" title="Link to this heading">#</a></h3>
<p>Introduced in the Volto 5 series, it's recommended that you update your local ESLint config. In the past, we used <code class="docutils literal notranslate"><span class="pre">.eslintrc</span></code> file to do so. In order to support automatically Volto add-ons, you should remove it and use a JS based config named <code class="docutils literal notranslate"><span class="pre">.eslintrc.js</span></code> with this content:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kd">const</span><span class="w"> </span><span class="nx">path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s1">&#39;path&#39;</span><span class="p">);</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">projectRootPath</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">path</span><span class="p">.</span><span class="nx">resolve</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">);</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">packageJson</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="nx">path</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="nx">projectRootPath</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;package.json&#39;</span><span class="p">));</span>

<span class="c1">// Extends ESlint configuration for adding the aliases to `src` directories in Volto add-ons</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">addonsAliases</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[];</span>
<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">packageJson</span><span class="p">.</span><span class="nx">addons</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">addons</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">packageJson</span><span class="p">.</span><span class="nx">addons</span><span class="p">;</span>
<span class="w">  </span><span class="nx">addons</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="nx">addon</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">addonPath</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="sb">`</span><span class="si">${</span><span class="nx">addon</span><span class="si">}</span><span class="sb">/src`</span><span class="p">;</span>
<span class="w">    </span><span class="nx">addonsAliases</span><span class="p">.</span><span class="nx">push</span><span class="p">([</span><span class="nx">addon</span><span class="p">,</span><span class="w"> </span><span class="nx">addonPath</span><span class="p">]);</span>
<span class="w">  </span><span class="p">});</span>
<span class="p">}</span>

<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">extends</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;./node_modules/@plone/volto/.eslintrc&#39;</span><span class="p">,</span>
<span class="w">  </span><span class="nx">settings</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="s1">&#39;import/resolver&#39;</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nx">alias</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">map</span><span class="o">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">          </span><span class="p">[</span><span class="s1">&#39;@plone/volto&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;@plone/volto/src&#39;</span><span class="p">],</span>
<span class="w">          </span><span class="p">...</span><span class="nx">addonsAliases</span><span class="p">,</span>
<span class="w">          </span><span class="p">[</span><span class="s1">&#39;@package&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;./src&#39;</span><span class="p">],</span>
<span class="w">        </span><span class="p">],</span>
<span class="w">        </span><span class="nx">extensions</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="s1">&#39;.js&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;.jsx&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;.json&#39;</span><span class="p">],</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="s1">&#39;babel-plugin-root-import&#39;</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">rootPathSuffix</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;src&#39;</span><span class="p">,</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">  </span><span class="p">},</span>
<span class="p">};</span>
</pre></div>
</div>
</section>
<section id="new-wrappers-in-block-editor">
<h3>New wrappers in block editor<a class="headerlink" href="#new-wrappers-in-block-editor" title="Link to this heading">#</a></h3>
<p>We have improved the overall UX of the block drag and drop feature by using the library
<code class="docutils literal notranslate"><span class="pre">react-beautiful-dnd</span></code> in the block editor. It introduces new wrappers (belonging to the
lib machinery) in the structure. The original structure and class names are still in
there (as children of these wrappers) to maintain maximum backwards compatibility. Those
might be cleaned up in next major versions, so if for some reason you have customized
the styling of your blocks in edit mode relying on the old structure, you might want to
review and adapt them.</p>
</section>
<section id="update-config-js">
<h3>Update <code class="docutils literal notranslate"><span class="pre">config.js</span></code><a class="headerlink" href="#update-config-js" title="Link to this heading">#</a></h3>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This is required since Volto version 6.1.0 <a class="reference external" href="https://github.com/plone/volto/pull/1541">1541</a></p>
</div>
<p>Add these lines of code to the <code class="docutils literal notranslate"><span class="pre">config.js</span></code> of your project:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="k">import</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">addonRoutes</span><span class="w"> </span><span class="kr">as</span><span class="w"> </span><span class="nx">defaultAddonRoutes</span><span class="p">,</span>
<span class="w">  </span><span class="nx">addonReducers</span><span class="w"> </span><span class="kr">as</span><span class="w"> </span><span class="nx">defaultAddonReducers</span><span class="p">,</span>
<span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@plone/volto/config&#39;</span><span class="p">;</span>

<span class="k">export</span><span class="w"> </span><span class="kd">const</span><span class="w"> </span><span class="nx">addonRoutes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[...</span><span class="nx">defaultAddonRoutes</span><span class="p">];</span>
<span class="k">export</span><span class="w"> </span><span class="kd">const</span><span class="w"> </span><span class="nx">addonReducers</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">...</span><span class="nx">defaultAddonReducers</span><span class="w"> </span><span class="p">};</span>
</pre></div>
</div>
<p>Update the <code class="docutils literal notranslate"><span class="pre">routes.js</span></code> of your project:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">addonRoutes</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;~/config&#39;</span><span class="p">;</span>

<span class="kd">const</span><span class="w"> </span><span class="nx">routes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
<span class="w">  </span><span class="p">{</span>
<span class="w">    </span><span class="nx">path</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;/&#39;</span><span class="p">,</span>
<span class="w">    </span><span class="nx">component</span><span class="o">:</span><span class="w"> </span><span class="nx">App</span><span class="p">,</span><span class="w"> </span><span class="c1">// Change this if you want a different component</span>
<span class="w">    </span><span class="nx">routes</span><span class="o">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">      </span><span class="c1">// Add your routes here</span>
<span class="w">      </span><span class="p">...(</span><span class="nx">addonRoutes</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="p">[]),</span>
<span class="w">      </span><span class="p">...</span><span class="nx">defaultRoutes</span><span class="p">,</span>
<span class="w">    </span><span class="p">],</span>
<span class="w">  </span><span class="p">},</span>
<span class="p">];</span>
</pre></div>
</div>
</section>
</section>
<section id="upgrading-to-volto-5-x-x">
<h2>Upgrading to Volto 5.x.x<a class="headerlink" href="#upgrading-to-volto-5-x-x" title="Link to this heading">#</a></h2>
<p>First, update the <code class="docutils literal notranslate"><span class="pre">package.json</span></code> of your Volto project to Volto 5.x.x.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="w">  </span><span class="nt">&quot;dependencies&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;@plone/volto&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;5.0.0&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="p">}</span>
</pre></div>
</div>
<section id="new-lazy-loading-boilerplate">
<h3>New lazy loading boilerplate<a class="headerlink" href="#new-lazy-loading-boilerplate" title="Link to this heading">#</a></h3>
<p>Volto is now capable of splitting and lazy loading components. This allows for better
performance and reduced bundle sizes, the client also has to parse and load less code,
improving the user experience, especially on mobile devices.</p>
<p>The boilerplate includes changes in the structural foundation of Volto itself. So if you
have updated in your projects any of these components:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">src/helpers/Html/Html.jsx</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">src/components/theme/App/App.jsx</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">src/server.jsx</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">src/client.jsx</span></code></p></li>
</ul>
<p>you should adapt them to the newest changes in Volto source code. You can do that by
diffing the new ones with your versions.</p>
</section>
<section id="testing-lazy-loaded-components">
<h3>Testing lazy loaded components<a class="headerlink" href="#testing-lazy-loaded-components" title="Link to this heading">#</a></h3>
<p>The whole process has been designed to have a minimal impact in existing projects.
However, only one thing should be changed in your components tests, especially if your components are composed of original Volto components (not Semantic UI ones, though).</p>
<p>You should adapt them by mocking the Volto component or resolve (await) in an
async construction before the test is fired. See this Codepen example:</p>
<p><a class="reference external" href="https://codesandbox.io/s/loadable-async-tests-l2bx9">https://codesandbox.io/s/loadable-async-tests-l2bx9</a></p>
<div class="highlight-jsx notranslate"><div class="highlight"><pre><span></span><span class="k">import</span><span class="w"> </span><span class="nx">React</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s2">&quot;react&quot;</span><span class="p">;</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">render</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s2">&quot;@testing-library/react&quot;</span><span class="p">;</span>
<span class="k">import</span><span class="w"> </span><span class="nx">App</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s2">&quot;./App&quot;</span><span class="p">;</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">Component1</span><span class="p">,</span><span class="w"> </span><span class="nx">Component2</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s2">&quot;./components&quot;</span><span class="p">;</span>

<span class="nx">describe</span><span class="p">(</span><span class="s2">&quot;CustomComponent&quot;</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">it</span><span class="p">(</span><span class="s2">&quot;rendered lazily&quot;</span><span class="p">,</span><span class="w"> </span><span class="k">async</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">container</span><span class="p">,</span><span class="w"> </span><span class="nx">getByText</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">render</span><span class="p">(&lt;</span><span class="nt">App</span><span class="w"> </span><span class="p">/&gt;);</span>

<span class="w">    </span><span class="k">await</span><span class="w"> </span><span class="nx">Component1</span><span class="p">;</span>
<span class="w">    </span><span class="k">await</span><span class="w"> </span><span class="nx">Component2</span><span class="p">;</span>

<span class="w">    </span><span class="nx">expect</span><span class="p">(</span><span class="nx">container</span><span class="p">.</span><span class="nx">firstChild</span><span class="p">).</span><span class="nx">toMatchSnapshot</span><span class="p">();</span>
<span class="w">    </span><span class="nx">expect</span><span class="p">(</span><span class="nx">getByText</span><span class="p">(</span><span class="s2">&quot;Component1&quot;</span><span class="p">));</span>
<span class="w">    </span><span class="nx">expect</span><span class="p">(</span><span class="nx">getByText</span><span class="p">(</span><span class="s2">&quot;Component2&quot;</span><span class="p">));</span>
<span class="w">  </span><span class="p">});</span>
</pre></div>
</div>
<p>There is also another pattern used in Volto core for testing you can transform your test
to be async aware like this:</p>
<div class="highlight-diff notranslate"><div class="highlight"><pre><span></span><span class="gd">--- a/src/components/manage/Preferences/PersonalPreferences.test.jsx</span>
<span class="gi">+++ b/src/components/manage/Preferences/PersonalPreferences.test.jsx</span>
<span class="gu">@@ -3,6 +3,7 @@ import renderer from &#39;react-test-renderer&#39;;</span>
<span class="w"> </span>import { Provider } from &#39;react-intl-redux&#39;;
<span class="w"> </span>import configureStore from &#39;redux-mock-store&#39;;
<span class="w"> </span>import { MemoryRouter } from &#39;react-router-dom&#39;;
<span class="gi">+import { wait } from &#39;@testing-library/react&#39;;</span>

<span class="w"> </span>import PersonalPreferences from &#39;./PersonalPreferences&#39;;

<span class="gu">@@ -13,7 +14,7 @@ jest.mock(&#39;react-portal&#39;, () =&gt; ({</span>
<span class="w"> </span>}));

<span class="w"> </span>describe(&#39;PersonalPreferences&#39;, () =&gt; {
<span class="gd">-  it(&#39;renders a personal preferences component&#39;, () =&gt; {</span>
<span class="gi">+  it(&#39;renders a personal preferences component&#39;, async () =&gt; {</span>
<span class="w"> </span>    const store = mockStore({
<span class="w"> </span>      intl: {
<span class="w"> </span>        locale: &#39;en&#39;,
<span class="gu">@@ -36,7 +37,8 @@ describe(&#39;PersonalPreferences&#39;, () =&gt; {</span>
<span class="w"> </span>        &lt;/MemoryRouter&gt;
<span class="w"> </span>      &lt;/Provider&gt;,
<span class="w"> </span>    );
<span class="gd">-    const json = component.toJSON();</span>
<span class="gd">-    expect(json).toMatchSnapshot();</span>
<span class="gi">+    await wait(() =&gt; {</span>
<span class="gi">+      expect(component.toJSON()).toMatchSnapshot();</span>
<span class="gi">+    });</span>
<span class="w"> </span>  });
<span class="w"> </span>});
</pre></div>
</div>
</section>
<section id="helmet-title-it-s-now-centralized-in-view-jsx">
<h3>Helmet title it's now centralized in <code class="docutils literal notranslate"><span class="pre">View.jsx</span></code><a class="headerlink" href="#helmet-title-it-s-now-centralized-in-view-jsx" title="Link to this heading">#</a></h3>
<p>All the calls for updating the title in the document performed by <code class="docutils literal notranslate"><span class="pre">Helmet</span></code> are now
centralized in the <code class="docutils literal notranslate"><span class="pre">View.jsx</span></code> components. It's recommended to remove all the Helmet
calls for updating the title from your components especially if you are using some
SEO add-ons for Volto, since not doing that could interfere with them.</p>
</section>
</section>
<section id="upgrading-to-volto-4-x-x">
<h2>Upgrading to Volto 4.x.x<a class="headerlink" href="#upgrading-to-volto-4-x-x" title="Link to this heading">#</a></h2>
<p>First, update your <code class="docutils literal notranslate"><span class="pre">package.json</span></code> to Volto 4.x.x.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="w">  </span><span class="nt">&quot;dependencies&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;@plone/volto&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;4.0.0&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="p">}</span>
</pre></div>
</div>
<section id="new-initial-blocks-per-content-type-setting-in-alpha-37">
<h3>New initial blocks per content type setting in Alpha 37<a class="headerlink" href="#new-initial-blocks-per-content-type-setting-in-alpha-37" title="Link to this heading">#</a></h3>
<p>Not a breaking change, but now there's a new setting in Blocks, <code class="docutils literal notranslate"><span class="pre">initialBlocks</span></code> where you can define the initial blocks for all content types. You can override the default ('title' and a 'text' block) and provide your own by modifying the configuration object:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kd">const</span><span class="w"> </span><span class="nx">initialBlocks</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">Document</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="s1">&#39;leadimage&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;title&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;text&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;listing&#39;</span><span class="w"> </span><span class="p">]</span>
<span class="p">};</span>
</pre></div>
</div>
<p>provide an empty object if you don't want to define any additional initial blocks and keep the default.</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kd">const</span><span class="w"> </span><span class="nx">initialBlocks</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{};</span>
</pre></div>
</div>
</section>
<section id="imagesidebar-moved-to-image-block-directory-in-alpha-29">
<h3>ImageSidebar moved to Image Block directory in Alpha 29<a class="headerlink" href="#imagesidebar-moved-to-image-block-directory-in-alpha-29" title="Link to this heading">#</a></h3>
<p>For better resource grouping, the <code class="docutils literal notranslate"><span class="pre">ImageSidebar</span></code> component has been moved to the <code class="docutils literal notranslate"><span class="pre">Image</span></code> block component directory: <code class="docutils literal notranslate"><span class="pre">components/manage/Blocks/Image</span></code></p>
</section>
<section id="copy-yarn-lock-from-volto-starter-kit-in-alpha-17">
<h3>Copy <code class="docutils literal notranslate"><span class="pre">yarn.lock</span></code> from <code class="docutils literal notranslate"><span class="pre">volto-starter-kit</span></code> in Alpha 17<a class="headerlink" href="#copy-yarn-lock-from-volto-starter-kit-in-alpha-17" title="Link to this heading">#</a></h3>
<p>Due to changes in the dependency tree, it's required to use a specific <code class="docutils literal notranslate"><span class="pre">yarn.lock</span></code> file by deleting it and copy the one here: <a class="github reference external" href="https://github.com/plone/volto-starter-kit/blob/master/yarn.lock">plone/volto-starter-kit</a> before upgrading to Volto alpha 17.</p>
</section>
<section id="forked-helmet-into-volto-core">
<h3>Forked Helmet into Volto core<a class="headerlink" href="#forked-helmet-into-volto-core" title="Link to this heading">#</a></h3>
<p>Due to the inactivity of the Helmet project, we decided to fork it to the core. It's part of the Volto helpers now. You have to update your imports accordingly. Please notice that now it's a named import:</p>
<div class="highlight-diff notranslate"><div class="highlight"><pre><span></span><span class="gd">--- a/src/components/Views/ReportView.jsx</span>
<span class="gi">+++ b/src/components/Views/ReportView.jsx</span>
<span class="gu">@@ -1,6 +1,6 @@</span>
<span class="w"> </span>import React from &#39;react&#39;;
<span class="w"> </span>import PropTypes from &#39;prop-types&#39;;
<span class="gd">-import Helmet from &#39;react-helmet&#39;;</span>
<span class="gi">+import { Helmet } from &#39;@plone/volto/helpers&#39;;</span>
<span class="w"> </span>import { defineMessages, injectIntl, FormattedMessage } from &#39;react-intl&#39;;
<span class="w"> </span>import { format, parse } from &#39;date-fns&#39;;
<span class="w"> </span>import { filter, map } from &#39;lodash&#39;;
</pre></div>
</div>
</section>
<section id="alpha-16-is-a-brownbag-release">
<h3>Alpha 16 is a brownbag release<a class="headerlink" href="#alpha-16-is-a-brownbag-release" title="Link to this heading">#</a></h3>
<p>There was a problem with the projects using Volto eslint config when upgrading to the latest versions related to typescript, we will take of that in the near future. So skip this version.</p>
</section>
<section id="stylelint-and-prettier-config-in-alpha-14">
<h3>Stylelint and prettier config in Alpha 14<a class="headerlink" href="#stylelint-and-prettier-config-in-alpha-14" title="Link to this heading">#</a></h3>
<p>In your project's boilerplate, you need to update the stylelint and prettier configuration accordingly to the changes made in Alpha 14 in <code class="docutils literal notranslate"><span class="pre">package.json</span></code> like this:</p>
<div class="highlight-diff notranslate"><div class="highlight"><pre><span></span><span class="gh">diff --git a/package.json b/package.json</span>
<span class="gh">index 7c8194c..5c63469 100644</span>
<span class="gd">--- a/package.json</span>
<span class="gi">+++ b/package.json</span>
<span class="gu">@@ -46,26 +46,51 @@</span>
<span class="w"> </span>  },
<span class="w"> </span>  &quot;prettier&quot;: {
<span class="w"> </span>    &quot;trailingComma&quot;: &quot;all&quot;,
<span class="gd">-    &quot;singleQuote&quot;: true</span>
<span class="gi">+    &quot;singleQuote&quot;: true,</span>
<span class="gi">+    &quot;overrides&quot;: [</span>
<span class="gi">+      {</span>
<span class="gi">+        &quot;files&quot;: &quot;*.overrides&quot;,</span>
<span class="gi">+        &quot;options&quot;: {</span>
<span class="gi">+          &quot;parser&quot;: &quot;less&quot;</span>
<span class="gi">+        }</span>
<span class="gi">+      }</span>
<span class="gi">+    ]</span>
<span class="w"> </span>  },
<span class="w"> </span>  &quot;stylelint&quot;: {
<span class="w"> </span>    &quot;extends&quot;: [
<span class="gd">-      &quot;stylelint-config-standard&quot;,</span>
<span class="gd">-      &quot;stylelint-config-idiomatic-order&quot;,</span>
<span class="gd">-      &quot;./node_modules/prettier-stylelint/config.js&quot;</span>
<span class="gd">-    ]</span>
<span class="gi">+      &quot;stylelint-config-idiomatic-order&quot;</span>
<span class="gi">+    ],</span>
<span class="gi">+    &quot;plugins&quot;: [</span>
<span class="gi">+      &quot;stylelint-prettier&quot;</span>
<span class="gi">+    ],</span>
<span class="gi">+    &quot;rules&quot;: {</span>
<span class="gi">+      &quot;prettier/prettier&quot;: true,</span>
<span class="gi">+      &quot;rule-empty-line-before&quot;: [</span>
<span class="gi">+        &quot;always-multi-line&quot;,</span>
<span class="gi">+        {</span>
<span class="gi">+          &quot;except&quot;: [</span>
<span class="gi">+            &quot;first-nested&quot;</span>
<span class="gi">+          ],</span>
<span class="gi">+          &quot;ignore&quot;: [</span>
<span class="gi">+            &quot;after-comment&quot;</span>
<span class="gi">+          ]</span>
<span class="gi">+        }</span>
<span class="gi">+      ]</span>
<span class="gi">+    },</span>
<span class="gi">+    &quot;ignoreFiles&quot;: &quot;theme/themes/default/**/*.overrides&quot;</span>
<span class="w"> </span>  },
<span class="w"> </span>  &quot;engines&quot;: {
<span class="w"> </span>    &quot;node&quot;: &quot;^10 || ^12&quot;
<span class="w"> </span>  },
<span class="w"> </span>  &quot;dependencies&quot;: {
<span class="gd">-    &quot;@plone/volto&quot;: &quot;4.0.0-alpha.10&quot;</span>
<span class="gi">+    &quot;@plone/volto&quot;: &quot;4.0.0-alpha.14&quot;</span>
<span class="w"> </span>  },
<span class="w"> </span>  &quot;devDependencies&quot;: {
<span class="w"> </span>    &quot;eslint-plugin-prettier&quot;: &quot;3.0.1&quot;,
<span class="gd">-    &quot;postcss-overrides&quot;: &quot;3.1.4&quot;,</span>
<span class="gd">-    &quot;prettier&quot;: &quot;1.17.0&quot;,</span>
<span class="gd">-    &quot;prettier-stylelint&quot;: &quot;0.4.2&quot;</span>
<span class="gi">+    &quot;prettier&quot;: &quot;1.19.1&quot;,</span>
<span class="gi">+    &quot;stylelint-config-idiomatic-order&quot;: &quot;6.2.0&quot;,</span>
<span class="gi">+    &quot;stylelint-config-prettier&quot;: &quot;6.0.0&quot;,</span>
<span class="gi">+    &quot;stylelint-prettier&quot;: &quot;1.1.1&quot;</span>
<span class="w"> </span>  },
<span class="w"> </span>  &quot;resolutions&quot;: {
<span class="w"> </span>    &quot;@plone/volto/razzle/webpack-dev-server&quot;: &quot;3.2.0&quot;
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you are linting actively your project, the build might be broken after this update. You should run:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ yarn prettier:fix
$ yarn stylelint:fix
</pre></div>
</div>
<p>then commit the changes.</p>
</div>
</section>
<section id="openobjectbrowser-api-change-in-alpha-11">
<h3>openObjectBrowser API change in Alpha 11<a class="headerlink" href="#openobjectbrowser-api-change-in-alpha-11" title="Link to this heading">#</a></h3>
<p>The API of the <code class="docutils literal notranslate"><span class="pre">ObjectBrowser</span></code> component changed in alpha 11 to make it more flexible.
In case you had custom blocks using it, you have to update the call in case you were using a <code class="docutils literal notranslate"><span class="pre">link</span></code> mode:</p>
<div class="highlight-diff notranslate"><div class="highlight"><pre><span></span><span class="gu">@@ -42,7 +42,7 @@ const OtherComp = ({</span>
<span class="w"> </span>                    href: &#39;&#39;,
<span class="w"> </span>                  });
<span class="w"> </span>                }
<span class="gd">-              : () =&gt; openObjectBrowser(&#39;link&#39;)</span>
<span class="gi">+              : () =&gt; openObjectBrowser({ mode: &#39;link&#39; })</span>
<span class="w"> </span>          }
<span class="w"> </span>          onChange={(name, value) =&gt; {
<span class="w"> </span>            onChangeBlock(block, {
</pre></div>
</div>
<p>See <a class="reference internal" href="../blocks/editcomponent.html#openobjectbrowser-handler-api-label"><span class="std std-ref">openObjectBrowser handler API</span></a> for more details.</p>
</section>
<section id="renaming-tiles-into-blocks">
<h3>Renaming Tiles into Blocks<a class="headerlink" href="#renaming-tiles-into-blocks" title="Link to this heading">#</a></h3>
<p>An internal renaming to use the term <code class="docutils literal notranslate"><span class="pre">Blocks</span></code> everywhere was done to unify naming through the code and the documentation.</p>
<p>Plone RESTAPI was updated for that purpose too, and running an upgrade step (do so in Plone's Addons control panel) is required in order to migrate the data. No step is required if you are using a brand-new ZODB.</p>
<p>This is the version compatibility table across all the packages involved:</p>
<p>Volto 4 - <code class="docutils literal notranslate"><span class="pre">plone.restapi</span></code> &gt;= 5.0.0 - <code class="docutils literal notranslate"><span class="pre">kitconcept.voltodemo</span></code> &gt;= 2.0</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The renaming happened in Volto 4 alpha.10 and plone.restapi 5.0.0. Volto 4 alpha versions under that release use older versions of <code class="docutils literal notranslate"><span class="pre">plone.restapi</span></code> and <code class="docutils literal notranslate"><span class="pre">kitconcept.voltodemo</span></code>, however if you are using alpha releases it's recommended to upgrade to the latest alpha or the final release of Volto 4.</p>
</div>
<p>The project configuration should also be updated, in your <code class="docutils literal notranslate"><span class="pre">src/config.js</span></code>:</p>
<div class="highlight-diff notranslate"><div class="highlight"><pre><span></span><span class="gh">diff --git a/src/config.js b/src/config.js</span>
<span class="gh">index f1fe9c2..9517c38 100644</span>
<span class="gd">--- a/src/config.js</span>
<span class="gi">+++ b/src/config.js</span>
<span class="gu">@@ -16,7 +16,7 @@ import {</span>
<span class="w"> </span>  settings as defaultSettings,
<span class="w"> </span>  views as defaultViews,
<span class="w"> </span>  widgets as defaultWidgets,
<span class="gd">-  tiles as defaultTiles,</span>
<span class="gi">+  blocks as defaultBlocks,</span>
<span class="w"> </span>} from &#39;@plone/volto/config&#39;;

<span class="w"> </span>export const settings = {
<span class="gu">@@ -31,6 +31,6 @@ export const widgets = {</span>
<span class="w"> </span>  ...defaultWidgets,
<span class="w"> </span>};

<span class="gd">-export const tiles = {</span>
<span class="gd">-  ...defaultTiles,</span>
<span class="gi">+export const blocks = {</span>
<span class="gi">+  ...defaultBlocks,</span>
<span class="w"> </span>};
</pre></div>
</div>
</section>
<section id="add-theme-customization-to-your-project">
<h3>Add theme customization to your project<a class="headerlink" href="#add-theme-customization-to-your-project" title="Link to this heading">#</a></h3>
<p>Volto 4 now also expects a file named <code class="docutils literal notranslate"><span class="pre">src/theme.js</span></code> with this content by default:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="k">import</span><span class="w"> </span><span class="s1">&#39;semantic-ui-less/semantic.less&#39;</span><span class="p">;</span>
<span class="k">import</span><span class="w"> </span><span class="s1">&#39;@plone/volto/../theme/themes/pastanaga/extras/extras.less&#39;</span><span class="p">;</span>
</pre></div>
</div>
</section>
<section id="remove-enzyme-configuration">
<h3>Remove enzyme configuration<a class="headerlink" href="#remove-enzyme-configuration" title="Link to this heading">#</a></h3>
<p>Enzyme has been removed, in favor of <code class="docutils literal notranslate"><span class="pre">&#64;testing-library/react</span></code>, and the configuration should be removed in <code class="docutils literal notranslate"><span class="pre">package.json</span></code>:</p>
<div class="highlight-diff notranslate"><div class="highlight"><pre><span></span><span class="gh">diff --git a/package.json b/package.json</span>
<span class="gh">index 27c7f8d..8f5f088 100644</span>
<span class="gd">--- a/package.json</span>
<span class="gi">+++ b/package.json</span>
<span class="gu">@@ -44,9 +44,6 @@</span>
<span class="w"> </span>      &quot;default&quot;,
<span class="w"> </span>      &quot;jest-junit&quot;
<span class="w"> </span>    ],
<span class="gd">-    &quot;snapshotSerializers&quot;: [</span>
<span class="gd">-      &quot;enzyme-to-json/serializer&quot;</span>
<span class="gd">-    ],</span>
<span class="w"> </span>    &quot;transform&quot;: {
<span class="w"> </span>      &quot;^.+\\.js(x)?$&quot;: &quot;babel-jest&quot;,
<span class="w"> </span>      &quot;^.+\\.css$&quot;: &quot;jest-css-modules&quot;,
</pre></div>
</div>
</section>
<section id="blocks-engine-blocks-configuration-object">
<h3>Blocks engine - Blocks configuration object<a class="headerlink" href="#blocks-engine-blocks-configuration-object" title="Link to this heading">#</a></h3>
<p>The blocks engine was updated and there are some important breaking changes, in case that
you've developed custom blocks. The configuration object is now unified and expresses all
the properties to model a block. This is how a block in the <code class="docutils literal notranslate"><span class="pre">defaultBlocks</span></code> object looks
like:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kd">const</span><span class="w"> </span><span class="nx">defaultBlocks</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">title</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;title&#39;</span><span class="p">,</span><span class="w"> </span><span class="c1">// The name (id) of the block</span>
<span class="w">    </span><span class="nx">title</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Title&#39;</span><span class="p">,</span><span class="w"> </span><span class="c1">// The display name of the block</span>
<span class="w">    </span><span class="nx">icon</span><span class="o">:</span><span class="w"> </span><span class="nx">titleSVG</span><span class="p">,</span><span class="w"> </span><span class="c1">// The icon used in the block chooser</span>
<span class="w">    </span><span class="nx">group</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;text&#39;</span><span class="p">,</span><span class="w"> </span><span class="c1">// The group (blocks can be grouped, displayed in the chooser)</span>
<span class="w">    </span><span class="nx">view</span><span class="o">:</span><span class="w"> </span><span class="nx">ViewTitleBlock</span><span class="p">,</span><span class="w"> </span><span class="c1">// The view mode component</span>
<span class="w">    </span><span class="nx">edit</span><span class="o">:</span><span class="w"> </span><span class="nx">EditTitleBlock</span><span class="p">,</span><span class="w"> </span><span class="c1">// The edit mode component</span>
<span class="w">    </span><span class="nx">restricted</span><span class="o">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w"> </span><span class="c1">// If the block is restricted, it won&#39;t show in in the chooser</span>
<span class="w">    </span><span class="nx">mostUsed</span><span class="o">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w"> </span><span class="c1">// A meta group `most used`, appearing at the top of the chooser</span>
<span class="w">    </span><span class="nx">blockHasOwnFocusManagement</span><span class="o">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w"> </span><span class="c1">// Set this to true if the block manages its own focus</span>
<span class="w">  </span><span class="p">},</span>
<span class="w">  </span><span class="p">...</span>
</pre></div>
</div>
<p>There is an additional object <code class="docutils literal notranslate"><span class="pre">groupBlocksOrder</span></code> that contains an array with the order
that the blocks group should appear:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kd">const</span><span class="w"> </span><span class="nx">groupBlocksOrder</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
<span class="w">  </span><span class="p">{</span><span class="w"> </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;mostUsed&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">title</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Most used&#39;</span><span class="w"> </span><span class="p">},</span>
<span class="w">  </span><span class="p">{</span><span class="w"> </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;text&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">title</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Text&#39;</span><span class="w"> </span><span class="p">},</span>
<span class="w">  </span><span class="p">{</span><span class="w"> </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;media&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">title</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Media&#39;</span><span class="w"> </span><span class="p">},</span>
<span class="w">  </span><span class="p">{</span><span class="w"> </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;common&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">title</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Common&#39;</span><span class="w"> </span><span class="p">},</span>
<span class="p">];</span>
</pre></div>
</div>
<p>You should adapt and merge the configuration of your own custom blocks to match the
<code class="docutils literal notranslate"><span class="pre">defaultBlocks</span></code> and <code class="docutils literal notranslate"><span class="pre">groupBlocksOrder</span></code> one. You can modify the order of the groups and
create your own as well.</p>
</section>
<section id="blocks-engine-simplification-of-the-edit-blocks-wrapper">
<h3>Blocks engine - Simplification of the edit blocks wrapper<a class="headerlink" href="#blocks-engine-simplification-of-the-edit-blocks-wrapper" title="Link to this heading">#</a></h3>
<p>The edit block wrapper boilerplate was quite big, and for bootstrapping an edit block you had to copy it from an existing block. Now all this boilerplate has been transferred to the Blocks Engine, so bootstrapping the edit component of a block is easier and does not require any pre-existing code.</p>
<p>In order to upgrade your blocks you should simplify the outer <code class="docutils literal notranslate"><span class="pre">&lt;div&gt;</span></code> (took as an example the Title block):</p>
<div class="highlight-diff notranslate"><div class="highlight"><pre><span></span><span class="gd">--- a/src/components/manage/Blocks/Title/Edit.jsx</span>
<span class="gi">+++ b/src/components/manage/Blocks/Title/Edit.jsx</span>
<span class="gu">@@ -138,11 +138,7 @@ class Edit extends Component {</span>
<span class="w"> </span>      return &lt;div /&gt;;
<span class="w"> </span>    }
<span class="w"> </span>    return (
<span class="gd">-      &lt;div</span>
<span class="gd">-        role=&quot;presentation&quot;</span>
<span class="gd">-        onClick={() =&gt; this.props.onSelectBlock(this.props.block)}</span>
<span class="gd">-        className={cx(&#39;block title&#39;, { selected: this.props.selected })}</span>
<span class="gd">-      &gt;</span>
<span class="gi">+      &lt;&gt;</span>
<span class="w"> </span>        &lt;Editor
<span class="w"> </span>          onChange={this.onChange}
<span class="w"> </span>          editorState={this.state.editorState}
<span class="gu">@@ -185,7 +181,7 @@ class Edit extends Component {</span>
<span class="w"> </span>            this.node = node;
<span class="w"> </span>          }}
<span class="w"> </span>        /&gt;
<span class="gd">-      &lt;/div&gt;</span>
<span class="gi">+      &lt;/&gt;</span>
<span class="w"> </span>    );
<span class="w"> </span>  }
<span class="w"> </span>}
</pre></div>
</div>
<p>The blocks engine now takes care of the keyboard navigation of the blocks, so you need to remove the outer <code class="docutils literal notranslate"><span class="pre">&lt;div&gt;</span></code> from your custom block, then your block doesn't have to react to the change on <code class="docutils literal notranslate"><span class="pre">this.props.selected</span></code> either, because it's also something that the blocks engine already does for you.</p>
<p>The focus management is also transferred to the engine, so it's not needed for your block to manage the focus. However, if your block does indeed require to manage its own focus, then you should mark it with the <code class="docutils literal notranslate"><span class="pre">blockHasOwnFocusManagement</span></code> property in the blocks configuration object:</p>
<div class="highlight-jsx notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="w">    </span><span class="nx">text</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="linenos"> 2</span><span class="w">      </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;text&#39;</span><span class="p">,</span>
<span class="linenos"> 3</span><span class="w">      </span><span class="nx">title</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Text&#39;</span><span class="p">,</span>
<span class="linenos"> 4</span><span class="w">      </span><span class="nx">icon</span><span class="o">:</span><span class="w"> </span><span class="nx">textSVG</span><span class="p">,</span>
<span class="linenos"> 5</span><span class="w">      </span><span class="nx">group</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;text&#39;</span><span class="p">,</span>
<span class="linenos"> 6</span><span class="w">      </span><span class="nx">view</span><span class="o">:</span><span class="w"> </span><span class="nx">ViewTextBlock</span><span class="p">,</span>
<span class="linenos"> 7</span><span class="w">      </span><span class="nx">edit</span><span class="o">:</span><span class="w"> </span><span class="nx">EditTextBlock</span><span class="p">,</span>
<span class="linenos"> 8</span><span class="w">      </span><span class="nx">restricted</span><span class="o">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span>
<span class="linenos"> 9</span><span class="w">      </span><span class="nx">mostUsed</span><span class="o">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span>
<span class="hll"><span class="linenos">10</span><span class="w">      </span><span class="nx">blockHasOwnFocusManagement</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
</span><span class="linenos">11</span><span class="w">    </span><span class="p">},</span>
</pre></div>
</div>
</section>
<section id="default-view-renaming">
<h3>Default view renaming<a class="headerlink" href="#default-view-renaming" title="Link to this heading">#</a></h3>
<p>The default view for content types <code class="docutils literal notranslate"><span class="pre">DocumentView.jsx</span></code> has been renamed to a more appropriate <code class="docutils literal notranslate"><span class="pre">DefaultView.jsx</span></code>. This view contains the code for rendering blocks in case the content type has been Blocks enabled. Enable Blocks on your content types by composing the view of your content type using <code class="docutils literal notranslate"><span class="pre">DefaultView</span></code> component.</p>
</section>
<section id="deprecations">
<h3>Deprecations<a class="headerlink" href="#deprecations" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>The old messages container has been removed since it's not used any more by Volto. We changed it to use the <code class="docutils literal notranslate"><span class="pre">Toast</span></code> library.</p></li>
<li><p>Improved the Pastanaga Editor block wrapper container layout, deprecating the hack <code class="docutils literal notranslate"><span class="pre">.ui.wrapper</span> <span class="pre">&gt;</span> <span class="pre">*</span></code>.</p></li>
</ul>
</section>
</section>
<section id="upgrading-to-volto-3-x">
<h2>Upgrading to Volto 3.x<a class="headerlink" href="#upgrading-to-volto-3-x" title="Link to this heading">#</a></h2>
<p>Volto was upgraded to use Razzle 3.0.0 which is not a breaking change itself,
but it forces some changes in the boilerplate on your Volto projects. You
should change the babel config by deleting .babelrc file and creating a new
file <code class="docutils literal notranslate"><span class="pre">babel.config.js</span></code> with these contents:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s1">&#39;@plone/volto/babel&#39;</span><span class="p">);</span>
</pre></div>
</div>
<p>Then update your <code class="docutils literal notranslate"><span class="pre">package.json</span></code> to Volto 3.x.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="w">  </span><span class="nt">&quot;dependencies&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;@plone/volto&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;3.0.0&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="p">}</span>
</pre></div>
</div>
<p>Volto 3.x is compatible with the new changes introduced in the vocabularies
endpoint in <code class="docutils literal notranslate"><span class="pre">plone.restapi</span></code> 4.0.0. If you custom-build a widget based in the
Volto ones, you should update them as well. Volto updated its own widget set to
support them:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">components/manage/Widgets/ArrayWidget</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">components/manage/Widgets/SelectWidget</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">components/manage/Widgets/TokenWidget</span></code></p></li>
</ul>
<p>They all use <code class="docutils literal notranslate"><span class="pre">react-select</span></code> third party library for render it.</p>
</section>
<section id="upgrading-to-volto-2-x">
<h2>Upgrading to Volto 2.x<a class="headerlink" href="#upgrading-to-volto-2-x" title="Link to this heading">#</a></h2>
<section id="improved-blocks-hoc">
<h3>Improved Blocks HOC<a class="headerlink" href="#improved-blocks-hoc" title="Link to this heading">#</a></h3>
<p>The Blocks HOC (High Order Component) was changed to lift off some
features from the blocks themselves, and now it takes care of them by itself.</p>
<ul class="simple">
<li><p>The delete block feature was moved to it</p></li>
<li><p>The keylisteners for navigating through blocks was moved to it</p></li>
<li><p>The properties passed down to the blocks are improved and documented</p></li>
</ul>
<p>This change only applies to your existing blocks, you have to update them
accordingly by deleting the trash icon and action from the end of your blocks</p>
<div class="highlight-jsx notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">selected</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="p">(</span>
<span class="w">  </span><span class="p">&lt;</span><span class="nt">Button</span>
<span class="w">    </span><span class="na">icon</span>
<span class="w">    </span><span class="na">basic</span>
<span class="w">    </span><span class="na">onClick</span><span class="o">=</span><span class="p">{()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">onDeleteBlock</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">block</span><span class="p">)}</span>
<span class="w">    </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;block-delete-button&quot;</span>
<span class="w">  </span><span class="p">&gt;</span>
<span class="w">    </span><span class="p">&lt;</span><span class="nt">Icon</span><span class="w"> </span><span class="na">name</span><span class="o">=</span><span class="p">{</span><span class="nx">trashSVG</span><span class="p">}</span><span class="w"> </span><span class="na">size</span><span class="o">=</span><span class="s">&quot;18px&quot;</span><span class="w"> </span><span class="p">/&gt;</span>
<span class="w">  </span><span class="p">&lt;/</span><span class="nt">Button</span><span class="p">&gt;</span>
<span class="p">)}</span>
</pre></div>
</div>
<p>Modify the parent element of your block making these changes:</p>
<div class="highlight-jsx notranslate"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">div</span>
<span class="w">  </span><span class="na">role</span><span class="o">=</span><span class="s">&quot;presentation&quot;</span>
<span class="w">  </span><span class="na">onClick</span><span class="o">=</span><span class="p">{()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">onSelectBlock</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">block</span><span class="p">)}</span>
<span class="w">  </span><span class="na">className</span><span class="o">=</span><span class="p">{</span><span class="nx">cx</span><span class="p">(</span><span class="s1">&#39;block hero&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">selected</span><span class="o">:</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">selected</span><span class="p">,</span>
<span class="w">  </span><span class="p">})}</span>
<span class="w">  </span><span class="na">tabIndex</span><span class="o">=</span><span class="p">{</span><span class="mf">0</span><span class="p">}</span>
<span class="w">  </span><span class="na">onKeyDown</span><span class="o">=</span><span class="p">{</span><span class="nx">e</span><span class="w"> </span><span class="p">=&gt;</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">handleKeyDown</span><span class="p">(</span>
<span class="w">      </span><span class="nx">e</span><span class="p">,</span>
<span class="w">      </span><span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">index</span><span class="p">,</span>
<span class="w">      </span><span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">block</span><span class="p">,</span>
<span class="w">      </span><span class="k">this</span><span class="p">.</span><span class="nx">node</span>
<span class="w">    </span><span class="p">)</span>
<span class="w">  </span><span class="p">}</span>
<span class="w">  </span><span class="na">ref</span><span class="o">=</span><span class="p">{</span><span class="nx">node</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">node</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">node</span><span class="p">;</span>
<span class="w">  </span><span class="p">}}</span>
<span class="p">&gt;</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Add the keylisteners to the parent element of your block</p></li>
</ul>
<div class="highlight-jsx notranslate"><div class="highlight"><pre><span></span><span class="w">  </span><span class="nx">onKeyDown</span><span class="o">=</span><span class="p">{</span><span class="nx">e</span><span class="w"> </span><span class="p">=&gt;</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">handleKeyDown</span><span class="p">(</span>
<span class="w">      </span><span class="nx">e</span><span class="p">,</span>
<span class="w">      </span><span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">index</span><span class="p">,</span>
<span class="w">      </span><span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">block</span><span class="p">,</span>
<span class="w">      </span><span class="k">this</span><span class="p">.</span><span class="nx">node</span>
<span class="w">    </span><span class="p">)</span>
<span class="w">  </span><span class="p">}</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Add a ref to it and assign it to <code class="docutils literal notranslate"><span class="pre">this.node</span></code>.</p></li>
</ul>
<div class="highlight-jsx notranslate"><div class="highlight"><pre><span></span><span class="w">  </span><span class="nx">ref</span><span class="o">=</span><span class="p">{</span><span class="nx">node</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">node</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">node</span><span class="p">;</span>
<span class="w">  </span><span class="p">}}</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Add a proper role for it</p></li>
</ul>
<div class="highlight-jsx notranslate"><div class="highlight"><pre><span></span><span class="w">  </span><span class="nx">role</span><span class="o">=</span><span class="s2">&quot;presentation&quot;</span>
</pre></div>
</div>
<p>Take a look into the implementation of the default Volto blocks to get a grasp
on all the edge cases related to keyboard navigation and how to deal with them.</p>
</section>
<section id="reordering-of-the-internal-css-added-extra-files">
<h3>Reordering of the internal CSS, added extra files<a class="headerlink" href="#reordering-of-the-internal-css-added-extra-files" title="Link to this heading">#</a></h3>
<p>The internal Volto CSS has been tidied up and reordered, for that reason, some
other extras have been introduced and the theme.config in your project needs to
be updated by making sure you have these two extras in the
<code class="docutils literal notranslate"><span class="pre">theme.config</span></code> file:</p>
<div class="highlight-less notranslate"><div class="highlight"><pre><span></span><span class="c">/* Extras */</span>
<span class="nv">@main</span><span class="w">        </span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;pastanaga&#39;</span><span class="o">;</span>
<span class="nv">@custom</span><span class="w">      </span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;pastanaga&#39;</span><span class="o">;</span>
</pre></div>
</div>
</section>
</section>
</section>


                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="../deploying/performance.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">critical.css (above the fold) optimizations</p>
      </div>
    </a>
    <a class="right-next"
       href="../client/index.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Plone REST API JavaScript client</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#upgrading-to-volto-18-x-x">Upgrading to Volto 18.x.x</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#cookieplone-is-now-the-recommended-project-and-add-on-generator-for-volto-18">Cookieplone is now the recommended project and add-on generator for Volto 18</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#node-js-version-support-adding-22-dropping-18">Node.js version support: adding 22, dropping 18</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#volto-s-internal-dependencies-and-devdependencies-are-now-properly-sorted-out">Volto's internal <code class="docutils literal notranslate"><span class="pre">dependencies</span></code> and <code class="docutils literal notranslate"><span class="pre">devDependencies</span></code> are now properly sorted out</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#new-dependencies-synchronizer">New dependencies synchronizer</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#volto-runs-now-on-react-18-2-0">Volto runs now on React 18.2.0</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#draftjs-dependency-and-text-table-and-hero-blocks-removed"><code class="docutils literal notranslate"><span class="pre">draftJS</span></code> dependency and <code class="docutils literal notranslate"><span class="pre">text</span></code>, <code class="docutils literal notranslate"><span class="pre">table</span></code>, and <code class="docutils literal notranslate"><span class="pre">hero</span></code> blocks removed</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#react-portal-dependency-removed"><code class="docutils literal notranslate"><span class="pre">react-portal</span></code> dependency removed</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#plone-registry-moved-to-esm"><code class="docutils literal notranslate"><span class="pre">@plone/registry</span></code> moved to ESM</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#upgraded-slate-libraries">Upgraded Slate libraries</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#remove-the-disabled-property-from-fields-in-the-source-content-in-babel-view">Remove the disabled property from fields in the source content in babel view</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#volto-slate-cypress-helpers-moved-to-its-own-module"><code class="docutils literal notranslate"><span class="pre">volto-slate</span></code> Cypress helpers moved to its own module</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#storybook-8">Storybook 8</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#form-component-passes-down-id-of-the-current-fieldset">Form component passes down <code class="docutils literal notranslate"><span class="pre">id</span></code> of the current fieldset</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#changes-from-the-original-slots-feature">Changes from the original slots feature</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#improve-container-detection">Improve container detection</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#new-naming-convention-for-makefile-commands">New naming convention for <code class="docutils literal notranslate"><span class="pre">Makefile</span></code> commands</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#new-image-upload-widget-component">New image upload widget component</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#renamed-the-constants-languages-module">Renamed the <code class="docutils literal notranslate"><span class="pre">constants/Languages</span></code> module</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#renamed-test-setup-config-module">Renamed <code class="docutils literal notranslate"><span class="pre">test-setup-config</span></code> module</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#removed-react-share-library-and-socialsharing-component">Removed <code class="docutils literal notranslate"><span class="pre">react-share</span></code> library and <code class="docutils literal notranslate"><span class="pre">SocialSharing</span></code> component</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#refactor-of-formvalidation-module">Refactor of <code class="docutils literal notranslate"><span class="pre">FormValidation</span></code> module</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#field-validation-for-blocks">Field validation for blocks</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#schemawidget-widget-registration-change"><code class="docutils literal notranslate"><span class="pre">SchemaWidget</span></code> widget registration change</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#tags-in-slot">Tags in slot</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#table-of-contents-block-markup-change">Table of Contents block markup change</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#update-needed-to-project-boilerplate-generated-with-plone-generator-volto">Update needed to project boilerplate generated with <code class="docutils literal notranslate"><span class="pre">@plone/generator-volto</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#added-rule-for-eslint-to-detect-missing-key-property-in-iterators">Added rule for ESlint to detect missing key property in iterators.</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#add-missing-overrides-to-projects-in-package-json">Add missing overrides to projects in <code class="docutils literal notranslate"><span class="pre">package.json</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#deprecation-notices-for-volto-18">Deprecation notices for Volto 18</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#plone-generator-volto"><code class="docutils literal notranslate"><span class="pre">@plone/generator-volto</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#alternative">Alternative</a></li>
</ul>
</li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#volto-project-configurations">Volto project configurations</a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#id1">Alternative</a></li>
</ul>
</li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#semantic-ui">Semantic UI</a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#alternatives">Alternatives</a></li>
</ul>
</li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#lodash-library"><code class="docutils literal notranslate"><span class="pre">lodash</span></code> library</a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#id2">Alternatives</a></li>
</ul>
</li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#loadable-component-and-volto-loadables-framework"><code class="docutils literal notranslate"><span class="pre">@loadable/component</span></code> and Volto <code class="docutils literal notranslate"><span class="pre">Loadables</span></code> framework</a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#id3">Alternatives</a></li>
</ul>
</li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#removal-of-barrel-import-files">Removal of barrel import files</a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#id4">Alternative</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#upgrading-to-volto-17-x-x">Upgrading to Volto 17.x.x</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#ending-support-for-node-js-14-and-16">Ending support for Node.js 14 and 16</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#webpack-5">Webpack 5</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#razzle-upgraded-to-version-4-2-18">Razzle upgraded to version <code class="docutils literal notranslate"><span class="pre">4.2.18</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#upgraded-linters-eslint-prettier-and-stylelint">Upgraded linters, ESlint, Prettier and Stylelint</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#typescript-support-in-volto">TypeScript support in Volto</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#upgrade-eslint-and-use-babel-eslint-parser">Upgrade ESlint and use <code class="docutils literal notranslate"><span class="pre">@babel/eslint-parser</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#blockchooser-component-now-uses-popperjs-internally"><code class="docutils literal notranslate"><span class="pre">BlockChooser</span></code> component now uses <code class="docutils literal notranslate"><span class="pre">popperjs</span></code> internally</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#removed-hamburgers-library">Removed <code class="docutils literal notranslate"><span class="pre">hamburgers</span></code> library</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#fixed-i18n-script-by-taking-into-account-the-real-add-on-order">Fixed i18n script by taking into account the real add-on order</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#use-proper-heading-tag-depending-on-the-headline-in-default-listing-template">Use proper heading tag (depending on the headline) in default listing template</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#use-apiexpanders-to-improve-performance">Use <code class="docutils literal notranslate"><span class="pre">apiExpanders</span></code> to improve performance</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#cypress-upgraded-to-13-1-0">Cypress upgraded to 13.1.0</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#new-image-component">New Image component</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#removed-teaser-block-utils">Removed Teaser block utils</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#grid-block-migration-from-kitconcept-volto-blocks-grid">Grid block migration from <code class="docutils literal notranslate"><span class="pre">@kitconcept/volto-blocks-grid</span></code></a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#upgrading-to-volto-16-x-x">Upgrading to Volto 16.x.x</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#volto-slate-is-now-in-core"><code class="docutils literal notranslate"><span class="pre">volto-slate</span></code> is now in core</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#new-projects">New projects</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#existing-projects-already-using-volto-slate-add-on">Existing projects, already using <code class="docutils literal notranslate"><span class="pre">volto-slate</span></code> add-on</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#existing-projects-using-core-draftjs-opting-to-continue-using-draftjs">Existing projects using core <code class="docutils literal notranslate"><span class="pre">draftJS</span></code>, opting to continue using <code class="docutils literal notranslate"><span class="pre">draftJS</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#existing-projects-using-core-draftjs-opting-to-start-using-slate-without-migrating-possible-but-not-recommended">Existing projects using core <code class="docutils literal notranslate"><span class="pre">draftJS</span></code>, opting to start using <code class="docutils literal notranslate"><span class="pre">slate</span></code> without migrating (possible, but not recommended)</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#id5">Existing projects using core <code class="docutils literal notranslate"><span class="pre">draftJS</span></code>, opting to migrate to <code class="docutils literal notranslate"><span class="pre">slate</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#deprecating-node-js-12">Deprecating Node.js 12</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#upgraded-to-razzle-4">Upgraded to Razzle 4</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#steps-after-upgrade">Steps after upgrade</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#upgrade-and-update-add-ons-dependency-on-plone-scripts">Upgrade and update add-ons dependency on <code class="docutils literal notranslate"><span class="pre">@plone/scripts</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#jest-is-downgraded-from-version-27-to-26">Jest is downgraded from version 27 to 26</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#upgrade-to-use-yarn-3">Upgrade to use yarn 3</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#removed-date-fns-from-build">Removed <code class="docutils literal notranslate"><span class="pre">date-fns</span></code> from build</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#upgraded-core-to-use-cypress-11">Upgraded core to use Cypress 11</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#the-complete-configuration-registry-is-passed-to-the-add-ons-and-the-project-configuration-pipeline">The complete configuration registry is passed to the add-ons and the project configuration pipeline</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#refactor-the-component-registry-api-in-the-configuration-registry">Refactor the component registry API in the configuration registry</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#renamed-registry-resolve-to-registry-getcomponent">Renamed <code class="docutils literal notranslate"><span class="pre">registry.resolve</span></code> to <code class="docutils literal notranslate"><span class="pre">registry.getComponent</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#registry-getcomponent-signature-changes"><code class="docutils literal notranslate"><span class="pre">registry.getComponent</span></code> signature changes</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#main-workflow-change-menu-changed-from-pastanaga-ui-simplification-to-classic-ui-plone-implementation">Main workflow change menu changed from Pastanaga UI simplification to Classic UI Plone implementation</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#move-layout-constants-to-config-views-layoutviewsnamesmapping">Move Layout constants to <code class="docutils literal notranslate"><span class="pre">config.views.layoutViewsNamesMapping</span></code>.</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#react-window-is-no-longer-a-volto-dependency"><code class="docutils literal notranslate"><span class="pre">react-window</span></code> is no longer a Volto dependency</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#change-the-way-the-style-wrapper-is-enabled-and-how-to-add-the-styles-field">Change the way the style wrapper is enabled and how to add the <code class="docutils literal notranslate"><span class="pre">styles</span></code> field</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#sentry-integration-moved-from-volto-core-to-add-on">Sentry integration moved from Volto core to add-on</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#upgrade-husky-to-latest-version">Upgrade <code class="docutils literal notranslate"><span class="pre">husky</span></code> to latest version</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#better-defaults-handling">Better defaults handling</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#upgrading-to-volto-15-x-x">Upgrading to Volto 15.x.x</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#updated-react-cookie-library">Updated react-cookie library</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#update-your-rich-text-editor-configuration">Update your Rich Text Editor configuration</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#language-switcher-no-longer-takes-care-of-the-sync-of-the-language">Language Switcher no longer takes care of the sync of the language</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#linkview-component-markup-change">LinkView component markup change</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#rename-core-sandbox-fixture-to-coresandbox">Rename core-sandbox fixture to coresandbox</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#extend-the-original-intent-and-rename-razzle-testing-addons-to-addons">Extend the original intent and rename <code class="docutils literal notranslate"><span class="pre">RAZZLE_TESTING_ADDONS</span></code> to <code class="docutils literal notranslate"><span class="pre">ADDONS</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#remove-and-deprecate-lang-cookie">Remove and deprecate <code class="docutils literal notranslate"><span class="pre">lang</span></code> cookie</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#use-root-alias-instead-of">Use <code class="docutils literal notranslate"><span class="pre">@root</span></code> alias instead of <code class="docutils literal notranslate"><span class="pre">~</span></code></a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#upgrading-to-volto-14-x-x">Upgrading to Volto 14.x.x</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#revisited-rethought-and-refactored-seamless-mode">Revisited, rethought and refactored seamless mode</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#update-i18n-configuration-for-projects-and-add-ons">Update i18n configuration for projects and add-ons</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#projects">Projects</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#add-ons">Add-ons</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#removal-of-the-old-configuration-system-based-on-imports">Removal of the old configuration system based on imports</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#content-locking">Content locking</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#blocks-chooser-now-uses-the-title-instead-of-the-id-of-the-block-as-translation-source">Blocks chooser now uses the title instead of the id of the block as translation source</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#variation-field-now-uses-the-title-instead-of-the-id-of-the-variation-as-translation-source">Variation field now uses the title instead of the id of the variation as translation source</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#listing-block-no-longer-retrieve-fullobjects-by-default">Listing block no longer retrieve fullobjects by default</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#new-mobile-navigation-menu">New mobile navigation menu</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#adjusted-main-logo-component-styling">Adjusted main Logo component styling</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#move-theme-js-import-to-top-of-the-client-code">Move <code class="docutils literal notranslate"><span class="pre">theme.js</span></code> import to top of the client code</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#getvocabulary-action-changed-its-signature"><code class="docutils literal notranslate"><span class="pre">getVocabulary</span></code> action changed its signature</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#upgrading-to-volto-13-x-x">Upgrading to Volto 13.x.x</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#deprecating-node-js-10">Deprecating Node.js 10</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#seamless-mode-is-the-default-in-development-mode">Seamless mode is the default in development mode</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#refactored-listing-block-using-schemas-and-objectwidget">Refactored Listing block using schemas and ObjectWidget</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#migrate-your-existing-listing-blocks">Migrate your existing listing blocks</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#update-your-custom-variations-templates-in-your-project-listing-blocks">Update your custom variations (templates) in your project listing blocks</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#control-panel-icons-are-now-svg-based-instead-of-font-based">Control panel icons are now SVG based instead of font based</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#login-form-ui-and-accessibility-updated">Login form UI and accessibility updated</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#changes-in-the-table-block-feature-set-and-messages">Changes in the Table block feature set and messages</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#upgrading-to-volto-12-x-x">Upgrading to Volto 12.x.x</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#volto-configuration-registry">Volto configuration registry</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#changes-in-your-code-and-local-customizations">Changes in your code (and local customizations)</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#changes-in-your-project-s-routes-module">Changes in your project's <code class="docutils literal notranslate"><span class="pre">routes</span></code> module</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#changes-in-your-project-s-config-module">Changes in your project's <code class="docutils literal notranslate"><span class="pre">config</span></code> module</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#changes-in-your-project-s-package-json">Changes in your project's <code class="docutils literal notranslate"><span class="pre">package.json</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#changes-in-snapshots-tests-in-your-project">Changes in snapshots tests in your project</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#alternative-both-configurations-coexisting">Alternative - both configurations coexisting</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#upgrading-to-volto-11-x-x">Upgrading to Volto 11.x.x</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#alignblock-component-new-placement-and-import-path">AlignBlock component new placement and import path</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id-is-removed-from-formfieldwrapper">id is removed from FormFieldWrapper</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#new-default-listing-template">New Default Listing Template</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#upgrading-to-volto-10-x-x">Upgrading to Volto 10.x.x</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#remove-the-razzle-plugins-patch">Remove the Razzle plugins patch</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#getcontent-changes">getContent changes</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#testing-library-react-upgrade-notice"><code class="docutils literal notranslate"><span class="pre">@testing-library/react</span></code> upgrade notice</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#upgrading-to-volto-9-x-x">Upgrading to Volto 9.x.x</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#internal-upgrade-to-use-razzle-3-3-7">Internal upgrade to use Razzle 3.3.7</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#changes-involved">Changes involved</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#babel-config-housekeeping">Babel config housekeeping</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#hoisting-problems-on-some-setups">Hoisting problems on some setups</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#recommended-browserslist-in-package-json">Recommended <code class="docutils literal notranslate"><span class="pre">browserslist</span></code> in <code class="docutils literal notranslate"><span class="pre">package.json</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#new-webpack-resolver-plugin">New webpack resolver plugin</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#content-types-icons">Content Types icons</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#upgrading-to-volto-8-x-x">Upgrading to Volto 8.x.x</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#upgrade-package-json-testing-configuration">Upgrade package.json testing configuration</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#upgrading-to-volto-7-x-x">Upgrading to Volto 7.x.x</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#new-webpack-resolve-alias-for-volto-themes">New webpack resolve alias for Volto themes</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#upgrading-to-volto-6-x-x">Upgrading to Volto 6.x.x</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#upgrade-to-node-js-12">Upgrade to Node.js 12</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#new-razzle-version-and-related-development-dependencies">New Razzle version and related development dependencies</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#upgrade-local-dependencies-versions">Upgrade local dependencies versions</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#update-package-json-config">Update <code class="docutils literal notranslate"><span class="pre">package.json</span></code> config</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#prettier">Prettier</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#stylelint">Stylelint</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#css-modules-are-not-supported-anymore">CSS modules are not supported anymore</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#update-your-eslint-config">Update your eslint config</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#new-wrappers-in-block-editor">New wrappers in block editor</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#update-config-js">Update <code class="docutils literal notranslate"><span class="pre">config.js</span></code></a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#upgrading-to-volto-5-x-x">Upgrading to Volto 5.x.x</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#new-lazy-loading-boilerplate">New lazy loading boilerplate</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#testing-lazy-loaded-components">Testing lazy loaded components</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#helmet-title-it-s-now-centralized-in-view-jsx">Helmet title it's now centralized in <code class="docutils literal notranslate"><span class="pre">View.jsx</span></code></a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#upgrading-to-volto-4-x-x">Upgrading to Volto 4.x.x</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#new-initial-blocks-per-content-type-setting-in-alpha-37">New initial blocks per content type setting in Alpha 37</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#imagesidebar-moved-to-image-block-directory-in-alpha-29">ImageSidebar moved to Image Block directory in Alpha 29</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#copy-yarn-lock-from-volto-starter-kit-in-alpha-17">Copy <code class="docutils literal notranslate"><span class="pre">yarn.lock</span></code> from <code class="docutils literal notranslate"><span class="pre">volto-starter-kit</span></code> in Alpha 17</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#forked-helmet-into-volto-core">Forked Helmet into Volto core</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#alpha-16-is-a-brownbag-release">Alpha 16 is a brownbag release</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#stylelint-and-prettier-config-in-alpha-14">Stylelint and prettier config in Alpha 14</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#openobjectbrowser-api-change-in-alpha-11">openObjectBrowser API change in Alpha 11</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#renaming-tiles-into-blocks">Renaming Tiles into Blocks</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#add-theme-customization-to-your-project">Add theme customization to your project</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#remove-enzyme-configuration">Remove enzyme configuration</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#blocks-engine-blocks-configuration-object">Blocks engine - Blocks configuration object</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#blocks-engine-simplification-of-the-edit-blocks-wrapper">Blocks engine - Simplification of the edit blocks wrapper</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#default-view-renaming">Default view renaming</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#deprecations">Deprecations</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#upgrading-to-volto-3-x">Upgrading to Volto 3.x</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#upgrading-to-volto-2-x">Upgrading to Volto 2.x</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#improved-blocks-hoc">Improved Blocks HOC</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#reordering-of-the-internal-css-added-extra-files">Reordering of the internal CSS, added extra files</a></li>
</ul>
</li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Plone Community
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright Volto Foundation.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
<div class="extra_footer">
  <p>The text and illustrations in this website are licensed by the Plone Foundation under a Creative Commons Attribution 4.0 International license. Plone and the Plone® logo are registered trademarks of the Plone Foundation, registered in the United States and other countries. For guidelines on the permitted uses of the Plone trademarks, see <a href="https://plone.org/foundation/logo">https://plone.org/foundation/logo</a>. All other trademarks are owned by their respective owners.</p>
<p>Pull request previews by <a href="https://readthedocs.org/" target="_blank">Read the Docs</a>.</p>
</div>
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
  
  
    <div class="footer-items__end">
      
        <div class="footer-item">0.0.1</div>
      
    </div>
  
</div>

  </footer>
  </body>
</html>