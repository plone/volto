Add widget registration and getting widgets from config with new methods. @deodorhunter