Some improvements and fixes in blocks and settings types. @sneridagh
