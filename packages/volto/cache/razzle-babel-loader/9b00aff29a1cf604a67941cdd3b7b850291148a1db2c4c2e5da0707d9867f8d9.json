{"ast":null,"code":"var _jsxFileName = \"/Users/varshanmaji/Projects/volto/packages/volto/src/components/manage/LockingToastsFactory/LockingToastsFactory.jsx\";\nvar __jsx = React.createElement;\nimport React from 'react';\nimport { toast } from 'react-toastify';\nimport { useSelector } from 'react-redux';\nimport { useLocation } from 'react-router-dom';\nimport { defineMessages, useIntl } from 'react-intl';\nimport FormattedDate from '@plone/volto/components/theme/FormattedDate/FormattedDate';\nimport Toast from '@plone/volto/components/manage/Toast/Toast';\nimport useDeepCompareEffect from 'use-deep-compare-effect';\nconst messages = defineMessages({\n  thisItemIsLocked: {\n    \"id\": \"This item was locked by {creator} on {date}\",\n    \"defaultMessage\": \"This item was locked by {creator} on {date}\"\n  },\n  unlockItem: {\n    \"id\": \"If you are certain this user has abandoned the object, you may unlock the object. You will then be able to edit it.\",\n    \"defaultMessage\": \"If you are certain this user has abandoned the object, you may unlock the object. You will then be able to edit it.\"\n  }\n});\nconst LockingToastsFactory = props => {\n  const intl = useIntl();\n  const pathname = useLocation().pathname;\n  const lang = useSelector(state => state.intl.locale);\n  const {\n    content,\n    user\n  } = props;\n  const lock = content === null || content === void 0 ? void 0 : content.lock;\n  const creator = (lock === null || lock === void 0 ? void 0 : lock.creator_name) || (lock === null || lock === void 0 ? void 0 : lock.creator) || '';\n  const date = (lock === null || lock === void 0 ? void 0 : lock.created) || '';\n  const dateOptions = {\n    year: 'numeric',\n    month: 'long',\n    day: 'numeric',\n    hour: 'numeric',\n    minute: 'numeric'\n  };\n  useDeepCompareEffect(() => {\n    if (user && content) {\n      if (lock !== null && lock !== void 0 && lock.locked && lock !== null && lock !== void 0 && lock.stealable && (lock === null || lock === void 0 ? void 0 : lock.creator) !== user) {\n        if (toast.isActive('lockinginfo')) {\n          toast.update('lockinginfo', {\n            render: __jsx(Toast, {\n              info: true,\n              title: intl.formatMessage(messages.thisItemIsLocked, {\n                creator: creator,\n                date: __jsx(FormattedDate, {\n                  date: date,\n                  format: dateOptions,\n                  __self: this,\n                  __source: {\n                    fileName: _jsxFileName,\n                    lineNumber: 48,\n                    columnNumber: 25\n                  }\n                })\n              }),\n              content: intl.formatMessage(messages.unlockItem, {}),\n              __self: this,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 44,\n                columnNumber: 15\n              }\n            })\n          });\n        } else {\n          toast.info(__jsx(Toast, {\n            info: true,\n            title: intl.formatMessage(messages.thisItemIsLocked, {\n              creator: creator,\n              date: __jsx(FormattedDate, {\n                date: date,\n                format: dateOptions,\n                __self: this,\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 60,\n                  columnNumber: 23\n                }\n              })\n            }),\n            content: intl.formatMessage(messages.unlockItem, {}),\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 56,\n              columnNumber: 13\n            }\n          }), {\n            toastId: 'lockinginfo',\n            autoClose: false,\n            closeButton: false,\n            transition: null\n          });\n        }\n      } else {\n        if (toast.isActive('lockinginfo')) {\n          toast.dismiss('lockinginfo');\n        }\n      }\n    }\n  }, [content, creator, date, dateOptions, intl, lang, lock, pathname, user]);\n  return null;\n};\nexport default LockingToastsFactory;","map":{"version":3,"names":["React","toast","useSelector","useLocation","defineMessages","useIntl","FormattedDate","Toast","useDeepCompareEffect","messages","thisItemIsLocked","unlockItem","LockingToastsFactory","props","intl","pathname","lang","state","locale","content","user","lock","creator","creator_name","date","created","dateOptions","year","month","day","hour","minute","locked","stealable","isActive","update","render","__jsx","info","title","formatMessage","format","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","toastId","autoClose","closeButton","transition","dismiss"],"sources":["/Users/varshanmaji/Projects/volto/packages/volto/src/components/manage/LockingToastsFactory/LockingToastsFactory.jsx"],"sourcesContent":["import React from 'react';\nimport { toast } from 'react-toastify';\nimport { useSelector } from 'react-redux';\nimport { useLocation } from 'react-router-dom';\nimport { defineMessages, useIntl } from 'react-intl';\nimport FormattedDate from '@plone/volto/components/theme/FormattedDate/FormattedDate';\nimport Toast from '@plone/volto/components/manage/Toast/Toast';\nimport useDeepCompareEffect from 'use-deep-compare-effect';\n\nconst messages = defineMessages({\n  thisItemIsLocked: {\n    id: 'This item was locked by {creator} on {date}',\n    defaultMessage: 'This item was locked by {creator} on {date}',\n  },\n  unlockItem: {\n    id: 'If you are certain this user has abandoned the object, you may unlock the object. You will then be able to edit it.',\n    defaultMessage:\n      'If you are certain this user has abandoned the object, you may unlock the object. You will then be able to edit it.',\n  },\n});\n\nconst LockingToastsFactory = (props) => {\n  const intl = useIntl();\n  const pathname = useLocation().pathname;\n  const lang = useSelector((state) => state.intl.locale);\n  const { content, user } = props;\n  const lock = content?.lock;\n  const creator = lock?.creator_name || lock?.creator || '';\n  const date = lock?.created || '';\n  const dateOptions = {\n    year: 'numeric',\n    month: 'long',\n    day: 'numeric',\n    hour: 'numeric',\n    minute: 'numeric',\n  };\n\n  useDeepCompareEffect(() => {\n    if (user && content) {\n      if (lock?.locked && lock?.stealable && lock?.creator !== user) {\n        if (toast.isActive('lockinginfo')) {\n          toast.update('lockinginfo', {\n            render: (\n              <Toast\n                info\n                title={intl.formatMessage(messages.thisItemIsLocked, {\n                  creator: creator,\n                  date: <FormattedDate date={date} format={dateOptions} />,\n                })}\n                content={intl.formatMessage(messages.unlockItem, {})}\n              />\n            ),\n          });\n        } else {\n          toast.info(\n            <Toast\n              info\n              title={intl.formatMessage(messages.thisItemIsLocked, {\n                creator: creator,\n                date: <FormattedDate date={date} format={dateOptions} />,\n              })}\n              content={intl.formatMessage(messages.unlockItem, {})}\n            />,\n            {\n              toastId: 'lockinginfo',\n              autoClose: false,\n              closeButton: false,\n              transition: null,\n            },\n          );\n        }\n      } else {\n        if (toast.isActive('lockinginfo')) {\n          toast.dismiss('lockinginfo');\n        }\n      }\n    }\n  }, [content, creator, date, dateOptions, intl, lang, lock, pathname, user]);\n\n  return null;\n};\n\nexport default LockingToastsFactory;\n"],"mappings":"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","ignoreList":[]},"metadata":{"react-intl":{"messages":[{"id":"This item was locked by {creator} on {date}","defaultMessage":"This item was locked by {creator} on {date}"},{"id":"If you are certain this user has abandoned the object, you may unlock the object. You will then be able to edit it.","defaultMessage":"If you are certain this user has abandoned the object, you may unlock the object. You will then be able to edit it."}]}},"sourceType":"module","externalDependencies":[]}